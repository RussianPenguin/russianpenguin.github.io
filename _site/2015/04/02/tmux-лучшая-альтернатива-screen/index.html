<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="yandex-verification" content="551ffc5ae1433df6" />
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Tmux - лучшая альтернатива screen | Чтобы не забыть</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Tmux - лучшая альтернатива screen" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Довольно долго пытался пересесть с GNU Screen на tmux, но вот только сдерживало несколько вещей в нем. На сайте проекта можно найти описание всех фич, я же опишу лишь те, которые для меня оказались самыми полезными. Улучшенная модель отрисовки (да-да screen периодически подключивал) Содержимое терминала не теряется, когда мып ользуемся редакторами (открыли vim, закрыли, история осталась а месте и можно прокрутить до нее) Конфигурирование на лету C-b Ага. Это сочетание клавишь из vim. Переключим tmux на работу с C-a set-option -g prefix C-a Задержка между контрольными клавишами C-b и непосредственным вводом команды (например n). Решается просто set -s escape-time 0 Сочетание клавиш для управления tmux внутри tmux Бывает такое, что приходится внутри tmux запустить вложенную сессию tmux. Значит надо как-то пробросить этой вложенной сессии команды. Например C-a a command bind-key a send-prefix Начинаме считать окна с 1, а не 0 Это удобно, так как 0 находится где-то на отшибе. И к нему надо тянуться. set -g base-index 1 Агрессивный ресайз терминалов Дефолтно при подключении к сессии нескольких клиентов рамер окна выбирается по размеру самого маленького клиента. Это неинтересно. Поэтому позволим терминалу для каждого клиента иметь собственный размер. setw -g aggressive-resize on После завершения команды можно ввести другую команду не нажимая C-b Для меня эта проблема была самой неприятно. Воспроизвести ее просто: нужно на готом tmux создать два региона. C-b &quot; А затем переключаться между ними. C-b Up Down Up Down Вы заметите, что нажав один раз C-b, а потом быстро нажимая вверх-вниз окна переключаются. Это неприятно когда пытаешься переключить вкладку и начать тут же вводить что-то. За такое поведение отвечает repeat-time repeat-time time Allow multiple commands to be entered without pressing the prefix-key again in the specified time milliseconds (the default is 500). Whether a key repeats may be set when it is bound using the -r flag to bind-key. Repeat is enabled for the default keys bound to the resize-pane command. Можно отключить repeat для команд переключения между панелями и окнами просто переобъявив команду без флага -r. Например так: bind-key Up select-pane -U Но я же предпочитаю эту фичу отключить вовсе. set-option -g repeat-time 0 Базовый ~/.tmux.conf # C-b не подходит - так как используется в vim set-option -g prefix C-a bind-key C-a last-window # Начинам нумерацию окон с 1 set -g base-index 1 # Добавляем отзывчивости в реакции на команды set -s escape-time 0 # Отключаем ожидание дополнительных команд set-option -g repeat-time 0 # Или можно забиндить команды отдельно отключая repeat только для нужных #bind-key Up select-pane -U # Цветовая схема set -g status-bg black set -g status-fg white set -g status-left &quot;&quot; set -g status-right &quot;#[fg=green]#H&quot; # Ресайзим содержимое окна индивидуально для каждого клиента setw -g aggressive-resize on # Позволим пробрасывать команды внутрь вложенной сессии tmux # при помощи C-a a \&lt;command\&gt; bind-key a send-prefix # Мониторинг активности #setw -g monitor-activity on #set -g visual-activity on # Пример использования команды оболочки в статусной строке #set -g status-right &quot;#[fg=yellow]#(uptime | cut -d &#39;,&#39; -f 2-)&quot; # Подсвечиваем активное окно set-window-option -g window-status-current-bg green За кадром осталось использование tmuxinator для запуска tmux c определенной заранее раскладкой окон. Ну и еще про настройку можно почитать в Arch-wiki." />
<meta property="og:description" content="Довольно долго пытался пересесть с GNU Screen на tmux, но вот только сдерживало несколько вещей в нем. На сайте проекта можно найти описание всех фич, я же опишу лишь те, которые для меня оказались самыми полезными. Улучшенная модель отрисовки (да-да screen периодически подключивал) Содержимое терминала не теряется, когда мып ользуемся редакторами (открыли vim, закрыли, история осталась а месте и можно прокрутить до нее) Конфигурирование на лету C-b Ага. Это сочетание клавишь из vim. Переключим tmux на работу с C-a set-option -g prefix C-a Задержка между контрольными клавишами C-b и непосредственным вводом команды (например n). Решается просто set -s escape-time 0 Сочетание клавиш для управления tmux внутри tmux Бывает такое, что приходится внутри tmux запустить вложенную сессию tmux. Значит надо как-то пробросить этой вложенной сессии команды. Например C-a a command bind-key a send-prefix Начинаме считать окна с 1, а не 0 Это удобно, так как 0 находится где-то на отшибе. И к нему надо тянуться. set -g base-index 1 Агрессивный ресайз терминалов Дефолтно при подключении к сессии нескольких клиентов рамер окна выбирается по размеру самого маленького клиента. Это неинтересно. Поэтому позволим терминалу для каждого клиента иметь собственный размер. setw -g aggressive-resize on После завершения команды можно ввести другую команду не нажимая C-b Для меня эта проблема была самой неприятно. Воспроизвести ее просто: нужно на готом tmux создать два региона. C-b &quot; А затем переключаться между ними. C-b Up Down Up Down Вы заметите, что нажав один раз C-b, а потом быстро нажимая вверх-вниз окна переключаются. Это неприятно когда пытаешься переключить вкладку и начать тут же вводить что-то. За такое поведение отвечает repeat-time repeat-time time Allow multiple commands to be entered without pressing the prefix-key again in the specified time milliseconds (the default is 500). Whether a key repeats may be set when it is bound using the -r flag to bind-key. Repeat is enabled for the default keys bound to the resize-pane command. Можно отключить repeat для команд переключения между панелями и окнами просто переобъявив команду без флага -r. Например так: bind-key Up select-pane -U Но я же предпочитаю эту фичу отключить вовсе. set-option -g repeat-time 0 Базовый ~/.tmux.conf # C-b не подходит - так как используется в vim set-option -g prefix C-a bind-key C-a last-window # Начинам нумерацию окон с 1 set -g base-index 1 # Добавляем отзывчивости в реакции на команды set -s escape-time 0 # Отключаем ожидание дополнительных команд set-option -g repeat-time 0 # Или можно забиндить команды отдельно отключая repeat только для нужных #bind-key Up select-pane -U # Цветовая схема set -g status-bg black set -g status-fg white set -g status-left &quot;&quot; set -g status-right &quot;#[fg=green]#H&quot; # Ресайзим содержимое окна индивидуально для каждого клиента setw -g aggressive-resize on # Позволим пробрасывать команды внутрь вложенной сессии tmux # при помощи C-a a \&lt;command\&gt; bind-key a send-prefix # Мониторинг активности #setw -g monitor-activity on #set -g visual-activity on # Пример использования команды оболочки в статусной строке #set -g status-right &quot;#[fg=yellow]#(uptime | cut -d &#39;,&#39; -f 2-)&quot; # Подсвечиваем активное окно set-window-option -g window-status-current-bg green За кадром осталось использование tmuxinator для запуска tmux c определенной заранее раскладкой окон. Ну и еще про настройку можно почитать в Arch-wiki." />
<link rel="canonical" href="http://localhost:4000/2015/04/02/tmux-%D0%BB%D1%83%D1%87%D1%88%D0%B0%D1%8F-%D0%B0%D0%BB%D1%8C%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%82%D0%B8%D0%B2%D0%B0-screen/" />
<meta property="og:url" content="http://localhost:4000/2015/04/02/tmux-%D0%BB%D1%83%D1%87%D1%88%D0%B0%D1%8F-%D0%B0%D0%BB%D1%8C%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%82%D0%B8%D0%B2%D0%B0-screen/" />
<meta property="og:site_name" content="Чтобы не забыть" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-04-02T16:43:09+03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Tmux - лучшая альтернатива screen" />
<script type="application/ld+json">
{"headline":"Tmux - лучшая альтернатива screen","dateModified":"2015-04-02T16:43:09+03:00","datePublished":"2015-04-02T16:43:09+03:00","description":"Довольно долго пытался пересесть с GNU Screen на tmux, но вот только сдерживало несколько вещей в нем. На сайте проекта можно найти описание всех фич, я же опишу лишь те, которые для меня оказались самыми полезными. Улучшенная модель отрисовки (да-да screen периодически подключивал) Содержимое терминала не теряется, когда мып ользуемся редакторами (открыли vim, закрыли, история осталась а месте и можно прокрутить до нее) Конфигурирование на лету C-b Ага. Это сочетание клавишь из vim. Переключим tmux на работу с C-a set-option -g prefix C-a Задержка между контрольными клавишами C-b и непосредственным вводом команды (например n). Решается просто set -s escape-time 0 Сочетание клавиш для управления tmux внутри tmux Бывает такое, что приходится внутри tmux запустить вложенную сессию tmux. Значит надо как-то пробросить этой вложенной сессии команды. Например C-a a command bind-key a send-prefix Начинаме считать окна с 1, а не 0 Это удобно, так как 0 находится где-то на отшибе. И к нему надо тянуться. set -g base-index 1 Агрессивный ресайз терминалов Дефолтно при подключении к сессии нескольких клиентов рамер окна выбирается по размеру самого маленького клиента. Это неинтересно. Поэтому позволим терминалу для каждого клиента иметь собственный размер. setw -g aggressive-resize on После завершения команды можно ввести другую команду не нажимая C-b Для меня эта проблема была самой неприятно. Воспроизвести ее просто: нужно на готом tmux создать два региона. C-b &quot; А затем переключаться между ними. C-b Up Down Up Down Вы заметите, что нажав один раз C-b, а потом быстро нажимая вверх-вниз окна переключаются. Это неприятно когда пытаешься переключить вкладку и начать тут же вводить что-то. За такое поведение отвечает repeat-time repeat-time time Allow multiple commands to be entered without pressing the prefix-key again in the specified time milliseconds (the default is 500). Whether a key repeats may be set when it is bound using the -r flag to bind-key. Repeat is enabled for the default keys bound to the resize-pane command. Можно отключить repeat для команд переключения между панелями и окнами просто переобъявив команду без флага -r. Например так: bind-key Up select-pane -U Но я же предпочитаю эту фичу отключить вовсе. set-option -g repeat-time 0 Базовый ~/.tmux.conf # C-b не подходит - так как используется в vim set-option -g prefix C-a bind-key C-a last-window # Начинам нумерацию окон с 1 set -g base-index 1 # Добавляем отзывчивости в реакции на команды set -s escape-time 0 # Отключаем ожидание дополнительных команд set-option -g repeat-time 0 # Или можно забиндить команды отдельно отключая repeat только для нужных #bind-key Up select-pane -U # Цветовая схема set -g status-bg black set -g status-fg white set -g status-left &quot;&quot; set -g status-right &quot;#[fg=green]#H&quot; # Ресайзим содержимое окна индивидуально для каждого клиента setw -g aggressive-resize on # Позволим пробрасывать команды внутрь вложенной сессии tmux # при помощи C-a a \\&lt;command\\&gt; bind-key a send-prefix # Мониторинг активности #setw -g monitor-activity on #set -g visual-activity on # Пример использования команды оболочки в статусной строке #set -g status-right &quot;#[fg=yellow]#(uptime | cut -d &#39;,&#39; -f 2-)&quot; # Подсвечиваем активное окно set-window-option -g window-status-current-bg green За кадром осталось использование tmuxinator для запуска tmux c определенной заранее раскладкой окон. Ну и еще про настройку можно почитать в Arch-wiki.","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2015/04/02/tmux-%D0%BB%D1%83%D1%87%D1%88%D0%B0%D1%8F-%D0%B0%D0%BB%D1%8C%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%82%D0%B8%D0%B2%D0%B0-screen/"},"@type":"BlogPosting","url":"http://localhost:4000/2015/04/02/tmux-%D0%BB%D1%83%D1%87%D1%88%D0%B0%D1%8F-%D0%B0%D0%BB%D1%8C%D1%82%D0%B5%D1%80%D0%BD%D0%B0%D1%82%D0%B8%D0%B2%D0%B0-screen/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=eacdde9998fcd3dd17b1956e7070eca69fdaf217">
  </head>
  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name">Tmux - лучшая альтернатива screen</h1>
      <h2 class="project-tagline">Записная книжка рассеянного [в пространстве и времени] программиста</h2>
      
        <a href="https://github.com/RussianPenguin/russianpenguin.github.io" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1>Tmux - лучшая альтернатива screen</h1>
<p>02 Apr 2015</p>

<p>Довольно долго пытался пересесть с GNU Screen на tmux, но вот только сдерживало несколько вещей в нем.<br />
На <a href="http://tmux.sourceforge.net/" title="tmux is a terminal multiplexer">сайте</a> проекта можно найти описание всех фич, я же опишу лишь те, которые для меня оказались самыми полезными.</p>

<ul>
  <li><strong>Улучшенная модель отрисовки</strong> (да-да screen периодически подключивал)</li>
  <li><strong>Содержимое терминала не теряется, когда мып ользуемся редакторами</strong> (открыли vim, закрыли, история осталась а месте и можно прокрутить до нее)</li>
  <li><strong>Конфигурирование на лету</strong></li>
</ul>

<h3 id="c-b">C-b</h3>

<p>Ага. Это сочетание клавишь из vim.</p>

<p>Переключим tmux на работу с C-a</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set-option -g prefix C-a
</code></pre></div></div>

<h3 id="задержка-между-контрольными-клавишами-c-b-и-непосредственным-вводом-команды-например-n">Задержка между контрольными клавишами C-b и непосредственным вводом команды (например n).</h3>

<p>Решается просто</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set -s escape-time 0
</code></pre></div></div>

<h3 id="сочетание-клавиш-для-управления-tmux-внутри-tmux">Сочетание клавиш для управления tmux внутри tmux</h3>

<p>Бывает такое, что приходится внутри tmux запустить вложенную сессию tmux. Значит надо как-то пробросить этой вложенной сессии команды. Например <strong>C-a a <em>command</em></strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bind-key a send-prefix
</code></pre></div></div>

<h3 id="начинаме-считать-окна-с-1-а-не-0">Начинаме считать окна с 1, а не 0</h3>

<p>Это удобно, так как 0 находится где-то на отшибе. И к нему надо тянуться.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set -g base-index 1
</code></pre></div></div>

<h3 id="агрессивный-ресайз-терминалов">Агрессивный ресайз терминалов</h3>

<p>Дефолтно при подключении к сессии нескольких клиентов рамер окна выбирается по размеру самого маленького клиента. Это неинтересно. Поэтому позволим терминалу для каждого клиента иметь собственный размер.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>setw -g aggressive-resize on
</code></pre></div></div>

<h3 id="после-завершения-команды-можно-ввести-другую-команду-не-нажимая-c-b">После завершения команды можно ввести другую команду не нажимая C-b</h3>

<p>Для меня эта проблема была самой неприятно. Воспроизвести ее просто: нужно на готом tmux создать два региона.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C-b "
</code></pre></div></div>

<p>А затем переключаться между ними.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>C-b Up Down Up Down
</code></pre></div></div>

<p>Вы заметите, что нажав один раз C-b, а потом быстро нажимая вверх-вниз окна переключаются.</p>

<p>Это неприятно когда пытаешься переключить вкладку и начать тут же вводить что-то.</p>

<p>За такое поведение отвечает repeat-time</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>repeat-time time  
 Allow multiple commands to be entered without pressing  
 the prefix-key again in the specified time milliseconds  
 (the default is 500). Whether a key repeats may be set  
 when it is bound using the -r flag to bind-key. Repeat  
 is enabled for the default keys bound to the resize-pane  
 command.
</code></pre></div></div>

<p>Можно отключить repeat для команд переключения между панелями и окнами просто переобъявив команду без флага -r. Например так:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bind-key Up select-pane -U
</code></pre></div></div>

<p>Но я же предпочитаю эту фичу отключить вовсе.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>set-option -g repeat-time 0
</code></pre></div></div>

<h3 id="базовый-tmuxconf">Базовый ~/.tmux.conf</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># C-b не подходит - так как используется в vim  
set-option -g prefix C-a  
bind-key C-a last-window

# Начинам нумерацию окон с 1  
set -g base-index 1

# Добавляем отзывчивости в реакции на команды  
set -s escape-time 0

# Отключаем ожидание дополнительных команд  
set-option -g repeat-time 0

# Или можно забиндить команды отдельно отключая repeat только для нужных  
#bind-key Up select-pane -U

# Цветовая схема  
set -g status-bg black  
set -g status-fg white  
set -g status-left ""  
set -g status-right "#[fg=green]#H"

# Ресайзим содержимое окна индивидуально для каждого клиента  
setw -g aggressive-resize on

# Позволим пробрасывать команды внутрь вложенной сессии tmux  
# при помощи C-a a \&lt;command\&gt;  
bind-key a send-prefix

# Мониторинг активности  
#setw -g monitor-activity on  
#set -g visual-activity on

# Пример использования команды оболочки в статусной строке  
#set -g status-right "#[fg=yellow]#(uptime | cut -d ',' -f 2-)"

# Подсвечиваем активное окно  
set-window-option -g window-status-current-bg green
</code></pre></div></div>

<p>За кадром осталось использование <a href="https://github.com/tmuxinator/tmuxinator" title="Tmuxinator">tmuxinator</a> для запуска tmux c определенной заранее раскладкой окон.</p>

<p>Ну и еще про настройку можно почитать в <a href="https://wiki.archlinux.org/index.php/Tmux" title="ArchWiki: Tmux">Arch-wiki</a>.</p>




      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/RussianPenguin/russianpenguin.github.io">russianpenguin.github.io</a> is maintained by <a href="https://github.com/RussianPenguin">RussianPenguin</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(69889387, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/69889387" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  </body>
</html>
