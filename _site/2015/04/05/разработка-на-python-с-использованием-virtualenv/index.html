<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="yandex-verification" content="551ffc5ae1433df6" />
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Разработка на Python с использованием virtualenv | Чтобы не забыть</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Разработка на Python с использованием virtualenv" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Virtual Environment - полезный инструмент, который позволет держать различные конфигурации зависимостей проектов в разных директориях. Например он решает проблему когда одному приложению требуется версия 1.0 пакета X, а другому - 2.0. vitrualenv Главным инструментов будет virtualenv. $ sudo yum install python-virtualenv Использование Создадим окружение $ cd project\_dir $ virtualenv proj\_env Этими командами мы создадим папку proj_env, которая будет содержать наше новое окружение. В этой папке будет набор скриптов и копия интерпретатора python, который будет использоваться в окружении (окружение использует свой интерпретатор, а не общесистемный). При создании окружения можно указать, какая версия python нам нужна. Возможно, что в системе параллельно стоит как python2, так и python3. Выбирать версию при создании окружения мы можем ключем -p. Если ключ не указан, то будет выбрана версия /usr/bin/python. $ virtualenv -p /usr/bin/python3.4 proj\_env Для того, чтобы попасть в наше новое окружение используем $ source proj\_env/bin/activate Теперь мы внутри окружения. Определеить это можно по изменившемуся приглашению: (proj\_env)тут\_старое\_приглашение\_из\_$PS1 Все. Мы внутри окружения. Можно ставить зависимости для нашего приложения. $ pip install flask flask-bootsrap rq rq-scheduler pymysql Выйти из окружения можно при помощи $ deactivate Теперь мы попали обратно в систему с дефолтными интерпретаторами. Сохранение информации о зависимостях Опция –no-site-packages отключает использование глобально-установленных пакетов, что может быть полезно (сейчас это дефолтное поведение virtualenv). Хорошей идей будет сохранить информацию об установленных в окружении пакетов. {code lang=”shell”]$ pip freeze &gt; requirements.txt После развертывание окружения в новой системе можно поднять все пакеты сразу. ```shell $ pip install -r requirements.txt Не забываем добавить папку окружения в .gitignore. virtualenverapper Еще один полезный инструмент (скорее для разработчиков, а не для деплоя), который позволяет обращаться со со множеством окружений и переключаться между ними. $ sudo yum install python-virtualenvwrapper Применение Добавляем в .bashrc export WORKON\_HOME=~/.envs source /usr/bin/virtualenvwrapper.sh Теперь можно создавать окружения. $ mkvirtualenv proj\_env Активировать окружения. $ workon proj\_env Выходить из окружения можно так же как это делалось в кготом virtualenv. $ deactivate Удалять окружения. $ rmvirtualenv proj\_env При этом все папки окружений будет расположены в одном месте: папке, которая задана через $WORKON_HOME. Дополнительные команды Есть несколько дополнительных команд lsvirtualenv - покажет список созданных окружений cdvirtualenv - перейдет непосрественно в папку окружения cdsitepackages - переведет в site-packages выбранного окруженияч lssitepackages - сделает ls для папки site-packages Посмотреть полный список команд. autoenv Утилита позволяет активировать окружение при входе в папку, и деактивировать при выходе. $ git clone git://github.com/kennethreitz/autoenv.git ~/.autoenv $ echo &#39;source ~/.autoenv/activate.sh&#39; \&gt;\&gt; ~/.bashrc" />
<meta property="og:description" content="Virtual Environment - полезный инструмент, который позволет держать различные конфигурации зависимостей проектов в разных директориях. Например он решает проблему когда одному приложению требуется версия 1.0 пакета X, а другому - 2.0. vitrualenv Главным инструментов будет virtualenv. $ sudo yum install python-virtualenv Использование Создадим окружение $ cd project\_dir $ virtualenv proj\_env Этими командами мы создадим папку proj_env, которая будет содержать наше новое окружение. В этой папке будет набор скриптов и копия интерпретатора python, который будет использоваться в окружении (окружение использует свой интерпретатор, а не общесистемный). При создании окружения можно указать, какая версия python нам нужна. Возможно, что в системе параллельно стоит как python2, так и python3. Выбирать версию при создании окружения мы можем ключем -p. Если ключ не указан, то будет выбрана версия /usr/bin/python. $ virtualenv -p /usr/bin/python3.4 proj\_env Для того, чтобы попасть в наше новое окружение используем $ source proj\_env/bin/activate Теперь мы внутри окружения. Определеить это можно по изменившемуся приглашению: (proj\_env)тут\_старое\_приглашение\_из\_$PS1 Все. Мы внутри окружения. Можно ставить зависимости для нашего приложения. $ pip install flask flask-bootsrap rq rq-scheduler pymysql Выйти из окружения можно при помощи $ deactivate Теперь мы попали обратно в систему с дефолтными интерпретаторами. Сохранение информации о зависимостях Опция –no-site-packages отключает использование глобально-установленных пакетов, что может быть полезно (сейчас это дефолтное поведение virtualenv). Хорошей идей будет сохранить информацию об установленных в окружении пакетов. {code lang=”shell”]$ pip freeze &gt; requirements.txt После развертывание окружения в новой системе можно поднять все пакеты сразу. ```shell $ pip install -r requirements.txt Не забываем добавить папку окружения в .gitignore. virtualenverapper Еще один полезный инструмент (скорее для разработчиков, а не для деплоя), который позволяет обращаться со со множеством окружений и переключаться между ними. $ sudo yum install python-virtualenvwrapper Применение Добавляем в .bashrc export WORKON\_HOME=~/.envs source /usr/bin/virtualenvwrapper.sh Теперь можно создавать окружения. $ mkvirtualenv proj\_env Активировать окружения. $ workon proj\_env Выходить из окружения можно так же как это делалось в кготом virtualenv. $ deactivate Удалять окружения. $ rmvirtualenv proj\_env При этом все папки окружений будет расположены в одном месте: папке, которая задана через $WORKON_HOME. Дополнительные команды Есть несколько дополнительных команд lsvirtualenv - покажет список созданных окружений cdvirtualenv - перейдет непосрественно в папку окружения cdsitepackages - переведет в site-packages выбранного окруженияч lssitepackages - сделает ls для папки site-packages Посмотреть полный список команд. autoenv Утилита позволяет активировать окружение при входе в папку, и деактивировать при выходе. $ git clone git://github.com/kennethreitz/autoenv.git ~/.autoenv $ echo &#39;source ~/.autoenv/activate.sh&#39; \&gt;\&gt; ~/.bashrc" />
<link rel="canonical" href="http://localhost:4000/2015/04/05/%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%BD%D0%B0-python-%D1%81-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC-virtualenv/" />
<meta property="og:url" content="http://localhost:4000/2015/04/05/%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%BD%D0%B0-python-%D1%81-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC-virtualenv/" />
<meta property="og:site_name" content="Чтобы не забыть" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2015-04-05T18:31:34+03:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Разработка на Python с использованием virtualenv" />
<script type="application/ld+json">
{"headline":"Разработка на Python с использованием virtualenv","dateModified":"2015-04-05T18:31:34+03:00","datePublished":"2015-04-05T18:31:34+03:00","description":"Virtual Environment - полезный инструмент, который позволет держать различные конфигурации зависимостей проектов в разных директориях. Например он решает проблему когда одному приложению требуется версия 1.0 пакета X, а другому - 2.0. vitrualenv Главным инструментов будет virtualenv. $ sudo yum install python-virtualenv Использование Создадим окружение $ cd project\\_dir $ virtualenv proj\\_env Этими командами мы создадим папку proj_env, которая будет содержать наше новое окружение. В этой папке будет набор скриптов и копия интерпретатора python, который будет использоваться в окружении (окружение использует свой интерпретатор, а не общесистемный). При создании окружения можно указать, какая версия python нам нужна. Возможно, что в системе параллельно стоит как python2, так и python3. Выбирать версию при создании окружения мы можем ключем -p. Если ключ не указан, то будет выбрана версия /usr/bin/python. $ virtualenv -p /usr/bin/python3.4 proj\\_env Для того, чтобы попасть в наше новое окружение используем $ source proj\\_env/bin/activate Теперь мы внутри окружения. Определеить это можно по изменившемуся приглашению: (proj\\_env)тут\\_старое\\_приглашение\\_из\\_$PS1 Все. Мы внутри окружения. Можно ставить зависимости для нашего приложения. $ pip install flask flask-bootsrap rq rq-scheduler pymysql Выйти из окружения можно при помощи $ deactivate Теперь мы попали обратно в систему с дефолтными интерпретаторами. Сохранение информации о зависимостях Опция –no-site-packages отключает использование глобально-установленных пакетов, что может быть полезно (сейчас это дефолтное поведение virtualenv). Хорошей идей будет сохранить информацию об установленных в окружении пакетов. {code lang=”shell”]$ pip freeze &gt; requirements.txt После развертывание окружения в новой системе можно поднять все пакеты сразу. ```shell $ pip install -r requirements.txt Не забываем добавить папку окружения в .gitignore. virtualenverapper Еще один полезный инструмент (скорее для разработчиков, а не для деплоя), который позволяет обращаться со со множеством окружений и переключаться между ними. $ sudo yum install python-virtualenvwrapper Применение Добавляем в .bashrc export WORKON\\_HOME=~/.envs source /usr/bin/virtualenvwrapper.sh Теперь можно создавать окружения. $ mkvirtualenv proj\\_env Активировать окружения. $ workon proj\\_env Выходить из окружения можно так же как это делалось в кготом virtualenv. $ deactivate Удалять окружения. $ rmvirtualenv proj\\_env При этом все папки окружений будет расположены в одном месте: папке, которая задана через $WORKON_HOME. Дополнительные команды Есть несколько дополнительных команд lsvirtualenv - покажет список созданных окружений cdvirtualenv - перейдет непосрественно в папку окружения cdsitepackages - переведет в site-packages выбранного окруженияч lssitepackages - сделает ls для папки site-packages Посмотреть полный список команд. autoenv Утилита позволяет активировать окружение при входе в папку, и деактивировать при выходе. $ git clone git://github.com/kennethreitz/autoenv.git ~/.autoenv $ echo &#39;source ~/.autoenv/activate.sh&#39; \\&gt;\\&gt; ~/.bashrc","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2015/04/05/%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%BD%D0%B0-python-%D1%81-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC-virtualenv/"},"@type":"BlogPosting","url":"http://localhost:4000/2015/04/05/%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0-%D0%BD%D0%B0-python-%D1%81-%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%D0%BC-virtualenv/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=eacdde9998fcd3dd17b1956e7070eca69fdaf217">
  </head>
  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name">Разработка на Python с использованием virtualenv</h1>
      <h2 class="project-tagline">Записная книжка рассеянного [в пространстве и времени] программиста</h2>
      
        <a href="https://github.com/RussianPenguin/russianpenguin.github.io" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1>Разработка на Python с использованием virtualenv</h1>
<p>05 Apr 2015</p>

<p><a href="https://virtualenv.readthedocs.org/en/latest/" title="virtualenv">Virtual Environment</a> - полезный инструмент, который позволет держать различные конфигурации зависимостей проектов в разных директориях. Например он решает проблему когда одному приложению требуется версия 1.0 пакета X, а другому - 2.0.</p>

<h2 id="vitrualenv">vitrualenv</h2>

<p>Главным инструментов будет virtualenv.</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>yum <span class="nb">install </span>python-virtualenv
</code></pre></div></div>

<h3 id="использование">Использование</h3>

<p>Создадим окружение</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd </span>project<span class="se">\_</span><span class="nb">dir</span>  
<span class="nv">$ </span>virtualenv proj<span class="se">\_</span><span class="nb">env</span>
</code></pre></div></div>

<p>Этими командами мы создадим папку proj_env, которая будет содержать наше новое окружение. В этой папке будет набор скриптов и копия интерпретатора python, который будет использоваться в окружении (окружение использует свой интерпретатор, а не общесистемный).</p>

<p>При создании окружения можно указать, какая версия python нам нужна.</p>

<p>Возможно, что в системе параллельно стоит как python2, так и python3. Выбирать версию при создании окружения мы можем ключем -p. Если ключ не указан, то будет выбрана версия /usr/bin/python.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>virtualenv <span class="nt">-p</span> /usr/bin/python3.4 proj<span class="se">\_</span><span class="nb">env</span>
</code></pre></div></div>

<p>Для того, чтобы попасть в наше новое окружение используем</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">source </span>proj<span class="se">\_</span><span class="nb">env</span>/bin/activate
</code></pre></div></div>

<p>Теперь мы внутри окружения.</p>

<p>Определеить это можно по изменившемуся приглашению:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(proj\_env)тут\_старое\_приглашение\_из\_$PS1
</code></pre></div></div>

<p>Все. Мы внутри окружения. Можно ставить зависимости для нашего приложения.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>pip <span class="nb">install </span>flask flask-bootsrap rq rq-scheduler pymysql
</code></pre></div></div>

<p>Выйти из окружения можно при помощи</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>deactivate
</code></pre></div></div>

<p>Теперь мы попали обратно в систему с дефолтными интерпретаторами.</p>

<h3 id="сохранение-информации-о-зависимостях">Сохранение информации о зависимостях</h3>

<p>Опция –no-site-packages отключает использование глобально-установленных пакетов, что может быть полезно (сейчас это дефолтное поведение virtualenv).</p>

<p>Хорошей идей будет сохранить информацию об установленных в окружении пакетов.</p>

<p>{code lang=”shell”]$ pip freeze &gt; requirements.txt</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
После развертывание окружения в новой системе можно поднять все пакеты сразу.

```shell
$ pip install -r requirements.txt
</code></pre></div></div>

<p>Не забываем добавить папку окружения в .gitignore.</p>

<h2 id="virtualenverapper">virtualenverapper</h2>

<p>Еще один полезный инструмент (скорее для разработчиков, а не для деплоя), который позволяет обращаться со со множеством окружений и переключаться между ними.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>yum <span class="nb">install </span>python-virtualenvwrapper
</code></pre></div></div>

<h3 id="применение">Применение</h3>

<p>Добавляем в .bashrc</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">export </span>WORKON<span class="se">\_</span><span class="nv">HOME</span><span class="o">=</span>~/.envs  
<span class="nb">source</span> /usr/bin/virtualenvwrapper.sh
</code></pre></div></div>

<p>Теперь можно создавать окружения.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mkvirtualenv proj<span class="se">\_</span><span class="nb">env</span>
</code></pre></div></div>

<p>Активировать окружения.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>workon proj<span class="se">\_</span><span class="nb">env</span>
</code></pre></div></div>

<p>Выходить из окружения можно так же как это делалось в кготом virtualenv.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>deactivate
</code></pre></div></div>

<p>Удалять окружения.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rmvirtualenv proj<span class="se">\_</span><span class="nb">env</span>
</code></pre></div></div>

<p>При этом все папки окружений будет расположены в одном месте: папке, которая задана через $WORKON_HOME.</p>

<h3 id="дополнительные-команды">Дополнительные команды</h3>

<p>Есть несколько дополнительных команд</p>

<ul>
  <li>lsvirtualenv - покажет список созданных окружений</li>
  <li>cdvirtualenv - перейдет непосрественно в папку окружения</li>
  <li>cdsitepackages - переведет в site-packages выбранного окруженияч</li>
  <li>lssitepackages - сделает ls для папки site-packages</li>
</ul>

<p><a href="http://virtualenvwrapper.readthedocs.org/en/latest/command_ref.html" title="Список команд virtualenvwrapper">Посмотреть полный список команд</a>.</p>

<h2 id="autoenv">autoenv</h2>

<p><a href="https://github.com/kennethreitz/autoenv" title="autoenv">Утилита</a> позволяет активировать окружение при входе в папку, и деактивировать при выходе.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone git://github.com/kennethreitz/autoenv.git ~/.autoenv  
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">'source ~/.autoenv/activate.sh'</span> <span class="se">\&gt;\&gt;</span> ~/.bashrc
</code></pre></div></div>




      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/RussianPenguin/russianpenguin.github.io">russianpenguin.github.io</a> is maintained by <a href="https://github.com/RussianPenguin">RussianPenguin</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(69889387, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/69889387" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  </body>
</html>
