<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="yandex-verification" content="551ffc5ae1433df6" />
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Чтобы не забыть | Записная книжка рассеянного [в пространстве и времени] программиста</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Чтобы не забыть" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<meta property="og:description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<link rel="canonical" href="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/inifile/" />
<meta property="og:url" content="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/inifile/" />
<meta property="og:site_name" content="Чтобы не забыть" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Чтобы не забыть" />
<script type="application/ld+json">
{"headline":"Чтобы не забыть","description":"Записная книжка рассеянного [в пространстве и времени] программиста","@type":"WebPage","url":"http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/inifile/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=eacdde9998fcd3dd17b1956e7070eca69fdaf217">
  </head>
  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name">Чтобы не забыть</h1>
      <h2 class="project-tagline">Записная книжка рассеянного [в пространстве и времени] программиста</h2>
      
        <a href="https://github.com/RussianPenguin/russianpenguin.github.io" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <p>#inifile</p>

<p><a href="https://travis-ci.org/puppetlabs/puppetlabs-inifile"><img src="https://travis-ci.org/puppetlabs/puppetlabs-inifile.png?branch=master" alt="Build Status" /></a></p>

<p>####Table of Contents</p>

<ol>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#module-description">Module Description - What the module does and why it is useful</a></li>
  <li><a href="#setup">Setup - The basics of getting started with inifile module</a>
    <ul>
      <li><a href="#beginning-with-inifile">Beginning with inifile</a></li>
    </ul>
  </li>
  <li><a href="#usage">Usage - Configuration options and additional functionality</a></li>
  <li><a href="#reference">Reference - An under-the-hood peek at what the module is doing and how</a></li>
  <li><a href="#limitations">Limitations - OS compatibility, etc.</a></li>
  <li><a href="#development">Development - Guide for contributing to the module</a></li>
</ol>

<p>##Overview</p>

<p>The inifile module lets Puppet manage settings stored in INI-style configuration files.</p>

<p>##Module Description</p>

<p>Many applications use INI-style configuration files to store their settings. This module supplies two custom resource types to let you manage those settings through Puppet.</p>

<p>##Setup</p>

<p>###Beginning with inifile</p>

<p>To manage a single setting in an INI file, add the <code class="language-plaintext highlighter-rouge">ini_setting</code> type to a class:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ini_setting</span> <span class="p">{</span> <span class="s2">"sample setting"</span><span class="p">:</span>
  <span class="py">ensure</span>  <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
  <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/tmp/foo.ini'</span><span class="p">,</span>
  <span class="py">section</span> <span class="p">=&gt;</span> <span class="s1">'bar'</span><span class="p">,</span>
  <span class="py">setting</span> <span class="p">=&gt;</span> <span class="s1">'baz'</span><span class="p">,</span>
  <span class="py">value</span>   <span class="p">=&gt;</span> <span class="s1">'quux'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>##Usage</p>

<p>The inifile module tries hard not to manipulate your file any more than it needs to. In most cases, it doesn’t affect the original whitespace, comments, ordering, etc.</p>

<ul>
  <li>Supports comments starting with either ‘#’ or ‘;’.</li>
  <li>Supports either whitespace or no whitespace around ‘=’.</li>
  <li>Adds any missing sections to the INI file.</li>
</ul>

<p>###Manage multiple values in a setting</p>

<p>Use the <code class="language-plaintext highlighter-rouge">ini_subsetting</code> type:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ini_subsetting</span> <span class="p">{</span><span class="s1">'sample subsetting'</span><span class="p">:</span>
  <span class="py">ensure</span>            <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
  <span class="py">section</span>           <span class="p">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
  <span class="py">key_val_separator</span> <span class="p">=&gt;</span> <span class="s1">'='</span><span class="p">,</span>
  <span class="py">path</span>              <span class="p">=&gt;</span> <span class="s1">'/etc/default/pe-puppetdb'</span><span class="p">,</span>
  <span class="py">setting</span>           <span class="p">=&gt;</span> <span class="s1">'JAVA_ARGS'</span><span class="p">,</span>
  <span class="py">subsetting</span>        <span class="p">=&gt;</span> <span class="s1">'-Xmx'</span><span class="p">,</span>
  <span class="py">value</span>             <span class="p">=&gt;</span> <span class="s1">'512m'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Results in managing this <code class="language-plaintext highlighter-rouge">-Xmx</code> subsetting:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">JAVA_ARGS</span><span class="o">=</span><span class="s2">"-Xmx512m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/log/pe-puppetdb/puppetdb-oom.hprof"</span>
</code></pre></div></div>

<p>###Use a non-standard section header</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ini_setting</span> <span class="p">{</span> <span class="s1">'default minage'</span><span class="p">:</span>
  <span class="py">ensure</span>         <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
  <span class="py">path</span>           <span class="p">=&gt;</span> <span class="s1">'/etc/security/users'</span><span class="p">,</span>
  <span class="py">section</span>        <span class="p">=&gt;</span> <span class="s1">'default'</span><span class="p">,</span>
  <span class="py">setting</span>        <span class="p">=&gt;</span> <span class="s1">'minage'</span><span class="p">,</span>
  <span class="py">value</span>          <span class="p">=&gt;</span> <span class="s1">'1'</span><span class="p">,</span>
  <span class="py">section_prefix</span> <span class="p">=&gt;</span> <span class="s1">''</span><span class="p">,</span>
  <span class="py">section_suffix</span> <span class="p">=&gt;</span> <span class="s1">':'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Results in:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">default</span><span class="p">:</span>
   <span class="n">minage</span> <span class="o">=</span> <span class="m">1</span>
</code></pre></div></div>

<p>###Implement child providers</p>

<p>You might want to create child providers that inherit the <code class="language-plaintext highlighter-rouge">ini_setting</code> provider, for one or both of these purposes:</p>

<ul>
  <li>
    <p>Make a custom resource to manage an application that stores its settings in INI files, without recreating the code to manage the files themselves.</p>
  </li>
  <li>
    <p><a href="https://docs.puppetlabs.com/references/latest/type.html#resources-attribute-purge">Purge all unmanaged settings</a> from a managed INI file.</p>
  </li>
</ul>

<p>To implement child providers, first specify a custom type. Have it implement a namevar called <code class="language-plaintext highlighter-rouge">name</code> and a property called <code class="language-plaintext highlighter-rouge">value</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#my_module/lib/puppet/type/glance_api_config.rb</span>
<span class="no">Puppet</span><span class="o">::</span><span class="no">Type</span><span class="p">.</span><span class="nf">newtype</span><span class="p">(</span><span class="ss">:glance_api_config</span><span class="p">)</span> <span class="k">do</span>
  <span class="n">ensurable</span>
  <span class="n">newparam</span><span class="p">(</span><span class="ss">:name</span><span class="p">,</span> <span class="ss">:namevar</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">desc</span> <span class="s1">'Section/setting name to manage from glance-api.conf'</span>
    <span class="c1"># namevar should be of the form section/setting</span>
    <span class="n">newvalues</span><span class="p">(</span><span class="sr">/\S+\/\S+/</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">newproperty</span><span class="p">(</span><span class="ss">:value</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">desc</span> <span class="s1">'The value of the setting to define'</span>
    <span class="n">munge</span> <span class="k">do</span> <span class="o">|</span><span class="n">v</span><span class="o">|</span>
      <span class="n">v</span><span class="p">.</span><span class="nf">to_s</span><span class="p">.</span><span class="nf">strip</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Your type also needs a provider that uses the <code class="language-plaintext highlighter-rouge">ini_setting</code> provider as its parent:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># my_module/lib/puppet/provider/glance_api_config/ini_setting.rb</span>
<span class="no">Puppet</span><span class="o">::</span><span class="no">Type</span><span class="p">.</span><span class="nf">type</span><span class="p">(</span><span class="ss">:glance_api_config</span><span class="p">).</span><span class="nf">provide</span><span class="p">(</span>
  <span class="ss">:ini_setting</span><span class="p">,</span>
  <span class="c1"># set ini_setting as the parent provider</span>
  <span class="ss">:parent</span> <span class="o">=&gt;</span> <span class="no">Puppet</span><span class="o">::</span><span class="no">Type</span><span class="p">.</span><span class="nf">type</span><span class="p">(</span><span class="ss">:ini_setting</span><span class="p">).</span><span class="nf">provider</span><span class="p">(</span><span class="ss">:ruby</span><span class="p">)</span>
<span class="p">)</span> <span class="k">do</span>
  <span class="c1"># implement section as the first part of the namevar</span>
  <span class="k">def</span> <span class="nf">section</span>
    <span class="n">resource</span><span class="p">[</span><span class="ss">:name</span><span class="p">].</span><span class="nf">split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="mi">2</span><span class="p">).</span><span class="nf">first</span>
  <span class="k">end</span>
  <span class="k">def</span> <span class="nf">setting</span>
    <span class="c1"># implement setting as the second part of the namevar</span>
    <span class="n">resource</span><span class="p">[</span><span class="ss">:name</span><span class="p">].</span><span class="nf">split</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="mi">2</span><span class="p">).</span><span class="nf">last</span>
  <span class="k">end</span>
  <span class="c1"># hard code the file path (this allows purging)</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">file_path</span>
    <span class="s1">'/etc/glance/glance-api.conf'</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Now the settings in /etc/glance/glance-api.conf file can be managed as individual resources:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">glance_api_config</span> <span class="p">{</span> <span class="s1">'HEADER/important_config'</span><span class="p">:</span>
  <span class="py">value</span> <span class="p">=&gt;</span> <span class="s1">'secret_value'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If you’ve implemented self.file_path, you can have Puppet purge the file of all lines that aren’t implemented as Puppet resources:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">resources</span> <span class="p">{</span> <span class="s1">'glance_api_config'</span>
  <span class="py">purge</span> <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="manage-multiple-ini_settings">Manage multiple ini_settings</h3>

<p>To manage multiple ini_settings, use the <a href="#function-create_ini_settings"><code class="language-plaintext highlighter-rouge">create_ini_settings</code></a> function.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$defaults</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/tmp/foo.ini'</span> <span class="p">}</span>
<span class="nv">$example</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'section1'</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="s1">'setting1'</span> <span class="p">=&gt;</span> <span class="s1">'value1'</span> <span class="p">}</span> <span class="p">}</span>
<span class="nf">create_ini_settings</span><span class="p">(</span><span class="nv">$example</span><span class="p">,</span> <span class="nv">$defaults</span><span class="p">)</span>
</code></pre></div></div>

<p>results in:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ini_setting</span> <span class="p">{</span> <span class="s1">'[section1] setting1'</span><span class="p">:</span>
  <span class="py">ensure</span>  <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
  <span class="py">section</span> <span class="p">=&gt;</span> <span class="s1">'section1'</span><span class="p">,</span>
  <span class="py">setting</span> <span class="p">=&gt;</span> <span class="s1">'setting1'</span><span class="p">,</span>
  <span class="py">value</span>   <span class="p">=&gt;</span> <span class="s1">'value1'</span><span class="p">,</span>
  <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/tmp/foo.ini'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To include special parameters, the following code:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$defaults</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/tmp/foo.ini'</span> <span class="p">}</span>
<span class="nv">$example</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'section1'</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="s1">'setting1'</span>  <span class="p">=&gt;</span> <span class="s1">'value1'</span><span class="p">,</span>
    <span class="s1">'settings2'</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="s1">'ensure'</span> <span class="p">=&gt;</span> <span class="s1">'absent'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="nf">create_ini_settings</span><span class="p">(</span><span class="nv">$example</span><span class="p">,</span> <span class="nv">$defaults</span><span class="p">)</span>
</code></pre></div></div>

<p>results in:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ini_setting</span> <span class="p">{</span> <span class="s1">'[section1] setting1'</span><span class="p">:</span>
  <span class="py">ensure</span>  <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
  <span class="py">section</span> <span class="p">=&gt;</span> <span class="s1">'section1'</span><span class="p">,</span>
  <span class="py">setting</span> <span class="p">=&gt;</span> <span class="s1">'setting1'</span><span class="p">,</span>
  <span class="py">value</span>   <span class="p">=&gt;</span> <span class="s1">'value1'</span><span class="p">,</span>
  <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/tmp/foo.ini'</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">ini_setting</span> <span class="p">{</span> <span class="s1">'[section1] setting2'</span><span class="p">:</span>
  <span class="py">ensure</span>  <span class="p">=&gt;</span> <span class="n">absent</span><span class="p">,</span>
  <span class="py">section</span> <span class="p">=&gt;</span> <span class="s1">'section1'</span><span class="p">,</span>
  <span class="py">setting</span> <span class="p">=&gt;</span> <span class="s1">'setting2'</span><span class="p">,</span>
  <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/tmp/foo.ini'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="manage-multiple-ini_settings-with-hiera">Manage multiple ini_settings with Hiera</h4>

<p>This example requires Puppet 3.x/4.x, as it uses automatic retrieval of Hiera data for class parameters and <code class="language-plaintext highlighter-rouge">puppetlabs/stdlib</code>.</p>

<p>For the profile <code class="language-plaintext highlighter-rouge">example</code>:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">profile::example</span> <span class="p">(</span>
  <span class="nv">$settings</span><span class="p">,</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="nf">validate_hash</span><span class="p">(</span><span class="nv">$settings</span><span class="p">)</span>
  <span class="nv">$defaults</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/tmp/foo.ini'</span> <span class="p">}</span>
  <span class="nf">create_ini_settings</span><span class="p">(</span><span class="nv">$settings</span><span class="p">,</span> <span class="nv">$defaults</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Provide this in your Hiera data:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">profile::example::settings</span><span class="p">:</span>
  <span class="n">section1</span><span class="p">:</span>
    <span class="n">setting1</span><span class="p">:</span> <span class="n">value1</span>
    <span class="n">setting2</span><span class="p">:</span> <span class="n">value2</span>
    <span class="n">setting3</span><span class="p">:</span>
      <span class="n">ensure</span><span class="p">:</span> <span class="n">absent</span>
</code></pre></div></div>

<p>Results in:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ini_setting</span> <span class="p">{</span> <span class="s1">'[section1] setting1'</span><span class="p">:</span>
  <span class="py">ensure</span>  <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
  <span class="py">section</span> <span class="p">=&gt;</span> <span class="s1">'section1'</span><span class="p">,</span>
  <span class="py">setting</span> <span class="p">=&gt;</span> <span class="s1">'setting1'</span><span class="p">,</span>
  <span class="py">value</span>   <span class="p">=&gt;</span> <span class="s1">'value1'</span><span class="p">,</span>
  <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/tmp/foo.ini'</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">ini_setting</span> <span class="p">{</span> <span class="s1">'[section1] setting2'</span><span class="p">:</span>
  <span class="py">ensure</span>  <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
  <span class="py">section</span> <span class="p">=&gt;</span> <span class="s1">'section1'</span><span class="p">,</span>
  <span class="py">setting</span> <span class="p">=&gt;</span> <span class="s1">'setting2'</span><span class="p">,</span>
  <span class="py">value</span>   <span class="p">=&gt;</span> <span class="s1">'value2'</span><span class="p">,</span>
  <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/tmp/foo.ini'</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">ini_setting</span> <span class="p">{</span> <span class="s1">'[section1] setting3'</span><span class="p">:</span>
  <span class="py">ensure</span>  <span class="p">=&gt;</span> <span class="n">absent</span><span class="p">,</span>
  <span class="py">section</span> <span class="p">=&gt;</span> <span class="s1">'section1'</span><span class="p">,</span>
  <span class="py">setting</span> <span class="p">=&gt;</span> <span class="s1">'setting3'</span><span class="p">,</span>
  <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/tmp/foo.ini'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>##Reference</p>

<p>###Public Types</p>

<ul>
  <li>
    <p><a href="#type-ini_setting"><code class="language-plaintext highlighter-rouge">ini_setting</code></a></p>
  </li>
  <li>
    <p><a href="#type-ini_subsetting"><code class="language-plaintext highlighter-rouge">ini_subsetting</code></a></p>
  </li>
</ul>

<p>###Public Functions</p>

<ul>
  <li><a href="#function-create_ini_settings"><code class="language-plaintext highlighter-rouge">create_ini_settings</code></a></li>
</ul>

<h3 id="type-ini_setting">Type: ini_setting</h3>

<p>Manages a setting within an INI file.</p>

<h4 id="parameters">Parameters</h4>

<h5 id="ensure"><code class="language-plaintext highlighter-rouge">ensure</code></h5>

<p>Determines whether the specified setting should exist. Valid options: ‘present’ and ‘absent’. Default value: ‘present’.</p>

<h5 id="key_val_separator"><code class="language-plaintext highlighter-rouge">key_val_separator</code></h5>

<p><em>Optional.</em> Specifies a string to use between each setting name and value (e.g., to determine whether the separator includes whitespace). Valid options: a string. Default value: ‘ = ‘.</p>

<h5 id="name"><code class="language-plaintext highlighter-rouge">name</code></h5>

<p><em>Optional.</em> Specifies an arbitrary name to identify the resource. Valid options: a string. Default value: the title of your declared resource.</p>

<h5 id="path"><code class="language-plaintext highlighter-rouge">path</code></h5>

<p><em>Required.</em> Specifies an INI file containing the setting to manage. Valid options: a string containing an absolute path.</p>

<h5 id="section"><code class="language-plaintext highlighter-rouge">section</code></h5>

<p><em>Optional.</em> Designates a section of the specified INI file containing the setting to manage. To manage a global setting (at the beginning of the file, before any named sections) enter “”. Defaults to “”. Valid options: a string.</p>

<h5 id="setting"><code class="language-plaintext highlighter-rouge">setting</code></h5>

<p><em>Required.</em> Designates a setting to manage within the specified INI file and section. Valid options: a string.</p>

<h5 id="show_diff"><code class="language-plaintext highlighter-rouge">show_diff</code></h5>

<p><em>Optional.</em> Prevents outputting actual values to the logfile. Useful for handling of passwords and other sensitive information. Possible values are:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">true</code>: This allows all values to be passed to logfiles. (default)</li>
  <li><code class="language-plaintext highlighter-rouge">false</code>: The values in the logfiles will be replaced with <code class="language-plaintext highlighter-rouge">[redacted sensitive information]</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">md5</code>: The values in the logfiles will be replaced with their md5 hash.</li>
</ul>

<p>Global show_diff configuraton takes priority over this one -
<a href="[https://docs.puppetlabs.com/references/latest/configuration.html#showdiff].">https://docs.puppetlabs.com/references/latest/configuration.html#showdiff</a>. Default value: ‘true’.</p>

<h5 id="value"><code class="language-plaintext highlighter-rouge">value</code></h5>

<p><em>Optional.</em> Supplies a value for the specified setting. Valid options: a string. Default value: undefined.</p>

<h5 id="section_prefix"><code class="language-plaintext highlighter-rouge">section_prefix</code></h5>

<p><em>Optional.</em>  Designates the string that will appear before the section’s name.  Default value: “[”</p>

<h5 id="section_suffix"><code class="language-plaintext highlighter-rouge">section_suffix</code></h5>

<p><em>Optional.</em>  Designates the string that will appear after the section’s name.  Default value: “]”.</p>

<h5 id="refreshonly"><code class="language-plaintext highlighter-rouge">refreshonly</code></h5>

<p><em>Optional.</em>  A boolean to indicate whether or not the value associated with the setting should be updated if this resource is only part of a refresh event.  Default value: <strong>false</strong>.</p>

<p>For example, if we want a timestamp associated with the last time a setting’s value was updated, we could do something like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ini_setting { 'foosetting':
  ensure  =&gt; present,
  path    =&gt; '/tmp/file.ini',
  section =&gt; 'foo',
  setting =&gt; 'foosetting',
  value   =&gt; 'bar',
  notify  =&gt; Ini_Setting['foosetting_timestamp'],
}

$now = strftime('%Y-%m-%d %H:%M:%S')
ini_setting {'foosetting_timestamp':
  ensure      =&gt; present,
  path        =&gt; '/tmp/file.ini',
  section     =&gt; 'foo',
  setting     =&gt; 'foosetting_timestamp',
  value       =&gt; $now,
  refreshonly =&gt; true,
}
</code></pre></div></div>

<p><strong>NOTE:</strong> This type finds all sections in the file by looking for lines like <code class="language-plaintext highlighter-rouge">${section_prefix}${title}${section_suffix}</code>.</p>

<h3 id="type-ini_subsetting">Type: ini_subsetting</h3>

<p>Manages multiple values within the same INI setting.</p>

<h4 id="parameters-1">Parameters</h4>

<h5 id="ensure-1"><code class="language-plaintext highlighter-rouge">ensure</code></h5>

<p>Specifies whether the subsetting should be present. Valid options: ‘present’ and ‘absent’. Default value: ‘present’.</p>

<h5 id="key_val_separator-1"><code class="language-plaintext highlighter-rouge">key_val_separator</code></h5>

<p><em>Optional.</em> Specifies a string to use between setting name and value (e.g., to determine whether the separator includes whitespace). Valid options: a string. Default value: ‘ = ‘.</p>

<h5 id="path-1"><code class="language-plaintext highlighter-rouge">path</code></h5>

<p><em>Required.</em> Specifies an INI file containing the subsetting to manage. Valid options: a string containing an absolute path.</p>

<h5 id="quote_char"><code class="language-plaintext highlighter-rouge">quote_char</code></h5>

<p><em>Optional.</em> The character used to quote the entire value of the setting. Valid values are ‘’, ‘”’, and “’”. Defaults to ‘’. Valid options: ‘’, ‘”’ and “’”. Default value: ‘’.</p>

<h5 id="section-1"><code class="language-plaintext highlighter-rouge">section</code></h5>

<p><em>Optional.</em> Designates a section of the specified INI file containing the setting to manage. To manage a global setting (at the beginning of the file, before any named sections) enter “”. Defaults to “”. Valid options: a string.</p>

<h5 id="setting-1"><code class="language-plaintext highlighter-rouge">setting</code></h5>

<p><em>Required.</em> Designates a setting within the specified section containing the subsetting to manage. Valid options: a string.</p>

<h5 id="show_diff-1"><code class="language-plaintext highlighter-rouge">show_diff</code></h5>

<p><em>Optional.</em> Prevents outputting actual values to the logfile. Useful for handling of passwords and other sensitive information. Possible values are:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">true</code>: This allows all values to be passed to logfiles. (default)</li>
  <li><code class="language-plaintext highlighter-rouge">false</code>: The values in the logfiles will be replaced with <code class="language-plaintext highlighter-rouge">[redacted sensitive information]</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">md5</code>: The values in the logfiles will be replaced with their md5 hash.</li>
</ul>

<p>Global show_diff configuraton takes priority over this one -
<a href="[https://docs.puppetlabs.com/references/latest/configuration.html#showdiff].">https://docs.puppetlabs.com/references/latest/configuration.html#showdiff</a>. Default value: ‘true’.</p>

<h5 id="subsetting"><code class="language-plaintext highlighter-rouge">subsetting</code></h5>

<p><em>Required.</em> Designates a subsetting to manage within the specified setting. Valid options: a string.</p>

<h5 id="subsetting_separator"><code class="language-plaintext highlighter-rouge">subsetting_separator</code></h5>

<p><em>Optional.</em> Specifies a string to use between subsettings. Valid options: a string. Default value: “ “.</p>

<h5 id="subsetting_key_val_separator"><code class="language-plaintext highlighter-rouge">subsetting_key_val_separator</code></h5>

<p><em>Optional.</em> Specifies a string to use between subsetting name and value (if there is a separator between the subsetting name and its value). Valid options: a string. Default value: empty string.</p>

<h5 id="use_exact_match"><code class="language-plaintext highlighter-rouge">use_exact_match</code></h5>

<p><em>Optional.</em> Whether to use partial or exact matching for subsetting. Should be set to true if the subsettings do not have values. Valid options: true, false. Default value: false.</p>

<h5 id="value-1"><code class="language-plaintext highlighter-rouge">value</code></h5>

<p><em>Optional.</em> Supplies a value for the specified subsetting. Valid options: a string. Default value: undefined.</p>

<h5 id="insert_type"><code class="language-plaintext highlighter-rouge">insert_type</code></h5>

<p><em>Optional.</em> Selects where a new subsetting item should be inserted.</p>

<ul>
  <li><em>start</em>  - insert at the beginning of the line.</li>
  <li><em>end</em>    - insert at the end of the line (default).</li>
  <li><em>before</em> - insert before the specified element if possible.</li>
  <li><em>after</em>  - insert after the specified element if possible.</li>
  <li><em>index</em>  - insert at the specified index number.</li>
</ul>

<h5 id="insert_value"><code class="language-plaintext highlighter-rouge">insert_value</code></h5>

<p><em>Optional.</em> The value for the insert type if the value if required.</p>

<h3 id="function-create_ini_settings">Function: create_ini_settings</h3>

<p>Manages multiple <code class="language-plaintext highlighter-rouge">ini_setting</code> resources from a hash. Note that this cannot be used with ini_subsettings.</p>

<p><code class="language-plaintext highlighter-rouge">create_ini_settings($settings, $defaults)</code></p>

<h4 id="arguments">Arguments</h4>

<h5 id="first-argument-settings">First argument: <code class="language-plaintext highlighter-rouge">settings</code></h5>

<p><em>Required.</em> Specify a hash representing the <code class="language-plaintext highlighter-rouge">ini_setting</code> resources you want to create.</p>

<h5 id="second-argument-defaults">Second argument: <code class="language-plaintext highlighter-rouge">defaults</code></h5>

<p><em>Optional.</em> Accepts a hash to be used as the values for any attributes not defined in the first argument.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$example</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'section1'</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="s1">'setting1'</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="s1">'value'</span> <span class="p">=&gt;</span> <span class="s1">'value1'</span><span class="p">,</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/tmp/foo.ini'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Default value: ‘{}’.</p>

<p>##Limitations</p>

<p>This module has been tested on <a href="https://forge.puppetlabs.com/supported#compat-matrix">all PE-supported platforms</a>, and no issues have been identified. Additionally, it is tested (but not supported) on Windows 7, Mac OS X 10.9, and Solaris 12.</p>

<p>Due to (PUP-4709) the create_ini_settings function will cause errors when attempting to create multiple ini_settings in one go when using Puppet 4.0.x or 4.1.x. If needed, the temporary fix for this can be found here: https://github.com/puppetlabs/puppetlabs-inifile/pull/196.</p>

<p>##Development</p>

<p>Puppet Labs modules on the Puppet Forge are open projects, and community contributions are essential for keeping them great. We can’t access the huge number of platforms and myriad of hardware, software, and deployment configurations that Puppet is intended to serve.</p>

<p>We want to keep it as easy as possible to contribute changes so that our modules work in your environment. There are a few guidelines that we need contributors to follow so that we can have a chance of keeping on top of things.</p>

<p>For more information, see our <a href="https://docs.puppetlabs.com/forge/contributing.html">module contribution guide.</a></p>

<p>###Contributors</p>

<p>To see who’s already involved, see the <a href="https://github.com/puppetlabs/puppetlabs-inifile/graphs/contributors">list of contributors.</a></p>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/RussianPenguin/russianpenguin.github.io">russianpenguin.github.io</a> is maintained by <a href="https://github.com/RussianPenguin">RussianPenguin</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(69889387, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/69889387" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  </body>
</html>
