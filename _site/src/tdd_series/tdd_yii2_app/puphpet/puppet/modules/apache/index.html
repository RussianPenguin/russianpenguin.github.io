<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="yandex-verification" content="551ffc5ae1433df6" />
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>apache | Чтобы не забыть</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="apache" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<meta property="og:description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<link rel="canonical" href="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/apache/" />
<meta property="og:url" content="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/apache/" />
<meta property="og:site_name" content="Чтобы не забыть" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="apache" />
<script type="application/ld+json">
{"url":"http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/apache/","description":"Записная книжка рассеянного [в пространстве и времени] программиста","headline":"apache","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=d85e6f1917405784d52928d499ab3e51b4bffcc9">
  </head>
  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name">apache</h1>
      <h2 class="project-tagline">Записная книжка рассеянного [в пространстве и времени] программиста</h2>
      
        <a href="https://github.com/RussianPenguin/russianpenguin.github.io" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="apache">apache</h1>

<h4 id="table-of-contents">Table of Contents</h4>

<ol>
  <li><a href="#module-description">Module description - What is the apache module, and what does it do?</a></li>
  <li><a href="#setup">Setup - The basics of getting started with apache</a>
    <ul>
      <li><a href="#beginning-with-apache">Beginning with Apache - Installation</a></li>
    </ul>
  </li>
  <li><a href="#usage">Usage - The classes and defined types available for configuration</a>
    <ul>
      <li><a href="#configuring-virtual-hosts">Configuring virtual hosts - Examples to help get started</a></li>
      <li><a href="#configuring-fastcgi-servers-to-handle-php-files">Configuring FastCGI servers to handle PHP files</a></li>
      <li><a href="#load-balancing-examples">Load balancing with exported and non-exported resources</a></li>
    </ul>
  </li>
  <li><a href="#reference">Reference - An under-the-hood peek at what the module is doing and how</a>
    <ul>
      <li><a href="#public-classes">Public classes</a></li>
      <li><a href="#private-classes">Private classes</a></li>
      <li><a href="#public-defined-types">Public defined types</a></li>
      <li><a href="#private-defined-types">Private defined types</a></li>
      <li><a href="#templates">Templates</a></li>
    </ul>
  </li>
  <li><a href="#limitations">Limitations - OS compatibility, etc.</a></li>
  <li><a href="#development">Development - Guide for contributing to the module</a>
    <ul>
      <li><a href="#contributing">Contributing to the apache module</a></li>
      <li><a href="#running-tests">Running tests - A quick guide</a></li>
    </ul>
  </li>
</ol>

<h2 id="module-description">Module description</h2>

<p><a href="https://httpd.apache.org">Apache HTTP Server</a> (also called Apache HTTPD, or simply Apache) is a widely used web server. This <a href="https://docs.puppetlabs.com/puppet/latest/reference/modules_fundamentals.html">Puppet module</a> simplifies the task of creating configurations to manage Apache servers in your infrastructure. It can configure and manage a range of virtual host setups and provides a streamlined way to install and configure <a href="https://httpd.apache.org/docs/current/mod/">Apache modules</a>.</p>

<h2 id="setup">Setup</h2>

<p><strong>What the apache Puppet module affects:</strong></p>

<ul>
  <li>Configuration files and directories (created and written to)
    <ul>
      <li><strong>WARNING</strong>: Configurations <em>not</em> managed by Puppet will be purged.</li>
    </ul>
  </li>
  <li>Package/service/configuration files for Apache</li>
  <li>Apache modules</li>
  <li>Virtual hosts</li>
  <li>Listened-to ports</li>
  <li><code class="language-plaintext highlighter-rouge">/etc/make.conf</code> on FreeBSD and Gentoo</li>
</ul>

<p>On Gentoo, this module depends on the <a href="https://github.com/gentoo/puppet-portage"><code class="language-plaintext highlighter-rouge">gentoo/puppet-portage</code></a> Puppet module. Note that while several options apply or enable certain features and settings for Gentoo, it is not a <a href="https://forge.puppetlabs.com/supported#puppet-supported-modules-compatibility-matrix">supported operating system</a> for this module.</p>

<blockquote>
  <p><strong>Note</strong>: This module modifies Apache configuration files and directories and purges any configuration not managed by Puppet. Apache configuration should be managed by Puppet, as unmanaged configuration files can cause unexpected failures.</p>
</blockquote>

<p>To temporarily disable full Puppet management, set the <a href="#purge_configs"><code class="language-plaintext highlighter-rouge">purge_configs</code></a> parameter in the <a href="#class-apache"><code class="language-plaintext highlighter-rouge">apache</code></a> class declaration to false. We recommend using this only as a temporary means of saving and relocating customized configurations.</p>

<h3 id="beginning-with-apache">Beginning with Apache</h3>

<p>To have Puppet install Apache with the default parameters, declare the <a href="#class-apache"><code class="language-plaintext highlighter-rouge">apache</code></a> class:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'apache'</span><span class="p">:</span> <span class="p">}</span>
</code></pre></div></div>

<p>The Puppet module applies a default configuration based on your operating system; Debian, Red Hat, FreeBSD, and Gentoo systems each have unique default configurations. These defaults work in testing environments but are not suggested for production, and Puppet recommends customizing the class’s parameters to suit your site. Use the <a href="#reference">Reference</a> section to find information about the class’s parameters and their default values.</p>

<p>You can customize parameters when declaring the <code class="language-plaintext highlighter-rouge">apache</code> class. For instance, this declaration installs Apache without the apache module’s <a href="#configuring-virtual-hosts">default virtual host configuration</a>, allowing you to customize all Apache virtual hosts:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'apache'</span><span class="p">:</span>
  <span class="py">default_vhost</span> <span class="p">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: When <code class="language-plaintext highlighter-rouge">default_vhost</code> is set to <code class="language-plaintext highlighter-rouge">false</code> you have to add at least one <code class="language-plaintext highlighter-rouge">apache::vhost</code> resource or Apache will not start.</p>
</blockquote>

<h2 id="usage">Usage</h2>

<h3 id="configuring-virtual-hosts">Configuring virtual hosts</h3>

<p>The default <a href="#class-apache"><code class="language-plaintext highlighter-rouge">apache</code></a> class sets up a virtual host on port 80, listening on all interfaces and serving the <a href="#docroot"><code class="language-plaintext highlighter-rouge">docroot</code></a> parameter’s default directory of <code class="language-plaintext highlighter-rouge">/var/www</code>.</p>

<blockquote>
  <p><strong>Note</strong>: See the <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined type’s reference for a list of all virtual host parameters.</p>
</blockquote>

<p>To configure basic <a href="https://httpd.apache.org/docs/current/vhosts/name-based.html">name-based virtual hosts</a>, specify the <a href="#port"><code class="language-plaintext highlighter-rouge">port</code></a> and <a href="#docroot"><code class="language-plaintext highlighter-rouge">docroot</code></a> parameters in the <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined type:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'vhost.example.com'</span><span class="p">:</span>
  <span class="py">port</span>    <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/vhost'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: Apache processes virtual hosts in alphabetical order, and server administrators can prioritize Apache’s virtual host processing by prefixing a virtual host’s configuration file name with a number. The <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined type applies a default <a href="#defined-types-apachevhost"><code class="language-plaintext highlighter-rouge">priority</code></a> of 15, which Puppet interprets by prefixing the virtual host’s file name with <code class="language-plaintext highlighter-rouge">15-</code>. This all means that if multiple sites have the same priority, or if you disable priority numbers by setting the <code class="language-plaintext highlighter-rouge">priority</code> parameter’s value to false, Apache still processes virtual hosts in alphabetical order.</p>
</blockquote>

<p>To configure user and group ownership for <code class="language-plaintext highlighter-rouge">docroot</code>, use the <a href="#docroot_owner"><code class="language-plaintext highlighter-rouge">docroot_owner</code></a> and <a href="#docroot_group"><code class="language-plaintext highlighter-rouge">docroot_group</code></a> parameters:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'user.example.com'</span><span class="p">:</span>
  <span class="py">port</span>          <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>       <span class="p">=&gt;</span> <span class="s1">'/var/www/user'</span><span class="p">,</span>
  <span class="py">docroot_owner</span> <span class="p">=&gt;</span> <span class="s1">'www-data'</span><span class="p">,</span>
  <span class="py">docroot_group</span> <span class="p">=&gt;</span> <span class="s1">'www-data'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="configuring-virtual-hosts-with-ssl">Configuring virtual hosts with SSL</h4>

<p>To configure a virtual host to use <a href="https://httpd.apache.org/docs/current/ssl/index.html">SSL encryption</a> and default SSL certificates, set the <a href="#ssl"><code class="language-plaintext highlighter-rouge">ssl</code></a> parameter. You must also specify the <a href="#port"><code class="language-plaintext highlighter-rouge">port</code></a> parameter, typically with a value of ‘443’, to accommodate HTTPS requests:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'ssl.example.com'</span><span class="p">:</span>
  <span class="py">port</span>    <span class="p">=&gt;</span> <span class="s1">'443'</span><span class="p">,</span>
  <span class="py">docroot</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/ssl'</span><span class="p">,</span>
  <span class="py">ssl</span>     <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To configure a virtual host to use SSL and specific SSL certificates, use the paths to the certificate and key in the <a href="#ssl_cert"><code class="language-plaintext highlighter-rouge">ssl_cert</code></a> and <a href="#ssl_key"><code class="language-plaintext highlighter-rouge">ssl_key</code></a> parameters, respectively:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'cert.example.com'</span><span class="p">:</span>
  <span class="py">port</span>     <span class="p">=&gt;</span> <span class="s1">'443'</span><span class="p">,</span>
  <span class="py">docroot</span>  <span class="p">=&gt;</span> <span class="s1">'/var/www/cert'</span><span class="p">,</span>
  <span class="py">ssl</span>      <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="py">ssl_cert</span> <span class="p">=&gt;</span> <span class="s1">'/etc/ssl/fourth.example.com.cert'</span><span class="p">,</span>
  <span class="py">ssl_key</span>  <span class="p">=&gt;</span> <span class="s1">'/etc/ssl/fourth.example.com.key'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To configure a mix of SSL and unencrypted virtual hosts at the same domain, declare them with separate <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined types:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># The non-ssl virtual host
</span><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'mix.example.com non-ssl'</span><span class="p">:</span>
  <span class="py">servername</span> <span class="p">=&gt;</span> <span class="s1">'mix.example.com'</span><span class="p">,</span>
  <span class="py">port</span>       <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>    <span class="p">=&gt;</span> <span class="s1">'/var/www/mix'</span><span class="p">,</span>
<span class="p">}</span>

<span class="c"># The SSL virtual host at the same domain
</span><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'mix.example.com ssl'</span><span class="p">:</span>
  <span class="py">servername</span> <span class="p">=&gt;</span> <span class="s1">'mix.example.com'</span><span class="p">,</span>
  <span class="py">port</span>       <span class="p">=&gt;</span> <span class="s1">'443'</span><span class="p">,</span>
  <span class="py">docroot</span>    <span class="p">=&gt;</span> <span class="s1">'/var/www/mix'</span><span class="p">,</span>
  <span class="py">ssl</span>        <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To configure a virtual host to redirect unencrypted connections to SSL, declare them with separate <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined types and redirect unencrypted requests to the virtual host with SSL enabled:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'redirect.example.com non-ssl'</span><span class="p">:</span>
  <span class="py">servername</span>      <span class="p">=&gt;</span> <span class="s1">'redirect.example.com'</span><span class="p">,</span>
  <span class="py">port</span>            <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>         <span class="p">=&gt;</span> <span class="s1">'/var/www/redirect'</span><span class="p">,</span>
  <span class="py">redirect_status</span> <span class="p">=&gt;</span> <span class="s1">'permanent'</span><span class="p">,</span>
  <span class="py">redirect_dest</span>   <span class="p">=&gt;</span> <span class="s1">'https://redirect.example.com/'</span>
<span class="p">}</span>

<span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'redirect.example.com ssl'</span><span class="p">:</span>
  <span class="py">servername</span> <span class="p">=&gt;</span> <span class="s1">'redirect.example.com'</span><span class="p">,</span>
  <span class="py">port</span>       <span class="p">=&gt;</span> <span class="s1">'443'</span><span class="p">,</span>
  <span class="py">docroot</span>    <span class="p">=&gt;</span> <span class="s1">'/var/www/redirect'</span><span class="p">,</span>
  <span class="py">ssl</span>        <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="configuring-virtual-host-port-and-address-bindings">Configuring virtual host port and address bindings</h4>

<p>Virtual hosts listen on all IP addresses (‘*’) by default. To configure the virtual host to listen on a specific IP address, use the <a href="#ip"><code class="language-plaintext highlighter-rouge">ip</code></a> parameter:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'ip.example.com'</span><span class="p">:</span>
  <span class="py">ip</span>      <span class="p">=&gt;</span> <span class="s1">'127.0.0.1'</span><span class="p">,</span>
  <span class="py">port</span>    <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/ip'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>It is also possible to configure more than one IP address per virtual host by using an array of IP addresses for the <a href="#ip"><code class="language-plaintext highlighter-rouge">ip</code></a> parameter:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'ip.example.com'</span><span class="p">:</span>
  <span class="py">ip</span>      <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'127.0.0.1'</span><span class="p">,</span><span class="s1">'169.254.1.1'</span><span class="p">],</span>
  <span class="py">port</span>    <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/ip'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To configure a virtual host with <a href="https://httpd.apache.org/docs/current/urlmapping.html">aliased servers</a>, refer to the aliases using the <a href="#serveraliases"><code class="language-plaintext highlighter-rouge">serveraliases</code></a> parameter:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'aliases.example.com'</span><span class="p">:</span>
  <span class="py">serveraliases</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="s1">'aliases.example.org'</span><span class="p">,</span>
    <span class="s1">'aliases.example.net'</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="py">port</span>          <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>       <span class="p">=&gt;</span> <span class="s1">'/var/www/aliases'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To set up a virtual host with a wildcard alias for the subdomain mapped to a same-named directory, such as ‘http://example.com.loc’ mapped to <code class="language-plaintext highlighter-rouge">/var/www/example.com</code>, define the wildcard alias using the <a href="#serveraliases"><code class="language-plaintext highlighter-rouge">serveraliases</code></a> parameter and the document root with the <a href="#virtual_docroot"><code class="language-plaintext highlighter-rouge">virtual_docroot</code></a> parameter:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'subdomain.loc'</span><span class="p">:</span>
  <span class="py">vhost_name</span>      <span class="p">=&gt;</span> <span class="s1">'*'</span><span class="p">,</span>
  <span class="py">port</span>            <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">virtual_docroot</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/%-2+'</span><span class="p">,</span>
  <span class="py">docroot</span>         <span class="p">=&gt;</span> <span class="s1">'/var/www'</span><span class="p">,</span>
  <span class="py">serveraliases</span>   <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'*.loc'</span><span class="p">,],</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To configure a virtual host with <a href="https://httpd.apache.org/docs/current/filter.html">filter rules</a>, pass the filter directives as an <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> using the <a href="#filters"><code class="language-plaintext highlighter-rouge">filters</code></a> parameter:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'subdomain.loc'</span><span class="p">:</span>
  <span class="py">port</span>    <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">filters</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="s1">'FilterDeclare  COMPRESS'</span><span class="p">,</span>
    <span class="s1">'FilterProvider COMPRESS DEFLATE resp=Content-Type $text/html'</span><span class="p">,</span>
    <span class="s1">'FilterChain    COMPRESS'</span><span class="p">,</span>
    <span class="s1">'FilterProtocol COMPRESS DEFLATE change=yes;byteranges=no'</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="py">docroot</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/html'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="configuring-virtual-hosts-for-apps-and-processors">Configuring virtual hosts for apps and processors</h4>

<p>To set up a virtual host with <a href="http://www.suphp.org/Home.html">suPHP</a>, use the <a href="#suphp_engine"><code class="language-plaintext highlighter-rouge">suphp_engine</code></a> parameter to enable the suPHP engine, <a href="#suphp_addhandler"><code class="language-plaintext highlighter-rouge">suphp_addhandler</code></a> parameter to define a MIME type, <a href="#suphp_configpath"><code class="language-plaintext highlighter-rouge">suphp_configpath</code></a> to set which path suPHP passes to the PHP interpreter, and the <a href="#directory"><code class="language-plaintext highlighter-rouge">directory</code></a> parameter to configure Directory, File, and Location directive blocks:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'suphp.example.com'</span><span class="p">:</span>
  <span class="py">port</span>             <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>          <span class="p">=&gt;</span> <span class="s1">'/home/appuser/myphpapp'</span><span class="p">,</span>
  <span class="py">suphp_addhandler</span> <span class="p">=&gt;</span> <span class="s1">'x-httpd-php'</span><span class="p">,</span>
  <span class="py">suphp_engine</span>     <span class="p">=&gt;</span> <span class="s1">'on'</span><span class="p">,</span>
  <span class="py">suphp_configpath</span> <span class="p">=&gt;</span> <span class="s1">'/etc/php5/apache2'</span><span class="p">,</span>
  <span class="py">directories</span>      <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s1">'path'</span>  <span class="p">=&gt;</span> <span class="s1">'/home/appuser/myphpapp'</span><span class="p">,</span>
      <span class="s1">'suphp'</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="py">user</span>  <span class="p">=&gt;</span> <span class="s1">'myappuser'</span><span class="p">,</span>
        <span class="py">group</span> <span class="p">=&gt;</span> <span class="s1">'myappgroup'</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can use a set of parameters to configure a virtual host to use the <a href="https://www.python.org/dev/peps/pep-3333/#abstract">Web Server Gateway Interface</a> (WSGI) for <a href="https://www.python.org/">Python</a> applications:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'wsgi.example.com'</span><span class="p">:</span>
  <span class="py">port</span>                        <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>                     <span class="p">=&gt;</span> <span class="s1">'/var/www/pythonapp'</span><span class="p">,</span>
  <span class="py">wsgi_application_group</span>      <span class="p">=&gt;</span> <span class="s1">'%{GLOBAL}'</span><span class="p">,</span>
  <span class="py">wsgi_daemon_process</span>         <span class="p">=&gt;</span> <span class="s1">'wsgi'</span><span class="p">,</span>
  <span class="py">wsgi_daemon_process_options</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="py">processes</span>    <span class="p">=&gt;</span> <span class="s1">'2'</span><span class="p">,</span>
    <span class="py">threads</span>      <span class="p">=&gt;</span> <span class="s1">'15'</span><span class="p">,</span>
    <span class="n">display</span><span class="o">-</span><span class="py">name</span> <span class="p">=&gt;</span> <span class="s1">'%{GROUP}'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="py">wsgi_import_script</span>          <span class="p">=&gt;</span> <span class="s1">'/var/www/demo.wsgi'</span><span class="p">,</span>
  <span class="py">wsgi_import_script_options</span>  <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="n">process</span><span class="o">-</span><span class="py">group</span>     <span class="p">=&gt;</span> <span class="s1">'wsgi'</span><span class="p">,</span>
    <span class="n">application</span><span class="o">-</span><span class="py">group</span> <span class="p">=&gt;</span> <span class="s1">'%{GLOBAL}'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="py">wsgi_process_group</span>          <span class="p">=&gt;</span> <span class="s1">'wsgi'</span><span class="p">,</span>
  <span class="py">wsgi_script_aliases</span>         <span class="p">=&gt;</span> <span class="p">{</span> <span class="s1">'/'</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/demo.wsgi'</span> <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Starting in Apache 2.2.16, Apache supports <a href="https://httpd.apache.org/docs/current/mod/mod_dir.html#fallbackresource">FallbackResource</a>, a simple replacement for common RewriteRules. You can set a FallbackResource using the <a href="#fallbackresource"><code class="language-plaintext highlighter-rouge">fallbackresource</code></a> parameter:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'wordpress.example.com'</span><span class="p">:</span>
  <span class="py">port</span>             <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>          <span class="p">=&gt;</span> <span class="s1">'/var/www/wordpress'</span><span class="p">,</span>
  <span class="py">fallbackresource</span> <span class="p">=&gt;</span> <span class="s1">'/index.php'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: The <code class="language-plaintext highlighter-rouge">fallbackresource</code> parameter only supports the ‘disabled’ value since Apache 2.2.24.</p>
</blockquote>

<p>To configure a virtual host with a designated directory for <a href="https://httpd.apache.org/docs/current/howto/cgi.html">Common Gateway Interface</a> (CGI) files, use the <a href="#scriptalias"><code class="language-plaintext highlighter-rouge">scriptalias</code></a> parameter to define the <code class="language-plaintext highlighter-rouge">cgi-bin</code> path:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'cgi.example.com'</span><span class="p">:</span>
  <span class="py">port</span>        <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/var/www/cgi'</span><span class="p">,</span>
  <span class="py">scriptalias</span> <span class="p">=&gt;</span> <span class="s1">'/usr/lib/cgi-bin'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To configure a virtual host for <a href="http://rack.github.io/">Rack</a>, use the <a href="#rack_base_uris"><code class="language-plaintext highlighter-rouge">rack_base_uris</code></a> parameter:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'rack.example.com'</span><span class="p">:</span>
  <span class="py">port</span>           <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>        <span class="p">=&gt;</span> <span class="s1">'/var/www/rack'</span><span class="p">,</span>
  <span class="py">rack_base_uris</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'/rackapp1'</span><span class="p">,</span> <span class="s1">'/rackapp2'</span><span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="configuring-ip-based-virtual-hosts">Configuring IP-based virtual hosts</h4>

<p>You can configure <a href="https://httpd.apache.org/docs/current/vhosts/ip-based.html">IP-based virtual hosts</a> to listen on any port and have them respond to requests on specific IP addresses. In this example, we set the server to listen on ports 80 and 81 because the example virtual hosts are <em>not</em> declared with a <a href="#port"><code class="language-plaintext highlighter-rouge">port</code></a> parameter:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::listen</span> <span class="p">{</span> <span class="s1">'80'</span><span class="p">:</span> <span class="p">}</span>

<span class="n">apache::listen</span> <span class="p">{</span> <span class="s1">'81'</span><span class="p">:</span> <span class="p">}</span>
</code></pre></div></div>

<p>Then we configure the IP-based virtual hosts with the <a href="#ip_based"><code class="language-plaintext highlighter-rouge">ip_based</code></a> parameter:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'first.example.com'</span><span class="p">:</span>
  <span class="py">ip</span>       <span class="p">=&gt;</span> <span class="s1">'10.0.0.10'</span><span class="p">,</span>
  <span class="py">docroot</span>  <span class="p">=&gt;</span> <span class="s1">'/var/www/first'</span><span class="p">,</span>
  <span class="py">ip_based</span> <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'second.example.com'</span><span class="p">:</span>
  <span class="py">ip</span>       <span class="p">=&gt;</span> <span class="s1">'10.0.0.11'</span><span class="p">,</span>
  <span class="py">docroot</span>  <span class="p">=&gt;</span> <span class="s1">'/var/www/second'</span><span class="p">,</span>
  <span class="py">ip_based</span> <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can also configure a mix of IP- and <a href="https://httpd.apache.org/docs/current/vhosts/name-based.html">name-based virtual hosts</a>, and in any combination of <a href="https://httpd.apache.org/docs/current/ssl/index.html">SSL</a> and unencrypted configurations. First, we add two IP-based virtual hosts on an IP address (in this example, 10.0.0.10). One uses SSL and the other is unencrypted:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'The first IP-based virtual host, non-ssl'</span><span class="p">:</span>
  <span class="py">servername</span> <span class="p">=&gt;</span> <span class="s1">'first.example.com'</span><span class="p">,</span>
  <span class="py">ip</span>         <span class="p">=&gt;</span> <span class="s1">'10.0.0.10'</span><span class="p">,</span>
  <span class="py">port</span>       <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">ip_based</span>   <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="py">docroot</span>    <span class="p">=&gt;</span> <span class="s1">'/var/www/first'</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'The first IP-based vhost, ssl'</span><span class="p">:</span>
  <span class="py">servername</span> <span class="p">=&gt;</span> <span class="s1">'first.example.com'</span><span class="p">,</span>
  <span class="py">ip</span>         <span class="p">=&gt;</span> <span class="s1">'10.0.0.10'</span><span class="p">,</span>
  <span class="py">port</span>       <span class="p">=&gt;</span> <span class="s1">'443'</span><span class="p">,</span>
  <span class="py">ip_based</span>   <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="py">docroot</span>    <span class="p">=&gt;</span> <span class="s1">'/var/www/first-ssl'</span><span class="p">,</span>
  <span class="py">ssl</span>        <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Next, we add two name-based virtual hosts listening on a second IP address (10.0.0.20):</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'second.example.com'</span><span class="p">:</span>
  <span class="py">ip</span>      <span class="p">=&gt;</span> <span class="s1">'10.0.0.20'</span><span class="p">,</span>
  <span class="py">port</span>    <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/second'</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'third.example.com'</span><span class="p">:</span>
  <span class="py">ip</span>      <span class="p">=&gt;</span> <span class="s1">'10.0.0.20'</span><span class="p">,</span>
  <span class="py">port</span>    <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/third'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>To add name-based virtual hosts that answer on either 10.0.0.10 or 10.0.0.20, you <strong>must</strong> set the <a href="#add_listen"><code class="language-plaintext highlighter-rouge">add_listen</code></a> parameter to false to disable the default Apache setting of <code class="language-plaintext highlighter-rouge">Listen 80</code>, as it conflicts with the preceding IP-based virtual hosts.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'fourth.example.com'</span><span class="p">:</span>
  <span class="py">port</span>       <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>    <span class="p">=&gt;</span> <span class="s1">'/var/www/fourth'</span><span class="p">,</span>
  <span class="py">add_listen</span> <span class="p">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'fifth.example.com'</span><span class="p">:</span>
  <span class="py">port</span>       <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>    <span class="p">=&gt;</span> <span class="s1">'/var/www/fifth'</span><span class="p">,</span>
  <span class="py">add_listen</span> <span class="p">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="installing-apache-modules">Installing Apache modules</h3>

<p>There are two ways to install <a href="https://httpd.apache.org/docs/current/mod/">Apache modules</a> using the Puppet apache module:</p>

<ul>
  <li>Use the <a href="#classes-apachemodmodule-name"><code class="language-plaintext highlighter-rouge">apache::mod::&lt;MODULE NAME&gt;</code></a> classes to <a href="#installing-specific-modules">install specific Apache modules with parameters</a>.</li>
  <li>Use the <a href="#defined-type-apachemod"><code class="language-plaintext highlighter-rouge">apache::mod</code></a> defined type to <a href="#installing-arbitrary-modules">install arbitrary Apache modules</a>.</li>
</ul>

<h4 id="installing-specific-modules">Installing specific modules</h4>

<p>The Puppet apache module supports installing many common <a href="https://httpd.apache.org/docs/current/mod/">Apache modules</a>, often with parameterized configuration options. For a list of supported Apache modules, see the <a href="#classes-apachemodmodule-name"><code class="language-plaintext highlighter-rouge">apache::mod::&lt;MODULE NAME&gt;</code></a> class references.</p>

<p>For example, you can install the <code class="language-plaintext highlighter-rouge">mod_ssl</code> Apache module with default settings by declaring the <a href="#class-apachemodssl"><code class="language-plaintext highlighter-rouge">apache::mod::ssl</code></a> class:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'apache::mod::ssl'</span><span class="p">:</span> <span class="p">}</span>
</code></pre></div></div>

<p><a href="#class-apachemodssl"><code class="language-plaintext highlighter-rouge">apache::mod::ssl</code></a> has several parameterized options that you can set when declaring it. For instance, to enable <code class="language-plaintext highlighter-rouge">mod_ssl</code> with compression enabled, set the <a href="#ssl_compression"><code class="language-plaintext highlighter-rouge">ssl_compression</code></a> parameter to true:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'apache::mod::ssl'</span><span class="p">:</span>
  <span class="py">ssl_compression</span> <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Note that some modules have prerequisites, which are documented in their references under <a href="#classes-apachemodmodule-name"><code class="language-plaintext highlighter-rouge">apache::mod::&lt;MODULE NAME&gt;</code></a>.</p>

<h4 id="installing-arbitrary-modules">Installing arbitrary modules</h4>

<p>You can pass the name of any module that your operating system’s package manager can install to the <a href="#defined-type-apachemod"><code class="language-plaintext highlighter-rouge">apache::mod</code></a> defined type to install it. Unlike the specific-module classes, the <a href="#defined-type-apachemod"><code class="language-plaintext highlighter-rouge">apache::mod</code></a> defined type doesn’t tailor the installation based on other installed modules or with specific parameters—Puppet only grabs and installs the module’s package, leaving detailed configuration up to you.</p>

<p>For example, to install the <a href="https://github.com/phokz/mod-auth-external"><code class="language-plaintext highlighter-rouge">mod_authnz_external</code></a> Apache module, declare the defined type with the ‘mod_authnz_external’ name:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::mod</span> <span class="p">{</span> <span class="s1">'mod_authnz_external'</span><span class="p">:</span> <span class="p">}</span>
</code></pre></div></div>

<p>There are several optional parameters you can specify when defining Apache modules this way. See the <a href="#defined-type-apachemod">defined type’s reference</a> for details.</p>

<h3 id="configuring-fastcgi-servers-to-handle-php-files">Configuring FastCGI servers to handle PHP files</h3>

<p>Add the <a href="#defined-type-apachefastcgiserver"><code class="language-plaintext highlighter-rouge">apache::fastcgi::server</code></a> defined type to allow <a href="http://www.fastcgi.com/">FastCGI</a> servers to handle requests for specific files. For example, the following defines a FastCGI server at 127.0.0.1 (localhost) on port 9000 to handle PHP requests:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::fastcgi::server</span> <span class="p">{</span> <span class="s1">'php'</span><span class="p">:</span>
  <span class="py">host</span>       <span class="p">=&gt;</span> <span class="s1">'127.0.0.1:9000'</span><span class="p">,</span>
  <span class="py">timeout</span>    <span class="p">=&gt;</span> <span class="m">15</span><span class="p">,</span>
  <span class="py">flush</span>      <span class="p">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
  <span class="py">faux_path</span>  <span class="p">=&gt;</span> <span class="s1">'/var/www/php.fcgi'</span><span class="p">,</span>
  <span class="py">fcgi_alias</span> <span class="p">=&gt;</span> <span class="s1">'/php.fcgi'</span><span class="p">,</span>
  <span class="py">file_type</span>  <span class="p">=&gt;</span> <span class="s1">'application/x-httpd-php'</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can then use the <a href="#custom_fragment"><code class="language-plaintext highlighter-rouge">custom_fragment</code></a> parameter to configure the virtual host to have the FastCGI server handle the specified file type:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'www'</span><span class="p">:</span>
  <span class="o">...</span>
  <span class="py">custom_fragment</span> <span class="p">=&gt;</span> <span class="s1">'AddType application/x-httpd-php .php'</span>
  <span class="o">...</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="load-balancing-examples">Load balancing examples</h3>

<p>Apache supports load balancing across groups of servers through the <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html"><code class="language-plaintext highlighter-rouge">mod_proxy</code></a> Apache module. Puppet supports configuring Apache load balancing groups (also known as balancer clusters) through the <a href="#defined-type-apachebalancer"><code class="language-plaintext highlighter-rouge">apache::balancer</code></a> and <a href="#defined-type-apachebalancermember"><code class="language-plaintext highlighter-rouge">apache::balancermember</code></a> defined types.</p>

<p>To enable load balancing with <a href="http://docs.puppetlabs.com/latest/reference/lang_exported.md">exported resources</a>, export the <a href="#defined-type-apachebalancermember"><code class="language-plaintext highlighter-rouge">apache::balancermember</code></a> defined type from the load balancer member server:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">@@</span><span class="n">apache::balancermember</span> <span class="p">{</span> <span class="s2">"</span><span class="nv">${::fqdn}</span><span class="s2">-puppet00"</span><span class="p">:</span>
  <span class="py">balancer_cluster</span> <span class="p">=&gt;</span> <span class="s1">'puppet00'</span><span class="p">,</span>
  <span class="py">url</span>              <span class="p">=&gt;</span> <span class="s2">"ajp://</span><span class="nv">${::fqdn}</span><span class="s2">:8009"</span><span class="p">,</span>
  <span class="py">options</span>          <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'ping=5'</span><span class="p">,</span> <span class="s1">'disablereuse=on'</span><span class="p">,</span> <span class="s1">'retry=5'</span><span class="p">,</span> <span class="s1">'ttl=120'</span><span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Then, on the proxy server, create the load balancing group:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::balancer</span> <span class="p">{</span> <span class="s1">'puppet00'</span><span class="p">:</span> <span class="p">}</span>
</code></pre></div></div>

<p>To enable load balancing without exporting resources, declare the following on the proxy server:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::balancer</span> <span class="p">{</span> <span class="s1">'puppet00'</span><span class="p">:</span> <span class="p">}</span>

<span class="n">apache::balancermember</span> <span class="p">{</span> <span class="s2">"</span><span class="nv">${::fqdn}</span><span class="s2">-puppet00"</span><span class="p">:</span>
  <span class="py">balancer_cluster</span> <span class="p">=&gt;</span> <span class="s1">'puppet00'</span><span class="p">,</span>
  <span class="py">url</span>              <span class="p">=&gt;</span> <span class="s2">"ajp://</span><span class="nv">${::fqdn}</span><span class="s2">:8009"</span><span class="p">,</span>
  <span class="py">options</span>          <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'ping=5'</span><span class="p">,</span> <span class="s1">'disablereuse=on'</span><span class="p">,</span> <span class="s1">'retry=5'</span><span class="p">,</span> <span class="s1">'ttl=120'</span><span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Then declare the <code class="language-plaintext highlighter-rouge">apache::balancer</code> and <code class="language-plaintext highlighter-rouge">apache::balancermember</code> defined types on the proxy server.</p>

<p>If you need to use the <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxyset">ProxySet</a> directive on the balancer, use the <a href="#proxy_set"><code class="language-plaintext highlighter-rouge">proxy_set</code></a> parameter of <code class="language-plaintext highlighter-rouge">apache::balancer</code>:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::balancer</span> <span class="p">{</span> <span class="s1">'puppet01'</span><span class="p">:</span>
  <span class="py">proxy_set</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="s1">'stickysession'</span> <span class="p">=&gt;</span> <span class="s1">'JSESSIONID'</span><span class="p">,</span>
    <span class="s1">'lbmethod'</span>      <span class="p">=&gt;</span> <span class="s1">'bytraffic'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Load balancing scheduler algorithms (<code class="language-plaintext highlighter-rouge">lbmethod</code>) are listed <a href="https://httpd.apache.org/docs/current/mod/mod_proxy_balancer.html">in mod_proxy_balancer documentation</a>.</p>

<h2 id="reference">Reference</h2>

<ul>
  <li><a href="#public-classes"><strong>Public classes</strong></a>
    <ul>
      <li><a href="#class-apache">Class: apache</a></li>
      <li><a href="#class-apachedev">Class: apache::dev</a></li>
      <li><a href="#class-apachevhosts">Class: apache::vhosts</a></li>
      <li><a href="#classes-apachemodname">Classes: apache::mod::*</a></li>
    </ul>
  </li>
  <li><a href="#private-classes"><strong>Private classes</strong></a>
    <ul>
      <li><a href="#class-apacheconfdno_accf">Class: apache::confd::no_accf</a></li>
      <li><a href="#class-apachedefault_confd_files">Class: apache::default_confd_files</a></li>
      <li><a href="#class-apachedefault_mods">Class: apache::default_mods</a></li>
      <li><a href="#class-apachepackage">Class: apache::package</a></li>
      <li><a href="#class-apacheparams">Class: apache::params</a></li>
      <li><a href="#class-apacheservice">Class: apache::service</a></li>
      <li><a href="#class-apacheversion">Class: apache::version</a></li>
    </ul>
  </li>
  <li><a href="#public-defined-types"><strong>Public defined types</strong></a>
    <ul>
      <li><a href="#defined-type-apachebalancer">Defined type: apache::balancer</a></li>
      <li><a href="#defined-type-apachebalancermember">Defined type: apache::balancermember</a></li>
      <li><a href="#defined-type-apachecustom_config">Defined type: apache::custom_config</a></li>
      <li><a href="#defined-type-fastcgi-server">Defined type: apache::fastcgi::server</a></li>
      <li><a href="#defined-type-apachelisten">Defined type: apache::listen</a></li>
      <li><a href="#defined-type-apachemod">Defined type: apache::mod</a></li>
      <li><a href="#defined-type-apachenamevirtualhost">Defined type: apache::namevirtualhost</a></li>
      <li><a href="#defined-type-apachevhost">Defined type: apache::vhost</a></li>
      <li><a href="#defined-type-apachevhostcustom">Defined type: apache::vhost::custom</a></li>
    </ul>
  </li>
  <li><a href="#private-defined-types"><strong>Private defined types</strong></a>
    <ul>
      <li><a href="#defined-type-default_mods-load">Defined type: apache::default_mods::load</a></li>
      <li><a href="#defined-type-apacheperusermultiplexer">Defined type: apache::peruser::multiplexer</a></li>
      <li><a href="#defined-type-apacheperuserprocessor">Defined type: apache::peruser::processor</a></li>
      <li><a href="#defined-type-apachesecurityfile_link">Defined type: apache::security::file_link</a></li>
    </ul>
  </li>
  <li><a href="#templates"><strong>Templates</strong></a></li>
</ul>

<h3 id="public-classes">Public Classes</h3>

<h4 id="class-apache">Class: <code class="language-plaintext highlighter-rouge">apache</code></h4>

<p>Guides the basic setup and installation of Apache on your system.</p>

<p>When this class is declared with the default options, Puppet:</p>

<ul>
  <li>Installs the appropriate Apache software package and <a href="#default_mods">required Apache modules</a> for your operating system.</li>
  <li>Places the required configuration files in a directory, with the <a href="#conf_dir">default location</a> determined by your operating system.</li>
  <li>Configures the server with a default virtual host and standard port (‘80’) and address (‘*’) bindings.</li>
  <li>Creates a document root directory determined by your operating system, typically <code class="language-plaintext highlighter-rouge">/var/www</code>.</li>
  <li>Starts the Apache service.</li>
</ul>

<p>You can simply declare the default <code class="language-plaintext highlighter-rouge">apache</code> class:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'apache'</span><span class="p">:</span> <span class="p">}</span>
</code></pre></div></div>

<p>You can establish a default virtual host in this class, by using the <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined type, or both. You can also configure additional specific virtual hosts with the <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined type. Puppet recommends customizing the <code class="language-plaintext highlighter-rouge">apache</code> class’s declaration with the following parameters, as its default settings are not optimized for production.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache</code>:</strong></p>

<h5 id="allow_encoded_slashes"><code class="language-plaintext highlighter-rouge">allow_encoded_slashes</code></h5>

<p>Sets the server default for the <a href="https://httpd.apache.org/docs/current/mod/core.html#allowencodedslashes"><code class="language-plaintext highlighter-rouge">AllowEncodedSlashes</code></a> declaration, which modifies the responses to URLs containing ‘' and ‘/’ characters. Valid options: ‘on’, ‘off’, ‘nodecode’. Default: undef, which omits the declaration from the server’s configuration and uses Apache’s default setting of ‘off’.</p>

<h5 id="apache_version"><code class="language-plaintext highlighter-rouge">apache_version</code></h5>

<p>Configures module template behavior, package names, and default Apache modules by defining the version of Apache to use. Default: Determined by your operating system family and release via the <a href="#class-apacheversion"><code class="language-plaintext highlighter-rouge">apache::version</code></a> class. Puppet recommends against manually configuring this parameter without reason.</p>

<h5 id="conf_dir"><code class="language-plaintext highlighter-rouge">conf_dir</code></h5>

<p>Sets the directory where the Apache server’s main configuration file is located. Default: Depends on your operating system.</p>

<ul>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/etc/apache2</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/etc/apache22</code></li>
  <li><strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/etc/apache2</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">/etc/httpd/conf</code></li>
</ul>

<h5 id="conf_template"><code class="language-plaintext highlighter-rouge">conf_template</code></h5>

<p>Defines the <a href="http://docs.puppetlabs.com/puppet/latest/reference/lang_template.html">template</a> used for the main Apache configuration file. Default: <code class="language-plaintext highlighter-rouge">apache/httpd.conf.erb</code>. Modifying this parameter is potentially risky, as the apache Puppet module is designed to use a minimal configuration file customized by <code class="language-plaintext highlighter-rouge">conf.d</code> entries.</p>

<h5 id="confd_dir"><code class="language-plaintext highlighter-rouge">confd_dir</code></h5>

<p>Sets the location of the Apache server’s custom configuration directory. Default: Depends on your operating system.</p>

<ul>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/etc/apache2/conf.d</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/etc/apache22</code></li>
  <li><strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/etc/apache2/conf.d</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">/etc/httpd/conf.d</code></li>
</ul>

<h5 id="default_charset"><code class="language-plaintext highlighter-rouge">default_charset</code></h5>

<p>Used as the <a href="https://httpd.apache.org/docs/current/mod/core.html#adddefaultcharset"><code class="language-plaintext highlighter-rouge">AddDefaultCharset</code></a> directive in the main configuration file. Default: undef.</p>

<h5 id="default_confd_files"><code class="language-plaintext highlighter-rouge">default_confd_files</code></h5>

<p>Determines whether Puppet generates a default set of includable Apache configuration files in the directory defined by the <a href="#confd_dir"><code class="language-plaintext highlighter-rouge">confd_dir</code></a> parameter. These configuration files correspond to what is typically installed with the Apache package on the server’s operating system. Valid options: Boolean. Default: true.</p>

<h5 id="default_mods"><code class="language-plaintext highlighter-rouge">default_mods</code></h5>

<p>Determines whether to configure and enable a set of default <a href="https://httpd.apache.org/docs/current/mod/">Apache modules</a> depending on your operating system. Valid options: true, false, or an array of Apache module names. Default: true.</p>

<p>If this parameter’s value is false, Puppet includes only the Apache modules required to make the HTTP daemon work on your operating system, and you can declare any other modules separately using the <a href="#classes-apachemodmodule-name"><code class="language-plaintext highlighter-rouge">apache::mod::&lt;MODULE NAME&gt;</code></a> class or <a href="#defined-type-apachemod"><code class="language-plaintext highlighter-rouge">apache::mod</code></a> defined type.</p>

<p>If true, Puppet installs additional modules, the list of which depends on the operating system as well as the <a href="#apache_version"><code class="language-plaintext highlighter-rouge">apache_version</code></a> and <a href="#mpm_module"><code class="language-plaintext highlighter-rouge">mpm_module</code></a> parameters’ values. As these lists of modules can change frequently, consult the <a href="https://github.com/puppetlabs/puppetlabs-apache/blob/master/manifests/default_mods.pp">Puppet module’s code</a> for up-to-date lists.</p>

<p>If this parameter contains an array, Puppet instead enables all passed Apache modules.</p>

<h5 id="default_ssl_ca"><code class="language-plaintext highlighter-rouge">default_ssl_ca</code></h5>

<p>Sets the default certificate authority for the Apache server. Default: undef.</p>

<p>While this default value results in a functioning Apache server, you <strong>must</strong> update this parameter with your certificate authority information before deploying this server in a production environment.</p>

<h5 id="default_ssl_cert"><code class="language-plaintext highlighter-rouge">default_ssl_cert</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/ssl/index.html">SSL encryption</a> certificate location. Default: Determined by your operating system.</p>

<ul>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/etc/ssl/certs/ssl-cert-snakeoil.pem</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/etc/apache22/server.crt</code></li>
  <li><strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/etc/ssl/apache2/server.crt</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">/etc/pki/tls/certs/localhost.crt</code></li>
</ul>

<p>While the default value results in a functioning Apache server, you <strong>must</strong> update this parameter with your certificate location before deploying this server in a production environment.</p>

<h5 id="default_ssl_chain"><code class="language-plaintext highlighter-rouge">default_ssl_chain</code></h5>

<p>Sets the default <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslcertificatechainfile">SSL chain</a> location. Default: undef.</p>

<p>While this default value results in a functioning Apache server, you <strong>must</strong> update this parameter with your SSL chain before deploying this server in a production environment.</p>

<h5 id="default_ssl_crl"><code class="language-plaintext highlighter-rouge">default_ssl_crl</code></h5>

<p>Sets the path of the default <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslcarevocationfile">certificate revocation list</a> (CRL) file to use. Default: undef.</p>

<p>While this default value results in a functioning Apache server, you <strong>must</strong> update this parameter with your CRL file’s path before deploying this server in a production environment. You can use this parameter with or in place of the <a href="#default_ssl_crl_path"><code class="language-plaintext highlighter-rouge">default_ssl_crl_path</code></a>.</p>

<h5 id="default_ssl_crl_path"><code class="language-plaintext highlighter-rouge">default_ssl_crl_path</code></h5>

<p>Sets the server’s <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslcarevocationpath">certificate revocation list path</a>, which contains your CRLs. Default: undef.</p>

<p>While this default value results in a functioning Apache server, you <strong>must</strong> update this parameter with the CRL path before deploying this server in a production environment.</p>

<h5 id="default_ssl_crl_check"><code class="language-plaintext highlighter-rouge">default_ssl_crl_check</code></h5>

<p>Sets the default certificate revocation check level via the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslcarevocationcheck"><code class="language-plaintext highlighter-rouge">SSLCARevocationCheck</code></a> directive. Default: undef.</p>

<p>While this default value results in a functioning Apache server, you <strong>must</strong> specify this parameter when using certificate revocation lists in a production environment.</p>

<p>This parameter only applies to Apache 2.4 or higher and is ignored on older versions.</p>

<h5 id="default_ssl_key"><code class="language-plaintext highlighter-rouge">default_ssl_key</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslcertificatekeyfile">SSL certificate key file</a> location. Default: Determined by your operating system.</p>

<ul>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/etc/ssl/private/ssl-cert-snakeoil.key</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/etc/apache22/server.key</code></li>
  <li><strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/etc/ssl/apache2/server.key</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">/etc/pki/tls/private/localhost.key</code></li>
</ul>

<p>While these default values result in a functioning Apache server, you <strong>must</strong> update this parameter with your SSL key’s location before deploying this server in a production environment.</p>

<h5 id="default_ssl_vhost"><code class="language-plaintext highlighter-rouge">default_ssl_vhost</code></h5>

<p>Configures a default <a href="https://httpd.apache.org/docs/current/ssl/index.html">SSL</a> virtual host. Valid options: Boolean. Default: false.</p>

<p>If true, Puppet automatically configures the following virtual host using the <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined type:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'default-ssl'</span><span class="p">:</span>
  <span class="py">port</span>            <span class="p">=&gt;</span> <span class="m">443</span><span class="p">,</span>
  <span class="py">ssl</span>             <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="py">docroot</span>         <span class="p">=&gt;</span> <span class="nv">$docroot</span><span class="p">,</span>
  <span class="py">scriptalias</span>     <span class="p">=&gt;</span> <span class="nv">$scriptalias</span><span class="p">,</span>
  <span class="py">serveradmin</span>     <span class="p">=&gt;</span> <span class="nv">$serveradmin</span><span class="p">,</span>
  <span class="py">access_log_file</span> <span class="p">=&gt;</span> <span class="s2">"ssl_</span><span class="nv">${access_log_file}</span><span class="s2">"</span><span class="p">,</span>
  <span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: SSL virtual hosts only respond to HTTPS queries.</p>
</blockquote>

<h5 id="default_type"><code class="language-plaintext highlighter-rouge">default_type</code></h5>

<p><em>Apache 2.2 only</em>. Sets the <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">MIME <code class="language-plaintext highlighter-rouge">content-type</code></a> sent if the server cannot otherwise determine an appropriate <code class="language-plaintext highlighter-rouge">content-type</code>. This directive is deprecated in Apache 2.4 and newer and only exists for backwards compatibility in configuration files. Default: undef.</p>

<h5 id="default_vhost"><code class="language-plaintext highlighter-rouge">default_vhost</code></h5>

<p>Configures a default virtual host when the class is declared. Valid options: Boolean. Default: true.</p>

<p>To configure <a href="#configuring-virtual-hosts">customized virtual hosts</a>, set this parameter’s value to false.</p>

<blockquote>
  <p><strong>Note</strong>: Apache will not start without at least one virtual host. If you set this to false be sure to configure one elsewhere.</p>
</blockquote>

<h5 id="dev_packages"><code class="language-plaintext highlighter-rouge">dev_packages</code></h5>

<p>Configures a specific dev package to use. Valid options: A string or array of strings. Default: Depends on the operating system.</p>

<ul>
  <li><strong>Red Hat:</strong> ‘httpd-devel’</li>
  <li><strong>Debian 8/Ubuntu 13.10 or newer:</strong> [‘libaprutil1-dev’, ‘libapr1-dev’, ‘apache2-dev’]</li>
  <li><strong>Older Debian/Ubuntu versions:</strong> [‘libaprutil1-dev’, ‘libapr1-dev’, ‘apache2-prefork-dev’]</li>
  <li><strong>FreeBSD, Gentoo:</strong> undef</li>
  <li><strong>Suse:</strong> [‘libapr-util1-devel’, ‘libapr1-devel’]</li>
</ul>

<p>Example for using httpd 2.4 from the IUS yum repo:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">include</span> <span class="nc">::apache::dev</span>
<span class="k">class</span> <span class="p">{</span> <span class="s1">'apache'</span><span class="p">:</span>
  <span class="py">apache_name</span>  <span class="p">=&gt;</span> <span class="s1">'httpd24u'</span><span class="p">,</span>
  <span class="py">dev_packages</span> <span class="p">=&gt;</span> <span class="s1">'httpd24u-devel'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="docroot"><code class="language-plaintext highlighter-rouge">docroot</code></h5>

<p>Sets the default <a href="https://httpd.apache.org/docs/current/mod/core.html#documentroot"><code class="language-plaintext highlighter-rouge">DocumentRoot</code></a> location. Default: Determined by your operating system.</p>

<ul>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/var/www/html</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/www/apache22/data</code></li>
  <li><strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/var/www/localhost/htdocs</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">/var/www/html</code></li>
</ul>

<h5 id="error_documents"><code class="language-plaintext highlighter-rouge">error_documents</code></h5>

<p>Determines whether to enable <a href="https://httpd.apache.org/docs/current/custom-error.html">custom error documents</a> on the Apache server. Valid options: Boolean. Default: false.</p>

<h5 id="group"><code class="language-plaintext highlighter-rouge">group</code></h5>

<p>Sets the group ID that owns any Apache processes spawned to answer requests.</p>

<p>By default, Puppet attempts to manage this group as a resource under the <code class="language-plaintext highlighter-rouge">apache</code> class, determining the group based on the operating system as detected by the <a href="#class-apacheparams"><code class="language-plaintext highlighter-rouge">apache::params</code></a> class. To to prevent the group resource from being created and use a group created by another Puppet module, set the <a href="#manage_group"><code class="language-plaintext highlighter-rouge">manage_group</code></a> parameter’s value to false.</p>

<blockquote>
  <p><strong>Note</strong>: Modifying this parameter only changes the group ID that Apache uses to spawn child processes to access resources. It does not change the user that owns the parent server process.</p>
</blockquote>

<h5 id="httpd_dir"><code class="language-plaintext highlighter-rouge">httpd_dir</code></h5>

<p>Sets the Apache server’s base configuration directory. This is useful for specially repackaged Apache server builds but might have unintended consequences when combined with the default distribution packages. Default: Determined by your operating system.</p>

<ul>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/etc/apache2</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/etc/apache22</code></li>
  <li><strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/etc/apache2</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">/etc/httpd</code></li>
</ul>

<h5 id="keepalive"><code class="language-plaintext highlighter-rouge">keepalive</code></h5>

<p>Determines whether to enable persistent HTTP connections with the <a href="https://httpd.apache.org/docs/current/mod/core.html#keepalive"><code class="language-plaintext highlighter-rouge">KeepAlive</code></a> directive. Valid options: ‘Off’, ‘On’. Default: ‘Off’.</p>

<p>If ‘On’, use the <a href="#keepalive_timeout"><code class="language-plaintext highlighter-rouge">keepalive_timeout</code></a> and <a href="#max_keepalive_requests"><code class="language-plaintext highlighter-rouge">max_keepalive_requests</code></a> parameters to set relevant options.</p>

<h5 id="keepalive_timeout"><code class="language-plaintext highlighter-rouge">keepalive_timeout</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/core.html#keepalivetimeout"><code class="language-plaintext highlighter-rouge">KeepAliveTimeout</code></a> directive, which determines the amount of time the Apache server waits for subsequent requests on a persistent HTTP connection. Default: ‘15’.</p>

<p>This parameter is only relevant if the <a href="#keepalive"><code class="language-plaintext highlighter-rouge">keepalive</code> parameter</a> is enabled.</p>

<h5 id="max_keepalive_requests"><code class="language-plaintext highlighter-rouge">max_keepalive_requests</code></h5>

<p>Limits the number of requests allowed per connection when the <a href="#keepalive"><code class="language-plaintext highlighter-rouge">keepalive</code> parameter</a> is enabled. Default: ‘100’.</p>

<h5 id="lib_path"><code class="language-plaintext highlighter-rouge">lib_path</code></h5>

<p>Specifies the location where <a href="https://httpd.apache.org/docs/current/mod/">Apache module</a> files are stored. Default: Depends on the operating system.</p>

<ul>
  <li><strong>Debian</strong> and <strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/usr/lib/apache2/modules</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/libexec/apache24</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">modules</code></li>
</ul>

<blockquote>
  <p><strong>Note</strong>: Do not configure this parameter manually without special reason.</p>
</blockquote>

<h5 id="loadfile_name"><code class="language-plaintext highlighter-rouge">loadfile_name</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_so.html#loadfile"><code class="language-plaintext highlighter-rouge">LoadFile</code></a> directive’s filename. Valid options: Filenames in the format <code class="language-plaintext highlighter-rouge">\*.load</code>.</p>

<p>This can be used to set the module load order.</p>

<h5 id="log_level"><code class="language-plaintext highlighter-rouge">log_level</code></h5>

<p>Changes the error log’s verbosity. Valid options: ‘alert’, ‘crit’, ‘debug’, ‘emerg’, ‘error’, ‘info’, ‘notice’, ‘warn’. Default: ‘warn’.</p>

<h5 id="log_formats"><code class="language-plaintext highlighter-rouge">log_formats</code></h5>

<p>Define additional <a href="https://httpd.apache.org/docs/current/mod/mod_log_config.html#logformat"><code class="language-plaintext highlighter-rouge">LogFormat</code></a> directives. Valid options: A <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_hash.html">hash</a>, such as:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$log_formats</span> <span class="o">=</span> <span class="p">{</span> <span class="py">vhost_common</span> <span class="p">=&gt;</span> <span class="s1">'%v %h %l %u %t \"%r\" %&gt;s %b'</span> <span class="p">}</span>
</code></pre></div></div>

<p>There are a number of predefined <code class="language-plaintext highlighter-rouge">LogFormats</code> in the <code class="language-plaintext highlighter-rouge">httpd.conf</code> that Puppet creates:</p>

<pre><code class="language-httpd">LogFormat "%h %l %u %t \"%r\" %&gt;s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
LogFormat "%h %l %u %t \"%r\" %&gt;s %b" common
LogFormat "%{Referer}i -&gt; %U" referer
LogFormat "%{User-agent}i" agent
LogFormat "%{X-Forwarded-For}i %l %u %t \"%r\" %s %b \"%{Referer}i\" \"%{User-agent}i\"" forwarded
</code></pre>

<p>If your <code class="language-plaintext highlighter-rouge">log_formats</code> parameter contains one of those, it will be overwritten with <strong>your</strong> definition.</p>

<h5 id="logroot"><code class="language-plaintext highlighter-rouge">logroot</code></h5>

<p>Changes the directory of Apache log files for the virtual host. Default: Determined by your operating system.</p>

<ul>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/var/log/apache2</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/var/log/apache22</code></li>
  <li><strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/var/log/apache2</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">/var/log/httpd</code></li>
</ul>

<h5 id="logroot_mode"><code class="language-plaintext highlighter-rouge">logroot_mode</code></h5>

<p>Overrides the default <a href="#logroot"><code class="language-plaintext highlighter-rouge">logroot</code></a> directory’s mode. Default: undef.</p>

<blockquote>
  <p><strong>Note</strong>: Do <em>not</em> grant write access to the directory where the logs are stored without being aware of the consequences. See the <a href="https://httpd.apache.org/docs/current/logs.html#security">Apache documentation</a> for details.</p>
</blockquote>

<h5 id="manage_group"><code class="language-plaintext highlighter-rouge">manage_group</code></h5>

<p>When false, stops Puppet from creating the group resource. Valid options: Boolean. Default: true.</p>

<p>If you have a group created from another Puppet module that you want to use to run Apache, set this to false. Without this parameter, attempting to use a previously established group results in a duplicate resource error.</p>

<h5 id="manage_user"><code class="language-plaintext highlighter-rouge">manage_user</code></h5>

<p>When false, stops Puppet from creating the user resource. Valid options: Boolean. Default: true.</p>

<p>This is for instances when you have a user, created from another Puppet module, you want to use to run Apache. Without this parameter, attempting to use a previously established user would result in a duplicate resource error.</p>

<h5 id="mod_dir"><code class="language-plaintext highlighter-rouge">mod_dir</code></h5>

<p>Sets where Puppet places configuration files for your <a href="https://httpd.apache.org/docs/current/mod/">Apache modules</a>. Default: Determined by your operating system.</p>

<ul>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/etc/apache2/mods-available</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/etc/apache22/Modules</code></li>
  <li><strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/etc/apache2/modules.d</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">/etc/httpd/conf.d</code></li>
</ul>

<h5 id="mpm_module"><code class="language-plaintext highlighter-rouge">mpm_module</code></h5>

<p>Determines which <a href="https://httpd.apache.org/docs/current/mpm.html">multi-processing module</a> (MPM) is loaded and configured for the HTTPD process. Valid options: ‘event’, ‘itk’, ‘peruser’, ‘prefork’, ‘worker’, or false. Default: Determined by your operating system.</p>

<ul>
  <li><strong>Debian</strong>: ‘worker’</li>
  <li><strong>FreeBSD, Gentoo, and Red Hat</strong>: ‘prefork’</li>
</ul>

<p>You must set this to false to explicitly declare the following classes with custom parameters:</p>

<ul>
  <li><a href="#class-apachemodevent"><code class="language-plaintext highlighter-rouge">apache::mod::event</code></a></li>
  <li><a href="#class-apachemoditk"><code class="language-plaintext highlighter-rouge">apache::mod::itk</code></a></li>
  <li><a href="#class-apachemodperuser"><code class="language-plaintext highlighter-rouge">apache::mod::peruser</code></a></li>
  <li><a href="#class-apachemodprefork"><code class="language-plaintext highlighter-rouge">apache::mod::prefork</code></a></li>
  <li><a href="#class-apachemodworker"><code class="language-plaintext highlighter-rouge">apache::mod::worker</code></a></li>
</ul>

<h5 id="package_ensure"><code class="language-plaintext highlighter-rouge">package_ensure</code></h5>

<p>Controls the <code class="language-plaintext highlighter-rouge">package</code> resource’s <a href="https://docs.puppetlabs.com/references/latest/type.html#package-attribute-ensure"><code class="language-plaintext highlighter-rouge">ensure</code></a> attribute. Valid options: ‘absent’, ‘installed’ (or the equivalent ‘present’), or a version string. Default: ‘installed’.</p>

<h5 id="pidfile"><code class="language-plaintext highlighter-rouge">pidfile</code></h5>

<p>Allows settting a custom location for the pid file - useful if using a custom built Apache rpm. Default: Depends on operating system.</p>

<ul>
  <li><strong>Debian:</strong> ‘${APACHE_PID_FILE}’</li>
  <li><strong>FreeBSD:</strong> ‘/var/run/httpd.pid’</li>
  <li><strong>Red Hat:</strong> ‘run/httpd.pid’</li>
</ul>

<h5 id="ports_file"><code class="language-plaintext highlighter-rouge">ports_file</code></h5>

<p>Sets the path to the file containing Apache ports configuration. Default: ‘{$conf_dir}/ports.conf’.</p>

<h5 id="purge_configs"><code class="language-plaintext highlighter-rouge">purge_configs</code></h5>

<p>Removes all other Apache configs and virtual hosts. Valid options: Boolean. Default: true.</p>

<p>Setting this to false is a stopgap measure to allow the apache Puppet module to coexist with existing or unmanaged configurations. We recommend moving your configuration to resources within this module. For virtual host configurations, see <a href="#purge_vhost_dir"><code class="language-plaintext highlighter-rouge">purge_vhost_dir</code></a>.</p>

<h5 id="purge_vhost_dir"><code class="language-plaintext highlighter-rouge">purge_vhost_dir</code></h5>

<p>If the <a href="#vhost_dir"><code class="language-plaintext highlighter-rouge">vhost_dir</code></a> parameter’s value differs from the <a href="#confd_dir"><code class="language-plaintext highlighter-rouge">confd_dir</code></a> parameter’s, the Boolean parameter <code class="language-plaintext highlighter-rouge">purge_vhost_dir</code> determines whether Puppet removes any configurations inside <code class="language-plaintext highlighter-rouge">vhost_dir</code> <em>not</em> managed by Puppet. Valid options: Boolean. Default: same as <a href="#purge_configs"><code class="language-plaintext highlighter-rouge">purge_configs</code></a>.</p>

<p>Setting <code class="language-plaintext highlighter-rouge">purge_vhost_dir</code> to false is a stopgap measure to allow the apache Puppet module to coexist with existing or otherwise unmanaged configurations within <code class="language-plaintext highlighter-rouge">vhost_dir</code>.</p>

<h5 id="rewrite_lock"><code class="language-plaintext highlighter-rouge">rewrite_lock</code></h5>

<p>Allows setting a custom location for a rewrite lock - considered best practice if using a RewriteMap of type prg in the [<code class="language-plaintext highlighter-rouge">rewrites</code>][] parameter of your virtual host. Default: undef.</p>

<p>This parameter only applies to Apache version 2.2 or lower and is ignored on newer versions.</p>

<h5 id="sendfile"><code class="language-plaintext highlighter-rouge">sendfile</code></h5>

<p>Forces Apache to use the Linux kernel’s <code class="language-plaintext highlighter-rouge">sendfile</code> support to serve static files, via the <a href="https://httpd.apache.org/docs/current/mod/core.html#enablesendfile"><code class="language-plaintext highlighter-rouge">EnableSendfile</code></a> directive. Valid options: ‘On’, ‘Off’. Default: ‘On’.</p>

<h5 id="serveradmin"><code class="language-plaintext highlighter-rouge">serveradmin</code></h5>

<p>Sets the Apache server administrator’s contact information via Apache’s <a href="https://httpd.apache.org/docs/current/mod/core.html#serveradmin"><code class="language-plaintext highlighter-rouge">ServerAdmin</code></a> directive. Default: ‘root@localhost’.</p>

<h5 id="servername"><code class="language-plaintext highlighter-rouge">servername</code></h5>

<p>Sets the Apache server name via Apache’s <a href="https://httpd.apache.org/docs/current/mod/core.html#servername"><code class="language-plaintext highlighter-rouge">ServerName</code></a> directive. Default: the ‘fqdn’ fact reported by <a href="http://docs.puppetlabs.com/facter/">Facter</a>.</p>

<p>Setting to false will not set ServerName at all.</p>

<h5 id="server_root"><code class="language-plaintext highlighter-rouge">server_root</code></h5>

<p>Sets the Apache server’s root directory via Apache’s <a href="https://httpd.apache.org/docs/current/mod/core.html#serverroot"><code class="language-plaintext highlighter-rouge">ServerRoot</code></a> directive. Default: determined by your operating system.</p>

<ul>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/etc/apache2</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/usr/local</code></li>
  <li><strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/var/www</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">/etc/httpd</code></li>
</ul>

<h5 id="server_signature"><code class="language-plaintext highlighter-rouge">server_signature</code></h5>

<p>Configures a trailing footer line to display at the bottom of server-generated documents, such as error documents and output of certain <a href="https://httpd.apache.org/docs/current/mod/">Apache modules</a>, via Apache’s <a href="https://httpd.apache.org/docs/current/mod/core.html#serversignature"><code class="language-plaintext highlighter-rouge">ServerSignature</code></a> directive. Valid options: ‘Off’, ‘On’. Default: ‘On’.</p>

<h5 id="server_tokens"><code class="language-plaintext highlighter-rouge">server_tokens</code></h5>

<p>Controls how much information Apache sends to the browser about itself and the operating system, via Apache’s <a href="https://httpd.apache.org/docs/current/mod/core.html#servertokens"><code class="language-plaintext highlighter-rouge">ServerTokens</code></a> directive. Default: ‘OS’.</p>

<h5 id="service_enable"><code class="language-plaintext highlighter-rouge">service_enable</code></h5>

<p>Determines whether Puppet enables the Apache HTTPD service when the system is booted. Valid options: Boolean. Default: true.</p>

<h5 id="service_ensure"><code class="language-plaintext highlighter-rouge">service_ensure</code></h5>

<p>Determines whether Puppet should make sure the service is running. Valid options: ‘true’ (equivalent to ‘running’), ‘false’ (equivalent to ‘stopped’). Default: ‘running’.</p>

<p>The ‘false’ or ‘stopped’ values set the ‘httpd’ service resource’s <code class="language-plaintext highlighter-rouge">ensure</code> parameter to ‘false’, which is useful when you want to let the service be managed by another application, such as Pacemaker.</p>

<h5 id="service_name"><code class="language-plaintext highlighter-rouge">service_name</code></h5>

<p>Sets the name of the Apache service. Default: determined by your operating system.</p>

<ul>
  <li><strong>Debian and Gentoo</strong>: ‘apache2’</li>
  <li><strong>FreeBSD</strong>: ‘apache22’</li>
  <li><strong>Red Hat</strong>: ‘httpd’</li>
</ul>

<h5 id="service_manage"><code class="language-plaintext highlighter-rouge">service_manage</code></h5>

<p>Determines whether Puppet manages the HTTPD service’s state. Valid options: Boolean. Default: true.</p>

<h5 id="service_restart"><code class="language-plaintext highlighter-rouge">service_restart</code></h5>

<p>Determines whether Puppet should use a specific command to restart the HTTPD service. Valid options: a command to restart the Apache service. Default: undef, which uses the <a href="http://docs.puppetlabs.com/references/latest/type.html#service-attribute-restart">default Puppet behavior</a>.</p>

<h5 id="ssl_stapling"><code class="language-plaintext highlighter-rouge">ssl_stapling</code></h5>

<p>Specifies whether or not to use <a href="http://httpd.apache.org/docs/current/mod/mod_ssl.html#sslusestapling">SSLUseStapling</a>. Valid options: Boolean. Default: false. It is possible to override this on a vhost level.</p>

<p>This parameter only applies to Apache 2.4 or higher and is ignored on older versions.</p>

<h5 id="ssl_stapling_return_errors"><code class="language-plaintext highlighter-rouge">ssl_stapling_return_errors</code></h5>

<p>Can be used to set the <a href="http://httpd.apache.org/docs/current/mod/mod_ssl.html#sslstaplingreturnrespondererrors">SSLStaplingReturnResponderErrors</a> directive. No default. It is possible to override this on a vhost level.</p>

<p>This parameter only applies to Apache 2.4 or higher and is ignored on older versions.</p>

<h5 id="timeout"><code class="language-plaintext highlighter-rouge">timeout</code></h5>

<p>Sets Apache’s <a href="https://httpd.apache.org/docs/current/mod/core.html#timeout"><code class="language-plaintext highlighter-rouge">TimeOut</code></a> directive, which defines the number of seconds Apache waits for certain events before failing a request. Default: 120.</p>

<h5 id="trace_enable"><code class="language-plaintext highlighter-rouge">trace_enable</code></h5>

<p>Controls how Apache handles <code class="language-plaintext highlighter-rouge">TRACE</code> requests (per <a href="https://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a>) via the <a href="https://httpd.apache.org/docs/current/mod/core.html#traceenable"><code class="language-plaintext highlighter-rouge">TraceEnable</code></a> directive. Valid options: ‘Off’, ‘On’. Default: ‘On’.</p>

<h5 id="use_systemd"><code class="language-plaintext highlighter-rouge">use_systemd</code></h5>

<p>Controls whether the systemd module should be installed on Centos 7 servers, this is especially useful if using custom-built RPMs. Valid options: Boolean. Default: true.</p>

<h5 id="file_mode"><code class="language-plaintext highlighter-rouge">file_mode</code></h5>

<p>Sets the desired permissions mode for config files, in symbolic or numeric notation. Valid options: A string. Default: ‘0644’.</p>

<h5 id="root_directory_options"><code class="language-plaintext highlighter-rouge">root_directory_options</code></h5>

<p>Array of the desired options for the / directory in httpd.conf. Defaults to ‘FollowSymLinks’.</p>

<h5 id="root_directory_secured"><code class="language-plaintext highlighter-rouge">root_directory_secured</code></h5>

<p>Sets the default access policy for the / directory in httpd.conf. A value of ‘false’ allows access to all resources that are missing a more specific access policy. A value of ‘true’ denies access to all resources by default. In this case more specific rules must be used to allow access to these resources (e.g. in a directory block using the <a href="#parameter-directories-for-apachevhost"><code class="language-plaintext highlighter-rouge">directories</code></a> parameter). Valid options: Boolean. Default: false.</p>

<h5 id="vhost_dir"><code class="language-plaintext highlighter-rouge">vhost_dir</code></h5>

<p>Changes your virtual host configuration files’ location. Default: determined by your operating system.</p>

<ul>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/etc/apache2/sites-available</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/etc/apache22/Vhosts</code></li>
  <li><strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/etc/apache2/vhosts.d</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">/etc/httpd/conf.d</code></li>
</ul>

<h5 id="vhost_include_pattern"><code class="language-plaintext highlighter-rouge">vhost_include_pattern</code></h5>

<p>Defines the pattern for files included from the <code class="language-plaintext highlighter-rouge">vhost_dir</code>. Default: ‘*’, also for BC with previous versions of this module.</p>

<p>However, you might want to set this to a value like ‘[^.#]*.conf[^~]’ to make sure files accidentally created in this directory (such as files created by version control systems or editor backups) are <em>not</em> included in your server configuration.</p>

<p>Some operating systems ship with a value of ‘*.conf’. Also note that this module will, by default, create configuration files ending in ‘.conf’.</p>

<h5 id="user"><code class="language-plaintext highlighter-rouge">user</code></h5>

<p>Changes the user Apache uses to answer requests. Apache’s parent process will continue to be run as root, but child processes will access resources as the user defined by this parameter.</p>

<p>Default: Puppet sets the default value via the <a href="#class-apacheparams"><code class="language-plaintext highlighter-rouge">apache::params</code></a> class, which manages the user based on your operating system:</p>

<ul>
  <li><strong>Debian</strong>: ‘www-data’</li>
  <li><strong>FreeBSD</strong>: ‘www’</li>
  <li><strong>Gentoo</strong> and <strong>Red Hat</strong>: ‘apache’</li>
</ul>

<p>To prevent Puppet from managing the user, set the <a href="#manage_user"><code class="language-plaintext highlighter-rouge">manage_user</code></a> parameter to false.</p>

<h5 id="apache_name"><code class="language-plaintext highlighter-rouge">apache_name</code></h5>

<p>The name of the Apache package to install. Default: Puppet sets the default value via the <a href="#class-apacheparams"><code class="language-plaintext highlighter-rouge">apache::params</code></a> class, which manages the user based on your operating system:</p>

<p>The default value is determined by your operating system:</p>

<ul>
  <li><strong>Debian</strong>: ‘apache2’</li>
  <li><strong>FreeBSD</strong>: ‘apache24’</li>
  <li><strong>Gentoo</strong>: ‘www-servers/apache’</li>
  <li><strong>Red Hat</strong>: ‘httpd’</li>
</ul>

<p>You might need to override this if you are using a non-standard Apache package, such as those from Red Hat’s software collections.</p>

<h5 id="error_log"><code class="language-plaintext highlighter-rouge">error_log</code></h5>

<p>The name of the error log file for the main server instance</p>

<p>The default value is determined by your operating system:</p>

<ul>
  <li><strong>Debian</strong>: ‘error.log’</li>
  <li><strong>FreeBSD</strong>: ‘httpd-error.log’</li>
  <li><strong>Gentoo</strong>: ‘error.log’</li>
  <li><strong>Red Hat</strong>: ‘error_log’</li>
  <li><strong>Suse</strong>: ‘error.log’</li>
</ul>

<table>
  <tbody>
    <tr>
      <td>If the string starts with / or</td>
      <td>or syslog: the full path will be set. Otherwise the filename will be prefixed with $logroot</td>
    </tr>
  </tbody>
</table>

<h5 id="scriptalias"><code class="language-plaintext highlighter-rouge">scriptalias</code></h5>

<p>Directory to use for global script alias</p>

<p>The default value is determined by your operating system:</p>

<ul>
  <li><strong>Debian</strong>: ‘/usr/lib/cgi-bin’</li>
  <li><strong>FreeBSD</strong>: ‘/usr/local/www/apache24/cgi-bin’</li>
  <li><strong>Gentoo</strong>: ‘var/www/localhost/cgi-bin’</li>
  <li><strong>Red Hat</strong>: ‘/var/www/cgi-bin’</li>
  <li><strong>Suse</strong>: ‘/usr/lib/cgi-bin’</li>
</ul>

<h5 id="access_log_file"><code class="language-plaintext highlighter-rouge">access_log_file</code></h5>

<p>The name of the access log file for the main server instance</p>

<p>The default value is determined by your operating system:</p>

<ul>
  <li><strong>Debian</strong>: ‘error.log’</li>
  <li><strong>FreeBSD</strong>: ‘httpd-access.log’</li>
  <li><strong>Gentoo</strong>: ‘access.log’</li>
  <li><strong>Red Hat</strong>: ‘access_log’</li>
  <li><strong>Suse</strong>: ‘access.log’</li>
</ul>

<h4 id="class-apachedev">Class: <code class="language-plaintext highlighter-rouge">apache::dev</code></h4>

<p>Installs Apache development libraries. By default, the package name is defined by the <a href="#dev_packages"><code class="language-plaintext highlighter-rouge">dev_packages</code></a> parameter of the <a href="#class-apacheparams"><code class="language-plaintext highlighter-rouge">apache::params</code></a> class based on your operating system:</p>

<p>The default value is determined by your operating system:</p>

<ul>
  <li><strong>Debian</strong> : ‘libaprutil1-dev’, ‘libapr1-dev’; ‘apache2-dev’ on Ubuntu 13.10 and Debian 8; ‘apache2-prefork-dev’ on other versions</li>
  <li><strong>FreeBSD</strong>: ‘undef’; see note below</li>
  <li><strong>Gentoo</strong>: ‘undef’</li>
  <li><strong>Red Hat</strong>: ‘httpd-devel’</li>
</ul>

<blockquote>
  <p><strong>Note</strong>: On FreeBSD, you must declare the <code class="language-plaintext highlighter-rouge">apache::package</code> or <code class="language-plaintext highlighter-rouge">apache</code> classes before declaring <code class="language-plaintext highlighter-rouge">apache::dev</code>.</p>
</blockquote>

<h4 id="class-apachevhosts">Class: <code class="language-plaintext highlighter-rouge">apache::vhosts</code></h4>

<p>Creates <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined types.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::vhosts</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">vhosts</code>: A <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_hash.html">hash</a> where the key represents the name and the value represents a <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_hash.html">hash</a> of <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined type’s parameters. Default: ‘{}’</li>
</ul>

<blockquote>
  <p><strong>Note</strong>: See the <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined type’s reference for a list of all virtual host parameters or <a href="#configuring-virtual-hosts">Configuring virtual hosts</a>.</p>
</blockquote>

<p>For example, to create a <a href="https://httpd.apache.org/docs/current/vhosts/name-based.html">name-based virtual host</a> ‘custom_vhost_1, you can declare the class with the <code class="language-plaintext highlighter-rouge">vhosts</code> parameter set to ‘{ “custom_vhost_1” =&gt; { “docroot” =&gt; “/var/www/custom_vhost_1”, “port” =&gt; “81” }’:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'apache::vhosts'</span><span class="p">:</span>
  <span class="py">vhosts</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="s1">'custom_vhost_1'</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="s1">'docroot'</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/custom_vhost_1'</span><span class="p">,</span>
      <span class="s1">'port'</span>    <span class="p">=&gt;</span> <span class="s1">'81'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="classes-apachemodmodule-name">Classes: <code class="language-plaintext highlighter-rouge">apache::mod::&lt;MODULE NAME&gt;</code></h4>

<p>Enables specific <a href="https://httpd.apache.org/docs/current/mod/">Apache modules</a>. You can enable and configure an Apache module by declaring its class. For example, to install and enable <a href="https://httpd.apache.org/docs/current/mod/mod_alias.html"><code class="language-plaintext highlighter-rouge">mod_alias</code></a> with no icons, you can declare the <a href="#class-apachemodalias"><code class="language-plaintext highlighter-rouge">apache::mod::alias</code></a> class with the <code class="language-plaintext highlighter-rouge">icons_options</code> parameter set to ‘None’:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'apache::mod::alias'</span><span class="p">:</span>
  <span class="py">icons_options</span> <span class="p">=&gt;</span> <span class="s1">'None'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The following Apache modules have supported classes, many of which allow for parameterized configuration. You can install other Apache modules with the <a href="#defined-type-apachemod"><code class="language-plaintext highlighter-rouge">apache::mod</code></a> defined type.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">actions</code></li>
  <li><code class="language-plaintext highlighter-rouge">alias</code> (see <a href="#class-apachemodalias"><code class="language-plaintext highlighter-rouge">apache::mod::alias</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">auth_basic</code></li>
  <li><code class="language-plaintext highlighter-rouge">auth_cas</code>* (see <a href="#class-apachemodauth_cas"><code class="language-plaintext highlighter-rouge">apache::mod::auth_cas</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">auth_mellon</code>* (see <a href="#class-apachemodauth_mellon"><code class="language-plaintext highlighter-rouge">apache::mod::auth_mellon</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">auth_kerb</code></li>
  <li><code class="language-plaintext highlighter-rouge">authn_core</code></li>
  <li><code class="language-plaintext highlighter-rouge">authn_dbd</code>* (see <a href="#class-apachemodauthn_dbd"><code class="language-plaintext highlighter-rouge">apache::mod::authn_dbd</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">authn_file</code></li>
  <li><code class="language-plaintext highlighter-rouge">authnz_ldap</code>* (see <a href="#class-apachemodauthnz_ldap"><code class="language-plaintext highlighter-rouge">apache::mod::authnz_ldap</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">authz_default</code></li>
  <li><code class="language-plaintext highlighter-rouge">authz_user</code></li>
  <li><code class="language-plaintext highlighter-rouge">autoindex</code></li>
  <li><code class="language-plaintext highlighter-rouge">cache</code></li>
  <li><code class="language-plaintext highlighter-rouge">cgi</code></li>
  <li><code class="language-plaintext highlighter-rouge">cgid</code></li>
  <li><code class="language-plaintext highlighter-rouge">cluster</code> (see <a href="#class-apachemodcluster"><code class="language-plaintext highlighter-rouge">apache::mod::cluster</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">dav</code></li>
  <li><code class="language-plaintext highlighter-rouge">dav_fs</code></li>
  <li><code class="language-plaintext highlighter-rouge">dav_svn</code>*</li>
  <li><code class="language-plaintext highlighter-rouge">dbd</code></li>
  <li><code class="language-plaintext highlighter-rouge">deflate\</code></li>
  <li><code class="language-plaintext highlighter-rouge">dev</code></li>
  <li><code class="language-plaintext highlighter-rouge">dir</code>*</li>
  <li><code class="language-plaintext highlighter-rouge">disk_cache</code> (see <a href="#class-apachemoddisk_cache"><code class="language-plaintext highlighter-rouge">apache::mod::disk_cache</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">dumpio</code> (see <a href="#class-apachemoddumpio"><code class="language-plaintext highlighter-rouge">apache::mod::dumpio</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">env</code></li>
  <li><code class="language-plaintext highlighter-rouge">event</code> (see <a href="#class-apachemodevent"><code class="language-plaintext highlighter-rouge">apache::mod::event</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">expires</code></li>
  <li><code class="language-plaintext highlighter-rouge">ext_filter</code> (see <a href="#class-apachemodext_filter"><code class="language-plaintext highlighter-rouge">apache::mod::ext_filter</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">fastcgi</code></li>
  <li><code class="language-plaintext highlighter-rouge">fcgid</code></li>
  <li><code class="language-plaintext highlighter-rouge">filter</code></li>
  <li><code class="language-plaintext highlighter-rouge">geoip</code> (see <a href="#class-apachemodgeoip"><code class="language-plaintext highlighter-rouge">apache::mod::geoip</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">headers</code></li>
  <li><code class="language-plaintext highlighter-rouge">include</code></li>
  <li><code class="language-plaintext highlighter-rouge">info</code>*</li>
  <li><code class="language-plaintext highlighter-rouge">itk</code></li>
  <li><code class="language-plaintext highlighter-rouge">ldap</code> (see <a href="#class-apachemodldap"><code class="language-plaintext highlighter-rouge">apache::mod::ldap</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">mime</code></li>
  <li><code class="language-plaintext highlighter-rouge">mime_magic</code>*</li>
  <li><code class="language-plaintext highlighter-rouge">negotiation</code></li>
  <li><code class="language-plaintext highlighter-rouge">nss</code>*</li>
  <li><code class="language-plaintext highlighter-rouge">pagespeed</code> (see [<code class="language-plaintext highlighter-rouge">apache::mod::pagespeed</code>][])</li>
  <li><code class="language-plaintext highlighter-rouge">passenger</code>* (see <a href="#class-apachemodpassenger"><code class="language-plaintext highlighter-rouge">apache::mod::passenger</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">perl</code></li>
  <li><code class="language-plaintext highlighter-rouge">peruser</code></li>
  <li><code class="language-plaintext highlighter-rouge">php</code> (requires <a href="#mpm_module"><code class="language-plaintext highlighter-rouge">mpm_module</code></a> set to <code class="language-plaintext highlighter-rouge">prefork</code>)</li>
  <li><code class="language-plaintext highlighter-rouge">prefork</code>*</li>
  <li><code class="language-plaintext highlighter-rouge">proxy</code>* (see <a href="#class-apachemodproxy"><code class="language-plaintext highlighter-rouge">apache::mod::proxy</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">proxy_ajp</code></li>
  <li><code class="language-plaintext highlighter-rouge">proxy_balancer</code>* (see <a href="#class-apachemodproxybalancer"><code class="language-plaintext highlighter-rouge">apache::mod::proxy_balancer</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">proxy_balancer</code></li>
  <li><code class="language-plaintext highlighter-rouge">proxy_html</code> (see <a href="#class-apachemodproxy_html"><code class="language-plaintext highlighter-rouge">apache::mod::proxy_html</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">proxy_http</code></li>
  <li><code class="language-plaintext highlighter-rouge">python</code></li>
  <li><code class="language-plaintext highlighter-rouge">reqtimeout</code></li>
  <li><code class="language-plaintext highlighter-rouge">remoteip</code>*</li>
  <li><code class="language-plaintext highlighter-rouge">rewrite</code></li>
  <li><code class="language-plaintext highlighter-rouge">rpaf</code>*</li>
  <li><code class="language-plaintext highlighter-rouge">setenvif</code></li>
  <li><code class="language-plaintext highlighter-rouge">security</code></li>
  <li><code class="language-plaintext highlighter-rouge">shib</code>* (see <a href="#class-apachemodshib"><code class="language-plaintext highlighter-rouge">apache::mod::shib</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">speling</code></li>
  <li><code class="language-plaintext highlighter-rouge">ssl</code>* (see <a href="#class-apachemodssl"><code class="language-plaintext highlighter-rouge">apache::mod::ssl</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">status</code>* (see <a href="#class-apachemodstatus"><code class="language-plaintext highlighter-rouge">apache::mod::status</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">suphp</code></li>
  <li><code class="language-plaintext highlighter-rouge">userdir</code>*</li>
  <li><code class="language-plaintext highlighter-rouge">version</code></li>
  <li><code class="language-plaintext highlighter-rouge">vhost_alias</code></li>
  <li><code class="language-plaintext highlighter-rouge">worker</code>*</li>
  <li><code class="language-plaintext highlighter-rouge">wsgi</code> (see <a href="#class-apachemodwsgi"><code class="language-plaintext highlighter-rouge">apache::mod::wsgi</code></a>)</li>
  <li><code class="language-plaintext highlighter-rouge">xsendfile</code></li>
</ul>

<p>Modules noted with a * indicate that the module has settings and a template that includes parameters to configure the module. Most Apache module class parameters have default values and don’t require configuration. For modules with templates, Puppet installs template files with the module; these template files are required for the module to work.</p>

<h5 id="class-apachemodalias">Class: <code class="language-plaintext highlighter-rouge">apache::mod::alias</code></h5>

<p>Installs and manages <a href="https://httpd.apache.org/docs/current/mod/mod_alias.html"><code class="language-plaintext highlighter-rouge">mod_alias</code></a>.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::alias</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">icons_options</code>: Disables directory listings for the icons directory, via Apache <a href="https://httpd.apache.org/docs/current/mod/core.html#options"><code class="language-plaintext highlighter-rouge">Options</code></a> directive. Default: ‘Indexes MultiViews’.</li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">icons_path</code>: Sets the local path for an <code class="language-plaintext highlighter-rouge">/icons/</code> Alias. Default: depends on your operating system.</p>
  </li>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/usr/share/apache2/icons</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/usr/local/www/apache24/icons</code></li>
  <li><strong>Gentoo</strong>: <code class="language-plaintext highlighter-rouge">/var/www/icons</code></li>
  <li><strong>Red Hat</strong>: <code class="language-plaintext highlighter-rouge">/var/www/icons</code>, except on Apache 2.4, where it’s <code class="language-plaintext highlighter-rouge">/usr/share/httpd/icons</code></li>
</ul>

<h4 id="class-apachemoddisk_cache">Class: <code class="language-plaintext highlighter-rouge">apache::mod::disk_cache</code></h4>

<p>Installs and configures <a href="https://httpd.apache.org/docs/2.2/mod/mod_disk_cache.html"><code class="language-plaintext highlighter-rouge">mod_disk_cache</code></a> on Apache 2.2, or [<code class="language-plaintext highlighter-rouge">mod_cache_disk</code>][] on Apache 2.4. The default cache root depends on the Apache version and operating system:</p>

<ul>
  <li><strong>Debian</strong>: <code class="language-plaintext highlighter-rouge">/var/cache/apache2/mod_cache_disk</code></li>
  <li><strong>FreeBSD</strong>: <code class="language-plaintext highlighter-rouge">/var/cache/mod_cache_disk</code></li>
  <li><strong>Red Hat, Apache 2.4</strong>: <code class="language-plaintext highlighter-rouge">/var/cache/httpd/proxy</code></li>
  <li><strong>Red Hat, Apache 2.2</strong>: <code class="language-plaintext highlighter-rouge">/var/cache/mod_proxy</code></li>
</ul>

<p>You can specify the cache root by passing a path as a string to the <code class="language-plaintext highlighter-rouge">cache_root</code> parameter.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span><span class="s1">'::apache::mod::disk_cache'</span><span class="p">:</span>
  <span class="py">cache_root</span> <span class="p">=&gt;</span> <span class="s1">'/path/to/cache'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>
<h5 id="class-apachemoddiskio">Class: <code class="language-plaintext highlighter-rouge">apache::mod::diskio</code></h5>

<p>Installs and configures [<code class="language-plaintext highlighter-rouge">mod_diskio</code>][].</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span><span class="p">{</span><span class="s1">'apache'</span><span class="p">:</span>
  <span class="py">default_mods</span> <span class="p">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
  <span class="py">log_level</span>    <span class="p">=&gt;</span> <span class="s1">'dumpio:trace7'</span><span class="p">,</span>
<span class="p">}</span>
<span class="k">class</span><span class="p">{</span><span class="s1">'apache::mod::diskio'</span><span class="p">:</span>
  <span class="py">disk_io_input</span>  <span class="p">=&gt;</span> <span class="s1">'On'</span><span class="p">,</span>
  <span class="py">disk_io_output</span> <span class="p">=&gt;</span> <span class="s1">'Off'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Parameters withing <code class="language-plaintext highlighter-rouge">apache::mod::diskio</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">dump_io_input</code>: Dump all input data to the error log. Must be <code class="language-plaintext highlighter-rouge">On</code> or <code class="language-plaintext highlighter-rouge">Off</code>, defaults to <code class="language-plaintext highlighter-rouge">Off</code></li>
  <li><code class="language-plaintext highlighter-rouge">dump_io_output</code>: Dump all output data to the error log. Must be <code class="language-plaintext highlighter-rouge">On</code> or <code class="language-plaintext highlighter-rouge">Off</code>, defaults to <code class="language-plaintext highlighter-rouge">Off</code></li>
</ul>

<h5 id="class-apachemodevent">Class: <code class="language-plaintext highlighter-rouge">apache::mod::event</code></h5>

<p>Installs and manages <a href="https://httpd.apache.org/docs/current/mod/event.html"><code class="language-plaintext highlighter-rouge">mod_mpm_event</code></a>. You can’t include both <code class="language-plaintext highlighter-rouge">apache::mod::event</code> and <a href="#class-apachemoditk"><code class="language-plaintext highlighter-rouge">apache::mod::itk</code></a>, <a href="#class-apachemodperuser"><code class="language-plaintext highlighter-rouge">apache::mod::peruser</code></a>, <a href="#class-apachemodprefork"><code class="language-plaintext highlighter-rouge">apache::mod::prefork</code></a>, or <a href="#class-apachemodworker"><code class="language-plaintext highlighter-rouge">apache::mod::worker</code></a> on the same server.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::event</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">listenbacklog</code>: Sets the maximum length of the pending connections queue via the module’s <a href="https://httpd.apache.org/docs/current/mod/mpm_common.html#listenbacklog"><code class="language-plaintext highlighter-rouge">ListenBackLog</code></a> directive. Default: ‘511’. Setting this to ‘false’ removes the parameter.</li>
  <li><code class="language-plaintext highlighter-rouge">maxrequestworkers</code> (<em>Apache 2.3.12 or older</em>: <code class="language-plaintext highlighter-rouge">maxclients</code>): Sets the maximum number of connections Apache can simultaneously process, via the module’s <a href="https://httpd.apache.org/docs/current/mod/mpm_common.html#maxrequestworkers"><code class="language-plaintext highlighter-rouge">MaxRequestWorkers</code></a> directive. Default: ‘150’. Setting these to ‘false’ removes the parameters.</li>
  <li><code class="language-plaintext highlighter-rouge">maxconnectionsperchild</code> (<em>Apache 2.3.8 or older</em>: <code class="language-plaintext highlighter-rouge">maxrequestsperchild</code>): Limits the number of connections a child server handles during its life, via the module’s <a href="https://httpd.apache.org/docs/current/mod/mpm_common.html#maxconnectionsperchild"><code class="language-plaintext highlighter-rouge">MaxConnectionsPerChild</code></a> directive. Default: ‘0’. Setting these to ‘false’ removes the parameters.</li>
  <li><code class="language-plaintext highlighter-rouge">maxsparethreads</code> and <code class="language-plaintext highlighter-rouge">minsparethreads</code>: Sets the maximum and minimum number of idle threads, via the <a href="https://httpd.apache.org/docs/current/mod/mpm_common.html#maxsparethreads"><code class="language-plaintext highlighter-rouge">MaxSpareThreads</code></a> and <a href="https://httpd.apache.org/docs/current/mod/mpm_common.html#minsparethreads"><code class="language-plaintext highlighter-rouge">MinSpareThreads</code></a> directives. Default: ‘75’ and ‘25’, respectively. Setting these to ‘false’ removes the parameters.</li>
  <li><code class="language-plaintext highlighter-rouge">serverlimit</code>: Limits the configurable number of processes via the <a href="https://httpd.apache.org/docs/current/mod/mpm_common.html#serverlimit"><code class="language-plaintext highlighter-rouge">ServerLimit</code></a> directive. Default: ‘25’. Setting this to ‘false’ removes the parameter.</li>
  <li><code class="language-plaintext highlighter-rouge">startservers</code>: Sets the number of child server processes created at startup, via the module’s <a href="https://httpd.apache.org/docs/current/mod/mpm_common.html#startservers"><code class="language-plaintext highlighter-rouge">StartServers</code></a> directive. Default: ‘2’. Setting this to ‘false’ removes the parameter.</li>
  <li><code class="language-plaintext highlighter-rouge">threadlimit</code>: Limits the number of event threads via the module’s <a href="https://httpd.apache.org/docs/current/mod/mpm_common.html#threadlimit"><code class="language-plaintext highlighter-rouge">ThreadLimit</code></a> directive. Default: ‘64’. Setting this to ‘false’ removes the parameter.</li>
  <li><code class="language-plaintext highlighter-rouge">threadsperchild</code>: Sets the number of threads created by each child process, via the <a href="https://httpd.apache.org/docs/current/mod/mpm_common.html#threadsperchild"><code class="language-plaintext highlighter-rouge">ThreadsPerChild</code></a> directive. Default: ‘25’. Setting this to ‘false’ removes the parameter.</li>
</ul>

<h5 id="class-apachemodauth_cas">Class: <code class="language-plaintext highlighter-rouge">apache::mod::auth_cas</code></h5>

<p>Installs and manages <a href="https://github.com/Jasig/mod_auth_cas"><code class="language-plaintext highlighter-rouge">mod_auth_cas</code></a>. Its parameters share names with the Apache module’s directives.</p>

<p>The <code class="language-plaintext highlighter-rouge">cas_login_url</code> and <code class="language-plaintext highlighter-rouge">cas_validate_url</code> parameters are required; several other parameters have ‘undef’ default values.</p>

<p><strong>Note</strong>: The auth_cas module isn’t available on RH/CentOS without providing dependency packages provided by EPEL. See <a href="">https://github.com/Jasig/mod_auth_cas</a></p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::auth_cas</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">cas_attribute_prefix</code>: Adds a header with the value of this header being the attribute values when SAML
validation is enabled. Default: CAS_</li>
  <li><code class="language-plaintext highlighter-rouge">cas_attribute_delimiter</code>: The delimiter between attribute values in the header created by <code class="language-plaintext highlighter-rouge">cas_attribute_prefix</code>.
Default: ,</li>
  <li><code class="language-plaintext highlighter-rouge">cas_authoritative</code>: Determines whether an optional authorization directive is authoritative and binding. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_certificate_path</code>: Sets the path to the X509 certificate of the Certificate Authority for the server in <code class="language-plaintext highlighter-rouge">cas_login_url</code> and <code class="language-plaintext highlighter-rouge">cas_validate_url</code>. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_cache_clean_interval</code>: Sets the minimum number of seconds that must pass between cache cleanings. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_cookie_domain</code>: Sets the value of the <code class="language-plaintext highlighter-rouge">Domain=</code> parameter in the <code class="language-plaintext highlighter-rouge">Set-Cookie</code> HTTP header. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_cookie_entropy</code>: Sets the number of bytes to use when creating session identifiers. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_cookie_http_only</code>: Sets the optional <code class="language-plaintext highlighter-rouge">HttpOnly</code> flag when <code class="language-plaintext highlighter-rouge">mod_auth_cas</code> issues cookies. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_cookie_path</code>: Where cas cookie session data is stored. Should be writable by web server user. Default: OS dependent.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_cookie_path_mode</code>: The mode of <code class="language-plaintext highlighter-rouge">cas_cookie_path</code>. Default: ‘0750’.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_debug</code>: Determines whether to enable the module’s debugging mode. Default: ‘Off’.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_idle_timeout</code>: Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_login_url</code>: <strong>Required</strong>. Sets the URL to which the module redirects users when they attempt to access a CAS-protected resource and don’t have an active session.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_proxy_validate_url</code>: The URL to use when performing a proxy validation. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_root_proxied_as</code>: Sets the URL end users see when access to this Apache server is proxied. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_scrub_request_headers</code>: Remove inbound request headers that may have special meaning within mod_auth_cas.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_sso_enabled</code>: Enables experimental support for single sign out (may mangle POST data). Default: off</li>
  <li><code class="language-plaintext highlighter-rouge">cas_timeout</code>: Limits the number of seconds a <code class="language-plaintext highlighter-rouge">mod_auth_cas</code> session can remain active. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_validate_depth</code>: Limits the depth for chained certificate validation. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_validate_saml</code>: Parse response from CAS server for SAML. Default: Off</li>
  <li><code class="language-plaintext highlighter-rouge">cas_validate_server</code>: Should we validate the cert of the CAS server (depreciated in 1.1 - RedHat 7). Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_validate_url</code>: <strong>Required</strong>. Sets the URL to use when validating a client-presented ticket in an HTTP query string.</li>
  <li><code class="language-plaintext highlighter-rouge">cas_version</code>: The CAS protocol version to adhere to. Valid options: ‘1’, ‘2’. Default: ‘2’.</li>
  <li><code class="language-plaintext highlighter-rouge">suppress_warning</code>: Don’t wine about being on RedHat (Hint: mod_auth_cas package is now available in epel-testing repo). Default: false.</li>
</ul>

<h5 id="class-apachemodauth_mellon">Class: <code class="language-plaintext highlighter-rouge">apache::mod::auth_mellon</code></h5>

<p>Installs and manages <a href="https://github.com/UNINETT/mod_auth_mellon"><code class="language-plaintext highlighter-rouge">mod_auth_mellon</code></a>. Its parameters share names with the Apache module’s directives.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span><span class="p">{</span> <span class="s1">'apache::mod::auth_mellon'</span><span class="p">:</span>
  <span class="py">mellon_cache_size</span> <span class="p">=&gt;</span> <span class="m">101</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::auth_mellon</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">mellon_cache_entry_size</code>: Maximum size for a single session. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_cache_size</code>: Size in megabytes of the mellon cache. Default: 100.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_lock_file</code>: Location of lock file. Default: ‘<code class="language-plaintext highlighter-rouge">/run/mod_auth_mellon/lock</code>’.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_post_directory</code>: Full path where post requests are saved. Default: ‘<code class="language-plaintext highlighter-rouge">/var/cache/apache2/mod_auth_mellon/</code>’</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_post_ttl</code>: Time to keep post requests. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_post_size</code>: Maximum size of post requests. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_post_count</code>: Maximum number of post requests. Default: undef.</li>
</ul>

<h5 id="class-apachemodauthn_dbd">Class: <code class="language-plaintext highlighter-rouge">apache::mod::authn_dbd</code></h5>

<p>Installs <code class="language-plaintext highlighter-rouge">mod_authn_dbd</code> and uses <code class="language-plaintext highlighter-rouge">authn_dbd.conf.erb</code> template to generate its configuration.  Optionally creates AuthnProviderAlias.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'apache::mod::authn_dbd'</span><span class="p">:</span>
  <span class="nv">$authn_dbd_params</span> <span class="p">=&gt;</span>
    <span class="s1">'host=db01 port=3306 user=apache password=xxxxxx dbname=apacheauth'</span><span class="p">,</span>
  <span class="nv">$authn_dbd_query</span>  <span class="p">=&gt;</span> <span class="s1">'SELECT password FROM authn WHERE user = %s'</span><span class="p">,</span>
  <span class="nv">$authn_dbd_alias</span>  <span class="p">=&gt;</span> <span class="s1">'db_auth'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>** Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::authn_dbd</code></p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">authn_dbd_alias</code>: Name for the AuthnProviderAlias.</li>
  <li><code class="language-plaintext highlighter-rouge">authn_dbd_dbdriver</code>: Which db driver to use.  Default: mysql.</li>
  <li><code class="language-plaintext highlighter-rouge">authn_dbd_exptime</code>: corresponds to DBDExptime.  Default: 300.</li>
  <li><code class="language-plaintext highlighter-rouge">authn_dbd_keep</code>: corresponds to DBDKeep.  Default: 8.</li>
  <li><code class="language-plaintext highlighter-rouge">authn_dbd_max</code>: corresponds to DBDMax.  Default: 20.</li>
  <li><code class="language-plaintext highlighter-rouge">authn_dbd_min</code>: corresponds to DBDMin.  Default: 4.</li>
  <li><code class="language-plaintext highlighter-rouge">authn_dbd_params</code>: <strong>Required</strong>. Corresponds to DBDParams for the connection string.</li>
  <li><code class="language-plaintext highlighter-rouge">authn_dbd_query</code>: is the query used to test a user and password for authentication.</li>
</ul>

<h5 id="class-apachemodauthnz_ldap">Class: <code class="language-plaintext highlighter-rouge">apache::mod::authnz_ldap</code></h5>

<p>Installs <code class="language-plaintext highlighter-rouge">mod_authnz_ldap</code> and uses the <code class="language-plaintext highlighter-rouge">authnz_ldap.conf.erb</code> template to generate its configuration.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::authnz_ldap</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">package_name</code>: Default: <code class="language-plaintext highlighter-rouge">undef</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">verify_server_cert</code>: Default: <code class="language-plaintext highlighter-rouge">undef</code>.</li>
</ul>

<h5 id="class-apachemodcluster">Class: <code class="language-plaintext highlighter-rouge">apache::mod::cluster</code></h5>

<p><strong>Note</strong>: There is no official package available for mod_cluster and thus it must be made available by means outside of the control of the apache module. Binaries can be found at http://mod-cluster.jboss.org/</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'::apache::mod::cluster'</span><span class="p">:</span>
  <span class="py">ip</span>                      <span class="p">=&gt;</span> <span class="s1">'172.17.0.1'</span><span class="p">,</span>
  <span class="py">allowed_network</span>         <span class="p">=&gt;</span> <span class="s1">'172.17.0.'</span><span class="p">,</span>
  <span class="py">balancer_name</span>           <span class="p">=&gt;</span> <span class="s1">'mycluster'</span><span class="p">,</span>
  <span class="py">version</span>                 <span class="p">=&gt;</span> <span class="s1">'1.3.1'</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::cluster</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">port</code>: mod_cluster listen port. Default: ‘6666’.</li>
  <li><code class="language-plaintext highlighter-rouge">server_advertise</code>: Whether the server should advertise. Default: true.</li>
  <li><code class="language-plaintext highlighter-rouge">manager_allowed_network</code>: Network allowed to access the mod_cluster_manager. Default: ‘127.0.0.1’.</li>
  <li><code class="language-plaintext highlighter-rouge">keep_alive_timeout</code>: Keep-alive timeout. Default: 60.</li>
  <li><code class="language-plaintext highlighter-rouge">max_keep_alive_requests</code>: Max number of requests kept alive. Default: 0</li>
  <li><code class="language-plaintext highlighter-rouge">enable_mcpm_receive</code>: Whether MCPM should be enabled: Default: true.</li>
  <li><code class="language-plaintext highlighter-rouge">ip</code>: Listen ip address..</li>
  <li><code class="language-plaintext highlighter-rouge">allowed_network</code>: Balanced members network.</li>
  <li><code class="language-plaintext highlighter-rouge">version</code>: mod_cluster version. &gt;= 1.3.0 is required for httpd 2.4.</li>
</ul>

<h5 id="class-apachemoddeflate">Class: <code class="language-plaintext highlighter-rouge">apache::mod::deflate</code></h5>

<p>Installs and configures [<code class="language-plaintext highlighter-rouge">mod_deflate</code>][].</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::deflate</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">types</code>: An <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> of <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">MIME types</a> to be deflated. Default: [ ‘text/html text/plain text/xml’, ‘text/css’, ‘application/x-javascript application/javascript application/ecmascript’, ‘application/rss+xml’, ‘application/json’ ].</li>
  <li><code class="language-plaintext highlighter-rouge">notes</code>: A <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_hash.html">Hash</a> where the key represents the type and the value represents the note name. Default: { ‘Input’  =&gt; ‘instream’, ‘Output’ =&gt; ‘outstream’, ‘Ratio’  =&gt; ‘ratio’ }</li>
</ul>

<h5 id="class-apachemodexpires">Class: <code class="language-plaintext highlighter-rouge">apache::mod::expires</code></h5>

<p>Installs <a href="https://httpd.apache.org/docs/current/mod/mod_expires.html"><code class="language-plaintext highlighter-rouge">mod_expires</code></a> and uses the <code class="language-plaintext highlighter-rouge">expires.conf.erb</code> template to generate its configuration.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::expires</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">expires_active</code>: Enables generation of <code class="language-plaintext highlighter-rouge">Expires</code> headers for a document realm. Valid options: Boolean. Default: true.</li>
  <li><code class="language-plaintext highlighter-rouge">expires_default</code>: Default algorithm for calculating expiration time using <a href="https://httpd.apache.org/docs/current/mod/mod_expires.html#expiresbytype"><code class="language-plaintext highlighter-rouge">ExpiresByType</code></a> syntax or <a href="https://httpd.apache.org/docs/current/mod/mod_expires.html#AltSyn">interval syntax</a>. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">expires_by_type</code>: Describes a set of <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">MIME <code class="language-plaintext highlighter-rouge">content-type</code></a> and their expiration times. Valid options: An <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> of <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_hash.html">Hashes</a>, with each Hash’s key a valid MIME <code class="language-plaintext highlighter-rouge">content-type</code> (i.e. ‘text/json’) and its value following valid <a href="https://httpd.apache.org/docs/current/mod/mod_expires.html#AltSyn">interval syntax</a>. Default: undef.</li>
</ul>

<h5 id="class-apachemodext_filter">Class: <code class="language-plaintext highlighter-rouge">apache::mod::ext_filter</code></h5>

<p>Installs and configures <a href="https://httpd.apache.org/docs/current/mod/mod_ext_filter.html"><code class="language-plaintext highlighter-rouge">mod_ext_filter</code></a>.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'apache::mod::ext_filter'</span><span class="p">:</span>
  <span class="py">ext_filter_define</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="s1">'slowdown'</span>       <span class="p">=&gt;</span> <span class="s1">'mode=output cmd=/bin/cat preservescontentlength'</span><span class="p">,</span>
    <span class="s1">'puppetdb-strip'</span> <span class="p">=&gt;</span> <span class="s1">'mode=output outtype=application/json cmd="pdb-resource-filter"'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::ext_filter</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ext_filter_define</code>: A hash of filter names and their parameters. Default: undef.</li>
</ul>

<h5 id="class-apachemodfcgid">Class: <code class="language-plaintext highlighter-rouge">apache::mod::fcgid</code></h5>

<p>Installs and configures <a href="https://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html"><code class="language-plaintext highlighter-rouge">mod_fcgid</code></a>.</p>

<p>The class makes no effort to individually parameterize all available options. Instead, configure <code class="language-plaintext highlighter-rouge">mod_fcgid</code> using the <code class="language-plaintext highlighter-rouge">options</code> <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_hash.html">hash</a>. For example:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'apache::mod::fcgid'</span><span class="p">:</span>
  <span class="py">options</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="s1">'FcgidIPCDir'</span>  <span class="p">=&gt;</span> <span class="s1">'/var/run/fcgidsock'</span><span class="p">,</span>
    <span class="s1">'SharememPath'</span> <span class="p">=&gt;</span> <span class="s1">'/var/run/fcgid_shm'</span><span class="p">,</span>
    <span class="s1">'AddHandler'</span>   <span class="p">=&gt;</span> <span class="s1">'fcgid-script .fcgi'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>For a full list of options, see the <a href="https://httpd.apache.org/mod_fcgid/mod/mod_fcgid.html">official <code class="language-plaintext highlighter-rouge">mod_fcgid</code> documentation</a>.</p>

<p>If you include <code class="language-plaintext highlighter-rouge">apache::mod::fcgid</code>, you can set the [<code class="language-plaintext highlighter-rouge">FcgidWrapper</code>][] per directory, per virtual host. The module must be loaded first; Puppet will not automatically enable it if you set the <code class="language-plaintext highlighter-rouge">fcgiwrapper</code> parameter in <code class="language-plaintext highlighter-rouge">apache::vhost</code>.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">include</span> <span class="nc">apache::mod::fcgid</span>

<span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'example.org'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/var/www/html'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="py">path</span>        <span class="p">=&gt;</span> <span class="s1">'/var/www/html'</span><span class="p">,</span>
    <span class="py">fcgiwrapper</span> <span class="p">=&gt;</span> <span class="p">{</span>
      <span class="py">command</span> <span class="p">=&gt;</span> <span class="s1">'/usr/local/bin/fcgiwrapper'</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="class-apachemodgeoip">Class: <code class="language-plaintext highlighter-rouge">apache::mod::geoip</code></h5>

<p>Installs and manages <a href="http://dev.maxmind.com/geoip/legacy/mod_geoip2/"><code class="language-plaintext highlighter-rouge">mod_geoip</code></a>.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::geoip</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">db_file</code>: Sets the path to your GeoIP database file. Valid options: a path, or an <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> paths for multiple GeoIP database files. Default: <code class="language-plaintext highlighter-rouge">/usr/share/GeoIP/GeoIP.dat</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">enable</code>: Determines whether to globally enable <a href="http://dev.maxmind.com/geoip/legacy/mod_geoip2/"><code class="language-plaintext highlighter-rouge">mod_geoip</code></a>. Valid options: Boolean. Default: false.</li>
  <li><code class="language-plaintext highlighter-rouge">flag</code>: Sets the GeoIP flag. Valid options: ‘CheckCache’, ‘IndexCache’, ‘MemoryCache’, ‘Standard’. Default: ‘Standard’.</li>
  <li><code class="language-plaintext highlighter-rouge">output</code>: Defines which output variables to use. Valid options: ‘All’, ‘Env’, ‘Request’, ‘Notes’. Default: ‘All’.</li>
  <li><code class="language-plaintext highlighter-rouge">enable_utf8</code>: Changes the output from ISO-8859-1 (Latin-1) to UTF-8. Valid options: Boolean. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">scan_proxy_headers</code>: Enables the <a href="http://dev.maxmind.com/geoip/legacy/mod_geoip2/#Proxy-Related_Directives">GeoIPScanProxyHeaders</a> option. Valid options: Boolean. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">scan_proxy_header_field</code>: Specifies which header <a href="http://dev.maxmind.com/geoip/legacy/mod_geoip2/"><code class="language-plaintext highlighter-rouge">mod_geoip</code></a> should look at to determine the client’s IP address. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">use_last_xforwarededfor_ip</code> (sic): Determines whether to use the first or last IP address for the client’s IP if a comma-separated list of IP addresses is found. Valid options: Boolean. Default: undef.</li>
</ul>

<h5 id="class-apachemodinfo">Class: <code class="language-plaintext highlighter-rouge">apache::mod::info</code></h5>

<p>Installs and manages <a href="https://httpd.apache.org/docs/current/mod/mod_info.html"><code class="language-plaintext highlighter-rouge">mod_info</code></a>, which provides a comprehensive overview of the server configuration.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::info</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">allow_from</code>: Whitelist of IPv4 or IPv6 addresses or ranges that can access <code class="language-plaintext highlighter-rouge">/server-info</code>. Valid options: One or more octets of an IPv4 address, an IPv6 address or range, or an array of either. Default: [‘127.0.0.1’,’::1’].</li>
  <li><code class="language-plaintext highlighter-rouge">apache_version</code>: Apache’s version number as a string, such as ‘2.2’ or ‘2.4’. Default: the value of <a href="#apache_version"><code class="language-plaintext highlighter-rouge">$::apache::apache_version</code></a>.</li>
  <li><code class="language-plaintext highlighter-rouge">restrict_access</code>: Determines whether to enable access restrictions. If false, the <code class="language-plaintext highlighter-rouge">allow_from</code> whitelist is ignored and any IP address can access <code class="language-plaintext highlighter-rouge">/server-info</code>. Valid options: Boolean. Default: true.</li>
</ul>

<h5 id="class-apachemodpassenger">Class: <code class="language-plaintext highlighter-rouge">apache::mod::passenger</code></h5>

<p>Installs and manages <a href="https://www.phusionpassenger.com/library/config/apache/reference/"><code class="language-plaintext highlighter-rouge">mod_passenger</code></a>. For RedHat based systems, please ensure that you meet the minimum requirements as described in the <a href="https://www.phusionpassenger.com/library/install/apache/install/oss/el6/#step-1:-upgrade-your-kernel,-or-disable-selinux">passenger docs</a></p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::passenger</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">passenger_high_performance</code> Sets the <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerhighperformance"><code class="language-plaintext highlighter-rouge">PassengerHighPerformance</code></a>. Valid options: ‘on’, ‘off’. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">passenger_pool_idle_time</code> Sets the <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerpoolidletime"><code class="language-plaintext highlighter-rouge">PassengerPoolIdleTime</code></a>. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">passenger_max_pool_size</code> Sets the <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengermaxpoolsize"><code class="language-plaintext highlighter-rouge">PassengerMaxPoolSize</code></a>. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">passenger_max_request_queue_size</code> Sets the <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengermaxrequestqueuesize"><code class="language-plaintext highlighter-rouge">PassengerMaxRequestQueueSize</code></a>. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">passenger_max_requests</code> Sets the <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengermaxrequests"><code class="language-plaintext highlighter-rouge">PassengerMaxRequests</code></a>. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">passenger_data_buffer_dir</code> Sets the <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerdatabufferdir"><code class="language-plaintext highlighter-rouge">PassengerDataBufferDir</code></a>. Default: undef.</li>
</ul>

<h5 id="class-apachemodldap">Class: <code class="language-plaintext highlighter-rouge">apache::mod::ldap</code></h5>

<p>Installs and configures <a href="https://httpd.apache.org/docs/2.2/mod/mod_ldap.html"><code class="language-plaintext highlighter-rouge">mod_ldap</code></a>, and allows you to modify the
<a href="https://httpd.apache.org/docs/current/mod/mod_ldap.html#ldaptrustedglobalcert"><code class="language-plaintext highlighter-rouge">LDAPTrustedGlobalCert</code></a> Directive:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'apache::mod::ldap'</span><span class="p">:</span>
  <span class="py">ldap_trusted_global_cert_file</span> <span class="p">=&gt;</span> <span class="s1">'/etc/pki/tls/certs/ldap-trust.crt'</span><span class="p">,</span>
  <span class="py">ldap_trusted_global_cert_type</span> <span class="p">=&gt;</span> <span class="s1">'CA_DER'</span><span class="p">,</span>
  <span class="py">ldap_shared_cache_size</span>        <span class="p">=&gt;</span> <span class="s1">'500000'</span><span class="p">,</span>
  <span class="py">ldap_cache_entries</span>            <span class="p">=&gt;</span> <span class="s1">'1024'</span><span class="p">,</span>
  <span class="py">ldap_cache_ttl</span>                <span class="p">=&gt;</span> <span class="s1">'600'</span><span class="p">,</span>
  <span class="py">ldap_opcache_entries</span>          <span class="p">=&gt;</span> <span class="s1">'1024'</span><span class="p">,</span>
  <span class="py">ldap_opcache_ttl</span>              <span class="p">=&gt;</span> <span class="s1">'600'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::ldap</code>:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">apache_version</code>: The installed Apache version. Defaults to <code class="language-plaintext highlighter-rouge">undef</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">ldap_trusted_global_cert_file</code>: Path and file name of the trusted CA certificates to use when establishing SSL or TLS connections to an LDAP server.</li>
  <li><code class="language-plaintext highlighter-rouge">ldap_trusted_global_cert_type</code>: The global trust certificate format. Default: ‘CA_BASE64’.</li>
  <li><code class="language-plaintext highlighter-rouge">ldap_shared_cache_size</code>: Size in bytes of the shared-memory cache.</li>
  <li><code class="language-plaintext highlighter-rouge">ldap_cache_entries</code>: Maximum number of entries in the primary LDAP cache.</li>
  <li><code class="language-plaintext highlighter-rouge">ldap_cache_ttl</code>: Time that cached items remain valid.</li>
  <li><code class="language-plaintext highlighter-rouge">ldap_opcache_entries</code>: Number of entries used to cache LDAP compare operations.</li>
  <li><code class="language-plaintext highlighter-rouge">ldap_opcache_ttl</code>: Time that entries in the operation cache remain valid.</li>
  <li><code class="language-plaintext highlighter-rouge">package_name</code>: Custom package name. Defaults to <code class="language-plaintext highlighter-rouge">undef</code>.</li>
</ul>

<h5 id="class-apachemodnegotiation">Class: <code class="language-plaintext highlighter-rouge">apache::mod::negotiation</code></h5>

<p>Installs and configures <a href="https://httpd.apache.org/docs/current/mod/mod_negotiation.html"><code class="language-plaintext highlighter-rouge">mod_negotiation</code></a>.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::negotiation</code>:</strong></p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">force_language_priority</code>: Sets the <code class="language-plaintext highlighter-rouge">ForceLanguagePriority</code> option. Valid option: String. Default: <code class="language-plaintext highlighter-rouge">Prefer Fallback</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">language_priority</code>: An <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> of languages to set the <code class="language-plaintext highlighter-rouge">LanguagePriority</code> option of the module. Default: [ ‘en’, ‘ca’, ‘cs’, ‘da’, ‘de’, ‘el’, ‘eo’, ‘es’, ‘et’, ‘fr’, ‘he’, ‘hr’, ‘it’, ‘ja’, ‘ko’, ‘ltz’, ‘nl’, ‘nn’, ‘no’, ‘pl’, ‘pt’, ‘pt-BR’, ‘ru’, ‘sv’, ‘zh-CN’, ‘zh-TW’ ]</li>
</ul>

<h5 id="class-apachemodpagespeed">Class: <code class="language-plaintext highlighter-rouge">apache::mod::pagespeed</code></h5>

<p>Installs and manages <a href="https://developers.google.com/speed/pagespeed/module/?hl=en"><code class="language-plaintext highlighter-rouge">mod_pagespeed</code></a>, a Google module that rewrites web pages to reduce latency and bandwidth.</p>

<p>While this Apache module requires the <code class="language-plaintext highlighter-rouge">mod-pagespeed-stable</code> package, Puppet <strong>doesn’t</strong> manage the software repositories required to automatically install the package. If you declare this class when the package is either not installed or not available to your package manager, your Puppet run will fail.</p>

<p><strong>Note:</strong> Verify that your system is compatible with the latest Google Pagespeed requirements.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::pagespeed</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">inherit_vhost_config</code>: Default: ‘on’.</li>
  <li><code class="language-plaintext highlighter-rouge">filter_xhtml</code>: Default: false.</li>
  <li><code class="language-plaintext highlighter-rouge">cache_path</code>: Default: ‘/var/cache/mod_pagespeed/’.</li>
  <li><code class="language-plaintext highlighter-rouge">log_dir</code>: Default: ‘/var/log/pagespeed’.</li>
  <li><code class="language-plaintext highlighter-rouge">memcache_servers</code>: Default: [].</li>
  <li><code class="language-plaintext highlighter-rouge">rewrite_level</code>: Default: ‘CoreFilters’.</li>
  <li><code class="language-plaintext highlighter-rouge">disable_filters</code>: Default: [].</li>
  <li><code class="language-plaintext highlighter-rouge">enable_filters</code>: Default: [].</li>
  <li><code class="language-plaintext highlighter-rouge">forbid_filters</code>: Default: [].</li>
  <li><code class="language-plaintext highlighter-rouge">rewrite_deadline_per_flush_ms</code>: Default: 10.</li>
  <li><code class="language-plaintext highlighter-rouge">additional_domains</code>: Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">file_cache_size_kb</code>: Default: 102400.</li>
  <li><code class="language-plaintext highlighter-rouge">file_cache_clean_interval_ms</code>: Default: 3600000.</li>
  <li><code class="language-plaintext highlighter-rouge">lru_cache_per_process</code>: Default: 1024.</li>
  <li><code class="language-plaintext highlighter-rouge">lru_cache_byte_limit</code>: Default: 16384.</li>
  <li><code class="language-plaintext highlighter-rouge">css_flatten_max_bytes</code>: Default: 2048.</li>
  <li><code class="language-plaintext highlighter-rouge">css_inline_max_bytes</code>: Default: 2048.</li>
  <li><code class="language-plaintext highlighter-rouge">css_image_inline_max_bytes</code>: Default: 2048.</li>
  <li><code class="language-plaintext highlighter-rouge">image_inline_max_bytes</code>: Default: 2048.</li>
  <li><code class="language-plaintext highlighter-rouge">js_inline_max_bytes</code>: Default: 2048.</li>
  <li><code class="language-plaintext highlighter-rouge">css_outline_min_bytes</code>: Default: 3000.</li>
  <li><code class="language-plaintext highlighter-rouge">js_outline_min_bytes</code>: Default: 3000.</li>
  <li><code class="language-plaintext highlighter-rouge">inode_limit</code>: Default: 500000.</li>
  <li><code class="language-plaintext highlighter-rouge">image_max_rewrites_at_once</code>: Default: 8.</li>
  <li><code class="language-plaintext highlighter-rouge">num_rewrite_threads</code>: Default: 4.</li>
  <li><code class="language-plaintext highlighter-rouge">num_expensive_rewrite_threads</code>: Default: 4.</li>
  <li><code class="language-plaintext highlighter-rouge">collect_statistics</code>: Default: ‘on’.</li>
  <li><code class="language-plaintext highlighter-rouge">statistics_logging</code>: Default: ‘on’.</li>
  <li><code class="language-plaintext highlighter-rouge">allow_view_stats</code>: Default: [].</li>
  <li><code class="language-plaintext highlighter-rouge">allow_pagespeed_console</code>: Default: [].</li>
  <li><code class="language-plaintext highlighter-rouge">allow_pagespeed_message</code>: Default: [].</li>
  <li><code class="language-plaintext highlighter-rouge">message_buffer_size</code>: Default: 100000.</li>
  <li><code class="language-plaintext highlighter-rouge">additional_configuration</code>: A hash of directive-value pairs or an array of lines to insert at the end of the pagespeed configuration. Default: ‘{ }’.</li>
</ul>

<p>The class’s parameters correspond to the module’s directives. See the <a href="https://developers.google.com/speed/pagespeed/module/?hl=en">module’s documentation</a> for details.</p>

<h5 id="class-apachemodpassenger-1">Class: <code class="language-plaintext highlighter-rouge">apache::mod::passenger</code></h5>

<p>Installs and configures mod_passenger</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::passenger</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">manage_repo</code>: Manage phusionpassenger.com repository. Default: true.</li>
</ul>

<p>TODO: The parameters section is incomplete.</p>

<p><strong>Note</strong>: The passenger module isn’t available on RH/CentOS without providing dependency packages provided by EPEL and mod_passengers own custom repository. See the <code class="language-plaintext highlighter-rouge">manage_repo</code> parameter above and <a href="">https://www.phusionpassenger.com/library/install/apache/install/oss/el7/</a></p>

<h5 id="class-apachemodproxy">Class: <code class="language-plaintext highlighter-rouge">apache::mod::proxy</code></h5>

<p>Installs <code class="language-plaintext highlighter-rouge">mod_proxy</code> and uses the <code class="language-plaintext highlighter-rouge">proxy.conf.erb</code> template to generate its configuration.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::proxy</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">allow_from</code>: Default: <code class="language-plaintext highlighter-rouge">undef</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">apache_version</code>: Default: <code class="language-plaintext highlighter-rouge">undef</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">package_name</code>: Default: <code class="language-plaintext highlighter-rouge">undef</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">proxy_requests</code>: Default: ‘Off’.</li>
  <li><code class="language-plaintext highlighter-rouge">proxy_via</code>: Default: ‘On’.</li>
</ul>

<h5 id="class-apachemodproxy_balancer">Class: <code class="language-plaintext highlighter-rouge">apache::mod::proxy_balancer</code></h5>

<p>Installs and manages <a href="https://httpd.apache.org/docs/current/mod/mod_proxy_balancer.html"><code class="language-plaintext highlighter-rouge">mod_proxy_balancer</code></a>, which provides load balancing.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::proxy_balancer</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">manager</code>: Determines whether to enable balancer manager support. Default: <code class="language-plaintext highlighter-rouge">false</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">manager_path</code>: The server location of the balancer manager. Default: ‘/balancer-manager’.</li>
  <li><code class="language-plaintext highlighter-rouge">allow_from</code>: An <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> of IPv4 or IPv6 addresses that can access <code class="language-plaintext highlighter-rouge">/balancer-manager</code>. Default: [‘127.0.0.1’,’::1’].</li>
  <li><code class="language-plaintext highlighter-rouge">apache_version</code>: Apache’s version number as a string, such as ‘2.2’ or ‘2.4’. Default: the value of <a href="#apache_version"><code class="language-plaintext highlighter-rouge">$::apache::apache_version</code></a>.
    <ul>
      <li>On Apache &gt;= 2.4, <code class="language-plaintext highlighter-rouge">mod_slotmem_shm</code> is loaded.</li>
    </ul>
  </li>
</ul>

<h5 id="class-apachemodphp">Class: <code class="language-plaintext highlighter-rouge">apache::mod::php</code></h5>

<p>Installs and configures <a href="http://php.net/manual/en/book.apache.php"><code class="language-plaintext highlighter-rouge">mod_php</code></a>.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::php</code></strong>:</p>

<p>Default values depend on your operating system.</p>

<blockquote>
  <p><strong>Note</strong>: This list is incomplete. Most of this class’s parameters correspond to <code class="language-plaintext highlighter-rouge">mod_php</code> directives; see the <a href="http://php.net/manual/en/book.apache.php">module’s documentation</a> for details.</p>
</blockquote>

<ul>
  <li><code class="language-plaintext highlighter-rouge">package_name</code>: Names the package that installs <code class="language-plaintext highlighter-rouge">mod_php</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">path</code>: Defines the path to the <code class="language-plaintext highlighter-rouge">mod_php</code> shared object (<code class="language-plaintext highlighter-rouge">.so</code>) file.</li>
  <li><code class="language-plaintext highlighter-rouge">source</code>: Defines the path to the default configuration. Valid options include a <code class="language-plaintext highlighter-rouge">puppet:///</code> path.</li>
  <li><code class="language-plaintext highlighter-rouge">template</code>: Defines the path to the <code class="language-plaintext highlighter-rouge">php.conf</code> template Puppet uses to generate the configuration file.</li>
  <li><code class="language-plaintext highlighter-rouge">content</code>: Adds arbitrary content to <code class="language-plaintext highlighter-rouge">php.conf</code>.</li>
</ul>

<h5 id="class-apachemodproxy_html">Class: <code class="language-plaintext highlighter-rouge">apache::mod::proxy_html</code></h5>

<p><strong>Note</strong>: There is no official package available for mod_proxy_html and thus it must be made available by means outside of the control of the apache module.</p>

<h5 id="class-apachemodreqtimeout">Class: <code class="language-plaintext highlighter-rouge">apache::mod::reqtimeout</code></h5>

<p>Installs and configures <a href="https://httpd.apache.org/docs/current/mod/mod_reqtimeout.html"><code class="language-plaintext highlighter-rouge">mod_reqtimeout</code></a>.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::reqtimeout</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">timeouts</code>: A string or <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> that sets the <a href="https://httpd.apache.org/docs/current/mod/mod_reqtimeout.html#requestreadtimeout"><code class="language-plaintext highlighter-rouge">RequestReadTimeout</code></a> option. Default: [‘header=20-40,MinRate=500’, ‘body=20,MinRate=500’].</li>
</ul>

<h5 id="class-apachemodshib">Class: <code class="language-plaintext highlighter-rouge">apache::mod::shib</code></h5>

<p>Installs the <a href="http://shibboleth.net/">Shibboleth</a> Apache module <code class="language-plaintext highlighter-rouge">mod_shib</code>, which enables SAML2 single sign-on (SSO) authentication by Shibboleth Identity Providers and Shibboleth Federations. This class only installs and configures the Apache components of a web application that consumes Shibboleth SSO identities, also known as a Shibboleth Service Provider. You can manage the Shibboleth configuration manually, with Puppet, or using a <a href="https://github.com/aethylred/puppet-shibboleth">Shibboleth Puppet Module</a>.</p>

<p>Defining this class enables Shibboleth-specific parameters in <code class="language-plaintext highlighter-rouge">apache::vhost</code> instances.</p>

<p><strong>Note</strong>: The shibboleth module isn’t available on RH/CentOS without providing dependency packages provided by Shibboleth’s repositories. See <a href="">http://wiki.aaf.edu.au/tech-info/sp-install-guide</a></p>

<h5 id="class-apachemodssl">Class: <code class="language-plaintext highlighter-rouge">apache::mod::ssl</code></h5>

<p>Installs <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html">Apache SSL features</a> and uses the <code class="language-plaintext highlighter-rouge">ssl.conf.erb</code> template to generate its configuration.  On most operating systems, this ssl.conf is placed in the module configuration directory, however on Red Hat-based operating systems it is placed in the confd directory (/etc/httpd/conf.d), the same location the RPM stores the configuration.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::ssl</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ssl_cipher</code>: Default: ‘HIGH:MEDIUM:!aNULL:!MD5:!RC4’.</li>
  <li><code class="language-plaintext highlighter-rouge">ssl_compression</code>: Default: false.</li>
  <li><code class="language-plaintext highlighter-rouge">ssl_cryptodevice</code>: Default: ‘builtin’.</li>
  <li><code class="language-plaintext highlighter-rouge">ssl_honorcipherorder</code>: Default: true.</li>
  <li><code class="language-plaintext highlighter-rouge">ssl_openssl_conf_cmd</code>: Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">ssl_options</code>: Default: [ ‘StdEnvVars’ ]</li>
  <li><code class="language-plaintext highlighter-rouge">ssl_pass_phrase_dialog</code>: Default: ‘builtin’.</li>
  <li><code class="language-plaintext highlighter-rouge">ssl_protocol</code>: Default: [ ‘all’, ‘-SSLv2’, ‘-SSLv3’ ].</li>
  <li><code class="language-plaintext highlighter-rouge">ssl_random_seed_bytes</code>: Valid options: A string. Default: ‘512’.</li>
  <li><code class="language-plaintext highlighter-rouge">ssl_sessioncachetimeout</code>: Valid options: A string. Default: ‘300’.</li>
  <li><code class="language-plaintext highlighter-rouge">ssl_mutex</code>: Default: Determined based on the OS. Valid options: See [mod_ssl][mod_ssl] documentation.
    <ul>
      <li>RedHat/FreeBSD/Suse/Gentoo: ‘default’</li>
      <li>Debian/Ubuntu + Apache &gt;= 2.4: ‘default’</li>
      <li>Debian/Ubuntu + Apache &lt; 2.4: ‘file:${APACHE_RUN_DIR}/ssl_mutex’</li>
      <li>Ubuntu 10.04: ‘file:/var/run/apache2/ssl_mutex’</li>
    </ul>
  </li>
</ul>

<p>To use SSL with a virtual host, you must either set the <a href="#default_ssl_vhost"><code class="language-plaintext highlighter-rouge">default_ssl_vhost</code></a> parameter in <code class="language-plaintext highlighter-rouge">::apache</code> to true <strong>or</strong> the <a href="#ssl"><code class="language-plaintext highlighter-rouge">ssl</code></a> parameter in <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> to true.</p>

<h5 id="class-apachemodstatus">Class: <code class="language-plaintext highlighter-rouge">apache::mod::status</code></h5>

<p>Installs <a href="https://httpd.apache.org/docs/current/mod/mod_status.html"><code class="language-plaintext highlighter-rouge">mod_status</code></a> and uses the <code class="language-plaintext highlighter-rouge">status.conf.erb</code> template to generate its configuration.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::status</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">allow_from</code>: An <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> of IPv4 or IPv6 addresses that can access <code class="language-plaintext highlighter-rouge">/server-status</code>. Default: [‘127.0.0.1’,’::1’].</li>
  <li><code class="language-plaintext highlighter-rouge">extended_status</code>: Determines whether to track extended status information for each request, via the <a href="https://httpd.apache.org/docs/current/mod/core.html#extendedstatus"><code class="language-plaintext highlighter-rouge">ExtendedStatus</code></a> directive. Valid options: ‘Off’, ‘On’. Default: ‘On’.</li>
  <li><code class="language-plaintext highlighter-rouge">status_path</code>: The server location of the status page. Default: ‘/server-status’.</li>
</ul>

<h5 id="class-apachemodversion">Class: <code class="language-plaintext highlighter-rouge">apache::mod::version</code></h5>

<p>Installs <a href="https://httpd.apache.org/docs/current/mod/mod_version.html"><code class="language-plaintext highlighter-rouge">mod_version</code></a> on many operating systems and Apache configurations.</p>

<p>If Debian and Ubuntu systems with Apache 2.4 are classified with <code class="language-plaintext highlighter-rouge">apache::mod::version</code>, Puppet warns that <code class="language-plaintext highlighter-rouge">mod_version</code> is built-in and can’t be loaded.</p>

<h5 id="class-apachemodsecurity">Class: <code class="language-plaintext highlighter-rouge">apache::mod::security</code></h5>

<p>Installs and configures Trustwave’s <a href="https://www.modsecurity.org/"><code class="language-plaintext highlighter-rouge">mod_security</code></a>. It is enabled and runs by default on all virtual hosts.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::security</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">activated_rules</code>: An <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> of rules from the <code class="language-plaintext highlighter-rouge">modsec_crs_path</code> or absolute to activate via symlinks. Default: <code class="language-plaintext highlighter-rouge">modsec_default_rules</code> in <a href="#class-apacheparams"><code class="language-plaintext highlighter-rouge">apache::params</code></a>.</li>
  <li><code class="language-plaintext highlighter-rouge">allowed_methods</code>: A space-separated list of allowed HTTP methods. Default: ‘GET HEAD POST OPTIONS’.</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">content_types</code>: A list of one or more allowed <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">MIME types</a>. Default: ‘application/x-www-form-urlencoded</td>
          <td>multipart/form-data</td>
          <td>text/xml</td>
          <td>application/xml</td>
          <td>application/x-amf’</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><code class="language-plaintext highlighter-rouge">crs_package</code>: Names the package that installs CRS rules. Default: <code class="language-plaintext highlighter-rouge">modsec_crs_package</code> in <a href="#class-apacheparams"><code class="language-plaintext highlighter-rouge">apache::params</code></a>.</li>
  <li><code class="language-plaintext highlighter-rouge">modsec_dir</code>: Defines the path where Puppet installs the modsec configuration and activated rules links. Default: ‘On’, set by <code class="language-plaintext highlighter-rouge">modsec_dir</code> in <a href="#class-apacheparams"><code class="language-plaintext highlighter-rouge">apache::params</code></a>.
${modsec_dir}/activated_rules.</li>
  <li><code class="language-plaintext highlighter-rouge">modsec_secruleengine</code>: Configures the modsec rules engine. Valid options: ‘On’, ‘Off’, and ‘DetectionOnly’. Default: <code class="language-plaintext highlighter-rouge">modsec_secruleengine</code> in <a href="#class-apacheparams"><code class="language-plaintext highlighter-rouge">apache::params</code></a>.</li>
  <li><code class="language-plaintext highlighter-rouge">restricted_extensions</code>: A space-separated list of prohibited file extensions. Default: ‘.asa/ .asax/ .ascx/ .axd/ .backup/ .bak/ .bat/ .cdx/ .cer/ .cfg/ .cmd/ .com/ .config/ .conf/ .cs/ .csproj/ .csr/ .dat/ .db/ .dbf/ .dll/ .dos/ .htr/ .htw/ .ida/ .idc/ .idq/ .inc/ .ini/ .key/ .licx/ .lnk/ .log/ .mdb/ .old/ .pass/ .pdb/ .pol/ .printer/ .pwd/ .resources/ .resx/ .sql/ .sys/ .vb/ .vbs/ .vbproj/ .vsdisco/ .webinfo/ .xsd/ .xsx/’.</li>
  <li><code class="language-plaintext highlighter-rouge">restricted_headers</code>: A list of restricted headers separated by slashes and spaces. Default: ‘Proxy-Connection/ /Lock-Token/ /Content-Range/ /Translate/ /via/ /if/’.</li>
  <li><code class="language-plaintext highlighter-rouge">secdefaultaction</code>: Configures the Mode of Operation, Self-Contained (‘deny’) vs. Collaborative Detection (‘pass’), for the OWASP ModSecurity Core Rule Set. Default: ‘deny’. Fuller values can be set too like “log,auditlog,deny,status:406,tag:’SLA 24/7’”</li>
  <li><code class="language-plaintext highlighter-rouge">secpcrematchlimit</code>: Sets the number for the match limit in the PCRE library. Default: ‘1500’</li>
  <li><code class="language-plaintext highlighter-rouge">secpcrematchlimitrecursion</code>: Sets the number for the match limit recursion in the PCRE library. Default: ‘1500’</li>
  <li><code class="language-plaintext highlighter-rouge">logroot</code>: Configures the location of audit and debug logs.  Defaults to apache log directory (Redhat: /var/log/httpd Debian: /var/log/apache2)</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><code class="language-plaintext highlighter-rouge">audit_log_releavant_status</code>: Configures which response status code is to be considered relevant for the purpose of audit logging. Defaults: ‘^(?:5</td>
          <td>4(?!04))’.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><code class="language-plaintext highlighter-rouge">audit_log_parts</code>: Sets the sections to be put in the <a href="https://github.com/SpiderLabs/ModSecurity/wiki/ModSecurity-2-Data-Formats#audit-log">audit log</a>. Default: ‘ABIJDEFHZ’</li>
  <li><code class="language-plaintext highlighter-rouge">anomaly_score_blocking</code>: De-/Activates the Collaborative Detection Blocking of the OWASP ModSecurity Core Rule Set. Default: off.</li>
  <li><code class="language-plaintext highlighter-rouge">inbound_anomaly_threshold</code>: Sets the scoring threshold level of the inbound blocking rules for the Collaborative Detection Mode in the OWASP ModSecurity Core Rule Set. Default: ‘5’.</li>
  <li><code class="language-plaintext highlighter-rouge">outbound_anomaly_threshold</code>: Sets the scoring threshold level of the outbound blocking rules for the Collaborative Detection Mode in the OWASP ModSecurity Core Rule Set. Default: ‘4’.</li>
  <li><code class="language-plaintext highlighter-rouge">critical_anomaly_score</code>: Sets the scoring points of the critical severity level for the Collaborative Detection Mode in the OWASP ModSecurity Core Rule Set. Default: ‘5’.</li>
  <li><code class="language-plaintext highlighter-rouge">error_anomaly_score</code>: Sets the scoring points of the error severity level for the Collaborative Detection Mode in the OWASP ModSecurity Core Rule Set. Default: ‘4’.</li>
  <li><code class="language-plaintext highlighter-rouge">warning_anomaly_score</code>: Sets the scoring points of the warning severity level for the Collaborative Detection Mode in the OWASP ModSecurity Core Rule Set. Default: ‘3’.</li>
  <li><code class="language-plaintext highlighter-rouge">notice_anomaly_score</code>: Sets the scoring points of the notice severity level for the Collaborative Detection Mode in the OWASP ModSecurity Core Rule Set. Default: ‘2’.</li>
  <li><code class="language-plaintext highlighter-rouge">secrequestmaxnumargs</code>: Sets the Maximum number of arguments in the request. Default: ‘255’.</li>
  <li><code class="language-plaintext highlighter-rouge">secrequestbodylimit</code>:  Sets the maximum request body size ModSecurity will accept for buffering.. Default: ‘13107200’.</li>
  <li><code class="language-plaintext highlighter-rouge">secrequestbodynofileslimit</code>: Sets the maximum request body size ModSecurity will accept for buffering, excluding the size of any files being transported in the request. Default: ‘131072’.</li>
  <li><code class="language-plaintext highlighter-rouge">secrequestbodyinmemorylimit</code>: Sets the maximum request body size that ModSecurity will store in memory. Default: ‘131072’</li>
</ul>

<h5 id="class-apachemodwsgi">Class: <code class="language-plaintext highlighter-rouge">apache::mod::wsgi</code></h5>

<p>Enables Python support via <a href="https://modwsgi.readthedocs.org/en/latest/"><code class="language-plaintext highlighter-rouge">mod_wsgi</code></a>.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod::wsgi</code></strong>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">mod_path</code>: Defines the path to the <code class="language-plaintext highlighter-rouge">mod_wsgi</code> shared object (<code class="language-plaintext highlighter-rouge">.so</code>) file. Default: undef.
    <ul>
      <li>If the <code class="language-plaintext highlighter-rouge">mod_path</code> parameter doesn’t contain <code class="language-plaintext highlighter-rouge">/</code>, Puppet prefixes it with your operating system’s default module path.
Otherwise, Puppet follows it literally.</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">package_name</code>: Names the package that installs <code class="language-plaintext highlighter-rouge">mod_wsgi</code>. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">wsgi_python_home</code>: Defines the <a href="http://modwsgi.readthedocs.org/en/develop/configuration-directives/WSGIPythonHome.html"><code class="language-plaintext highlighter-rouge">WSGIPythonHome</code></a> directive, such as ‘/path/to/venv’. Valid options: path. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">wsgi_python_path</code>: Defines the <a href="http://modwsgi.readthedocs.org/en/develop/configuration-directives/WSGIPythonPath.html"><code class="language-plaintext highlighter-rouge">WSGIPythonPath</code></a> directive, such as ‘/path/to/venv/site-packages’. Valid options: path. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">wsgi_socket_prefix</code>: Defines the [<code class="language-plaintext highlighter-rouge">WSGISocketPrefix</code>][] directive, such as “${APACHE_RUN_DIR}WSGI”. Default: <code class="language-plaintext highlighter-rouge">wsgi_socket_prefix</code> in <a href="#class-apacheparams"><code class="language-plaintext highlighter-rouge">apache::params</code></a>.</li>
</ul>

<p>The class’s parameters correspond to the module’s directives. See the <a href="https://modwsgi.readthedocs.org/en/latest/">module’s documentation</a> for details.</p>

<h3 id="private-classes">Private Classes</h3>

<h4 id="class-apacheconfdno_accf">Class: <code class="language-plaintext highlighter-rouge">apache::confd::no_accf</code></h4>

<p>Creates the <code class="language-plaintext highlighter-rouge">no-accf.conf</code> configuration file in <code class="language-plaintext highlighter-rouge">conf.d</code>, required by FreeBSD’s Apache 2.4.</p>

<h4 id="class-apachedefault_confd_files">Class: <code class="language-plaintext highlighter-rouge">apache::default_confd_files</code></h4>

<p>Includes <code class="language-plaintext highlighter-rouge">conf.d</code> files for FreeBSD.</p>

<h4 id="class-apachedefault_mods">Class: <code class="language-plaintext highlighter-rouge">apache::default_mods</code></h4>

<p>Installs the Apache modules required to run the default configuration. See the <code class="language-plaintext highlighter-rouge">apache</code> class’s <a href="#default_mods"><code class="language-plaintext highlighter-rouge">default_mods</code></a> parameter for details.</p>

<h4 id="class-apachepackage">Class: <code class="language-plaintext highlighter-rouge">apache::package</code></h4>

<p>Installs and configures basic Apache packages.</p>

<h4 id="class-apacheparams">Class: <code class="language-plaintext highlighter-rouge">apache::params</code></h4>

<p>Manages Apache parameters for different operating systems.</p>

<h4 id="class-apacheservice">Class: <code class="language-plaintext highlighter-rouge">apache::service</code></h4>

<p>Manages the Apache daemon.</p>

<h4 id="class-apacheversion">Class: <code class="language-plaintext highlighter-rouge">apache::version</code></h4>

<p>Attempts to automatically detect the Apache version based on the operating system.</p>

<h3 id="public-defined-types">Public defined types</h3>

<h4 id="defined-type-apachebalancer">Defined type: <code class="language-plaintext highlighter-rouge">apache::balancer</code></h4>

<p>Creates an Apache load balancing group, also known as a balancer cluster, using <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html"><code class="language-plaintext highlighter-rouge">mod_proxy</code></a>. Each load balancing group needs one or more balancer members, which you can declare in Puppet with the  <a href="#defined-type-apachebalancermember"><code class="language-plaintext highlighter-rouge">apache::balancermember</code></a> define.</p>

<p>Declare one <code class="language-plaintext highlighter-rouge">apache::balancer</code> define for each Apache load balancing group. You can export <code class="language-plaintext highlighter-rouge">apache::balancermember</code> defined types for all balancer members and collect them on a single Apache load balancer server using <a href="http://docs.puppetlabs.com/latest/reference/lang_exported.md">exported resources</a>.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::balancer</code></strong>:</p>

<h5 id="name"><code class="language-plaintext highlighter-rouge">name</code></h5>

<p>Sets the title of the balancer cluster and name of the <code class="language-plaintext highlighter-rouge">conf.d</code> file containing its configuration.</p>

<h5 id="proxy_set"><code class="language-plaintext highlighter-rouge">proxy_set</code></h5>

<p>Configures key-value pairs as <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxyset"><code class="language-plaintext highlighter-rouge">ProxySet</code></a> lines. Valid options: a <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_hash.html">hash</a>. Default: ‘{}’.</p>

<h5 id="collect_exported"><code class="language-plaintext highlighter-rouge">collect_exported</code></h5>

<p>Determines whether to use <a href="http://docs.puppetlabs.com/latest/reference/lang_exported.md">exported resources</a>. Valid options: Boolean. Default: true.</p>

<p>If you statically declare all of your backend servers, set this parameter to false to rely on existing, declared balancer member resources. Also, use <code class="language-plaintext highlighter-rouge">apache::balancermember</code> with <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> arguments.</p>

<p>To dynamically declare backend servers via exported resources collected on a central node, set this parameter to true to collect the balancer member resources exported by the balancer member nodes.</p>

<p>If you don’t use exported resources, a single Puppet run configures all balancer members. If you use exported resources, Puppet has to run on the balanced nodes first, then run on the balancer.</p>

<h4 id="defined-type-apachebalancermember">Defined type: <code class="language-plaintext highlighter-rouge">apache::balancermember</code></h4>

<p>Defines members of <a href="https://httpd.apache.org/docs/current/mod/mod_proxy_balancer.html"><code class="language-plaintext highlighter-rouge">mod_proxy_balancer</code></a>, which sets up a balancer member inside a listening service configuration block in the load balancer’s <code class="language-plaintext highlighter-rouge">apache.cfg</code>.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::balancermember</code></strong>:</p>

<h5 id="balancer_cluster"><code class="language-plaintext highlighter-rouge">balancer_cluster</code></h5>

<p><strong>Required</strong>. Sets the Apache service’s instance name, and must match the name of a declared <a href="#defined-type-apachebalancer"><code class="language-plaintext highlighter-rouge">apache::balancer</code></a> resource.</p>

<h5 id="url"><code class="language-plaintext highlighter-rouge">url</code></h5>

<p>Specifies the URL used to contact the balancer member server. Default:  ‘http://${::fqdn}/’.</p>

<h5 id="options"><code class="language-plaintext highlighter-rouge">options</code></h5>

<p>Specifies an <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> of <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#balancermember">options</a> after the URL, and accepts any key-value pairs available to <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypass"><code class="language-plaintext highlighter-rouge">ProxyPass</code></a>. Default: an empty array.</p>

<h4 id="defined-type-apachecustom_config">Defined type: <code class="language-plaintext highlighter-rouge">apache::custom_config</code></h4>

<p>Adds a custom configuration file to the Apache server’s <code class="language-plaintext highlighter-rouge">conf.d</code> directory. If the file is invalid and this defined type’s <a href="#verify_config"><code class="language-plaintext highlighter-rouge">verify_config</code></a> parameter’s value is true, Puppet throws an error during a Puppet run.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::custom_config</code></strong>:</p>

<h5 id="ensure"><code class="language-plaintext highlighter-rouge">ensure</code></h5>

<p>Specifies whether the configuration file should be present. Valid options: ‘absent’, ‘present’. Default: ‘present’.</p>

<h5 id="confdir"><code class="language-plaintext highlighter-rouge">confdir</code></h5>

<p>Sets the directory in which Puppet places configuration files. Default: the value of <a href="#confd_dir"><code class="language-plaintext highlighter-rouge">$::apache::confd_dir</code></a>.</p>

<h5 id="content"><code class="language-plaintext highlighter-rouge">content</code></h5>

<p>Sets the configuration file’s content. The <code class="language-plaintext highlighter-rouge">content</code> and <a href="#source"><code class="language-plaintext highlighter-rouge">source</code></a> parameters are exclusive of each other.</p>

<h5 id="filename"><code class="language-plaintext highlighter-rouge">filename</code></h5>

<p>Sets the name of the file under <code class="language-plaintext highlighter-rouge">confdir</code> in which Puppet stores the configuration. The default behavior is to generate the filename from the <code class="language-plaintext highlighter-rouge">priority</code> parameter and the resource name.</p>

<h5 id="priority"><code class="language-plaintext highlighter-rouge">priority</code></h5>

<p>Sets the configuration file’s priority by prefixing its filename with this parameter’s numeric value, as Apache processes configuration files in alphanumeric order. Default: ‘25’.</p>

<p>To omit the priority prefix in the configuration file’s name, set this parameter to false.</p>

<h5 id="source"><code class="language-plaintext highlighter-rouge">source</code></h5>

<p>Points to the configuration file’s source. The <a href="#content"><code class="language-plaintext highlighter-rouge">content</code></a> and <code class="language-plaintext highlighter-rouge">source</code> parameters are exclusive of each other.</p>

<h5 id="verify_command"><code class="language-plaintext highlighter-rouge">verify_command</code></h5>

<p>Specifies the command Puppet uses to verify the configuration file. Use a fully qualified command. Default: <code class="language-plaintext highlighter-rouge">/usr/sbin/apachectl -t</code>.</p>

<p>This parameter is only used if the <a href="#verify_config"><code class="language-plaintext highlighter-rouge">verify_config</code></a> parameter’s value is ‘true’. If the <code class="language-plaintext highlighter-rouge">verify_command</code> fails, the Puppet run deletes the configuration file, does not notify the Apache service, and raises an error.</p>

<h5 id="verify_config"><code class="language-plaintext highlighter-rouge">verify_config</code></h5>

<p>Specifies whether to validate the configuration file before notifying the Apache service. Valid options: Boolean. Default: true.</p>

<h4 id="defined-type-apachefastcgiserver">Defined type: <code class="language-plaintext highlighter-rouge">apache::fastcgi::server</code></h4>

<p>Defines one or more external FastCGI servers to handle specific file types. Use this defined type with <a href="http://www.fastcgi.com/"><code class="language-plaintext highlighter-rouge">mod_fastcgi</code></a>.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::fastcgi::server</code>:</strong></p>

<h5 id="host"><code class="language-plaintext highlighter-rouge">host</code></h5>

<p>Determines the FastCGI’s hostname or IP address and TCP port number (1-65535).</p>

<h5 id="timeout-1"><code class="language-plaintext highlighter-rouge">timeout</code></h5>

<p>Sets the number of seconds a <a href="http://www.fastcgi.com/">FastCGI</a> application can be inactive before aborting the request and logging the event at the error LogLevel. The inactivity timer applies only as long as a connection is pending with the FastCGI application. If a request is queued to an application, but the application doesn’t respond by writing and flushing within this period, the request is aborted. If communication is complete with the application but incomplete with the client (the response is buffered), the timeout does not apply.</p>

<h5 id="flush"><code class="language-plaintext highlighter-rouge">flush</code></h5>

<p>Forces <a href="http://www.fastcgi.com/"><code class="language-plaintext highlighter-rouge">mod_fastcgi</code></a> to write to the client as data is received from the application. By default, <code class="language-plaintext highlighter-rouge">mod_fastcgi</code> buffers data in order to free the application as quickly as possible.</p>

<h5 id="faux_path"><code class="language-plaintext highlighter-rouge">faux_path</code></h5>

<p>Apache has <a href="http://www.fastcgi.com/">FastCGI</a> handle URIs that resolve to this filename. The path set in this parameter does not have to exist in the local filesystem.</p>

<h5 id="alias"><code class="language-plaintext highlighter-rouge">alias</code></h5>

<p>Internally links actions with the FastCGI server. This alias must be unique.</p>

<h5 id="file_type"><code class="language-plaintext highlighter-rouge">file_type</code></h5>

<p>Sets the <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">MIME <code class="language-plaintext highlighter-rouge">content-type</code></a> of the file to be processed by the FastCGI server.</p>

<h4 id="defined-type-apachelisten">Defined type: <code class="language-plaintext highlighter-rouge">apache::listen</code></h4>

<p>Adds <a href="https://httpd.apache.org/docs/current/bind.html"><code class="language-plaintext highlighter-rouge">Listen</code></a> directives to <code class="language-plaintext highlighter-rouge">ports.conf</code> in the Apache configuration directory that define the Apache server’s or a virtual host’s listening address and port. The <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> class uses this defined type, and titles take the form ‘<PORT>', '<IPV4>:<PORT>', or '<IPV6>:<PORT>'.</PORT></IPV6></PORT></IPV4></PORT></p>

<h4 id="defined-type-apachemod">Defined type: <code class="language-plaintext highlighter-rouge">apache::mod</code></h4>

<p>Installs packages for an Apache module that doesn’t have a corresponding <a href="#classes-apachemodmodule-name"><code class="language-plaintext highlighter-rouge">apache::mod::&lt;MODULE NAME&gt;</code></a> class, and checks for or places the module’s default configuration files in the Apache server’s <code class="language-plaintext highlighter-rouge">module</code> and <code class="language-plaintext highlighter-rouge">enable</code> directories. The default locations depend on your operating system.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::mod</code></strong>:</p>

<h5 id="package"><code class="language-plaintext highlighter-rouge">package</code></h5>

<p><strong>Required</strong>. Names the package Puppet uses to install the Apache module.</p>

<h5 id="package_ensure-1"><code class="language-plaintext highlighter-rouge">package_ensure</code></h5>

<p>Determines whether Puppet ensures the Apache module should be installed. Valid options: ‘absent’, ‘present’. Default: ‘present’.</p>

<h5 id="lib"><code class="language-plaintext highlighter-rouge">lib</code></h5>

<p>Defines the module’s shared object name. Its default value is <code class="language-plaintext highlighter-rouge">mod_$name.so</code>, and it should not be configured manually without special reason.</p>

<h5 id="lib_path-1"><code class="language-plaintext highlighter-rouge">lib_path</code></h5>

<p>Specifies a path to the module’s libraries. Default: the <code class="language-plaintext highlighter-rouge">apache</code> class’s <a href="#lib_path"><code class="language-plaintext highlighter-rouge">lib_path</code></a> parameter.</p>

<p>Don’t manually set this parameter without special reason. The <a href="#path"><code class="language-plaintext highlighter-rouge">path</code></a> parameter overrides this value.</p>

<h5 id="loadfile_name-1"><code class="language-plaintext highlighter-rouge">loadfile_name</code></h5>

<p>Sets the filename for the module’s <a href="https://httpd.apache.org/docs/current/mod/mod_so.html#loadfile"><code class="language-plaintext highlighter-rouge">LoadFile</code></a> directive, which can also set the module load order as Apache processes them in alphanumeric order. Valid options: filenames formatted <code class="language-plaintext highlighter-rouge">\*.load</code>. Default: the resource’s name followed by ‘load’, as in ‘$name.load’.</p>

<h5 id="loadfiles"><code class="language-plaintext highlighter-rouge">loadfiles</code></h5>

<p>Specifies an array of <a href="https://httpd.apache.org/docs/current/mod/mod_so.html#loadfile"><code class="language-plaintext highlighter-rouge">LoadFile</code></a> directives. Default: undef.</p>

<h5 id="path"><code class="language-plaintext highlighter-rouge">path</code></h5>

<p>Specifies a path to the module. Default: <a href="#lib_path"><code class="language-plaintext highlighter-rouge">lib_path</code></a>/<a href="#lib"><code class="language-plaintext highlighter-rouge">lib</code></a>.</p>

<blockquote>
  <p><strong>Note:</strong> Don’t manually set this parameter without a specific reason.</p>
</blockquote>

<h4 id="defined-type-apachenamevirtualhost">Defined type: <code class="language-plaintext highlighter-rouge">apache::namevirtualhost</code></h4>
<p>Enables <a href="https://httpd.apache.org/docs/current/vhosts/name-based.html">name-based virtual hosts</a> and adds all related directives to the <code class="language-plaintext highlighter-rouge">ports.conf</code> file in the Apache HTTPD configuration directory. Titles can take the forms ‘*’, ‘*:&lt;PORT&gt;’, ‘_default_:&lt;PORT&gt;, ‘&lt;IP&gt;’, or ‘&lt;IP&gt;:&lt;PORT&gt;’.</p>

<h4 id="defined-type-apachevhost">Defined type: <code class="language-plaintext highlighter-rouge">apache::vhost</code></h4>

<p>The Apache module allows a lot of flexibility in the setup and configuration of virtual hosts. This flexibility is due, in part, to <code class="language-plaintext highlighter-rouge">vhost</code> being a defined resource type, which allows Apache to evaluate it multiple times with different parameters.</p>

<p>The <code class="language-plaintext highlighter-rouge">apache::vhost</code> defined type allows you to have specialized configurations for virtual hosts that have requirements outside the defaults. You can set up a default virtual host within the base <code class="language-plaintext highlighter-rouge">::apache</code> class, as well as set a customized virtual host as the default. Customized virtual hosts have a lower numeric <a href="#defined-types-apachevhost"><code class="language-plaintext highlighter-rouge">priority</code></a> than the base class’s, causing Apache to process the customized virtual host first.</p>

<p>The <code class="language-plaintext highlighter-rouge">apache::vhost</code> defined type uses <code class="language-plaintext highlighter-rouge">concat::fragment</code> to build the configuration file. To inject custom fragments for pieces of the configuration that the defined type doesn’t inherently support, add a custom fragment.</p>

<p>For the custom fragment’s <code class="language-plaintext highlighter-rouge">order</code> parameter, the <code class="language-plaintext highlighter-rouge">apache::vhost</code> defined type uses multiples of 10, so any <code class="language-plaintext highlighter-rouge">order</code> that isn’t a multiple of 10 should work.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::vhost</code></strong>:</p>

<h5 id="access_log"><code class="language-plaintext highlighter-rouge">access_log</code></h5>

<p>Determines whether to configure <code class="language-plaintext highlighter-rouge">*_access.log</code> directives (<code class="language-plaintext highlighter-rouge">*_file</code>,<code class="language-plaintext highlighter-rouge">*_pipe</code>, or <code class="language-plaintext highlighter-rouge">*_syslog</code>). Valid options: Boolean. Default: true.</p>

<h5 id="access_log_env_var"><code class="language-plaintext highlighter-rouge">access_log_env_var</code></h5>

<p>Specifies that only requests with particular environment variables be logged. Default: undef.</p>

<h5 id="access_log_file-1"><code class="language-plaintext highlighter-rouge">access_log_file</code></h5>

<p>Sets the filename of the <code class="language-plaintext highlighter-rouge">*_access.log</code> placed in <a href="#logroot"><code class="language-plaintext highlighter-rouge">logroot</code></a>. Given a virtual host—for instance, example.com—it defaults to ‘example.com_ssl.log’ for <a href="https://httpd.apache.org/docs/current/ssl/index.html">SSL-encrypted</a> virtual hosts and ‘example.com_access.log’ for unencrypted virtual hosts.</p>

<h5 id="access_log_format"><code class="language-plaintext highlighter-rouge">access_log_format</code></h5>

<p>Specifies the use of either a <a href="https://httpd.apache.org/docs/current/mod/mod_log_config.html#logformat"><code class="language-plaintext highlighter-rouge">LogFormat</code></a> nickname or a custom-formatted string for the access log. Default: ‘combined’.</p>

<h5 id="access_log_pipe"><code class="language-plaintext highlighter-rouge">access_log_pipe</code></h5>

<p>Specifies a pipe where Apache sends access log messages. Default: undef.</p>

<h5 id="access_log_syslog"><code class="language-plaintext highlighter-rouge">access_log_syslog</code></h5>

<p>Sends all access log messages to syslog. Default: undef.</p>

<h5 id="add_default_charset"><code class="language-plaintext highlighter-rouge">add_default_charset</code></h5>

<p>Sets a default media charset value for the <a href="https://httpd.apache.org/docs/current/mod/core.html#adddefaultcharset"><code class="language-plaintext highlighter-rouge">AddDefaultCharset</code></a> directive, which is added to <code class="language-plaintext highlighter-rouge">text/plain</code> and <code class="language-plaintext highlighter-rouge">text/html</code> responses.</p>

<h5 id="add_listen"><code class="language-plaintext highlighter-rouge">add_listen</code></h5>

<p>Determines whether the virtual host creates a <a href="https://httpd.apache.org/docs/current/bind.html"><code class="language-plaintext highlighter-rouge">Listen</code></a> statement. Valid options: Boolean. Default: true.</p>

<p>Setting <code class="language-plaintext highlighter-rouge">add_listen</code> to false prevents the virtual host from creating a <code class="language-plaintext highlighter-rouge">Listen</code> statement. This is important when combining virtual hosts that aren’t passed an <code class="language-plaintext highlighter-rouge">ip</code> parameter with those that are.</p>

<h5 id="use_optional_includes"><code class="language-plaintext highlighter-rouge">use_optional_includes</code></h5>

<p>Specifies whether Apache uses the <a href="https://httpd.apache.org/docs/current/mod/core.html#includeoptional"><code class="language-plaintext highlighter-rouge">IncludeOptional</code></a> directive instead of <a href="https://httpd.apache.org/docs/current/mod/core.html#include"><code class="language-plaintext highlighter-rouge">Include</code></a> for <code class="language-plaintext highlighter-rouge">additional_includes</code> in Apache 2.4 or newer. Valid options: Boolean. Default: false.</p>

<h5 id="additional_includes"><code class="language-plaintext highlighter-rouge">additional_includes</code></h5>

<p>Specifies paths to additional static, virtual host-specific Apache configuration files. You can use this parameter to implement a unique, custom configuration not supported by this module. Valid options: a string path or <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a> of them. Default: an empty array.</p>

<h5 id="aliases"><code class="language-plaintext highlighter-rouge">aliases</code></h5>

<p>Passes a list of <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_hash.html">hashes</a> to the virtual host to create <a href="https://httpd.apache.org/docs/current/mod/mod_alias.html#alias"><code class="language-plaintext highlighter-rouge">Alias</code></a>, <a href="https://httpd.apache.org/docs/current/mod/mod_alias.html#aliasmatch"><code class="language-plaintext highlighter-rouge">AliasMatch</code></a>, <a href="#scriptalias"><code class="language-plaintext highlighter-rouge">ScriptAlias</code></a> or <a href="https://httpd.apache.org/docs/current/mod/mod_alias.html#scriptaliasmatch"><code class="language-plaintext highlighter-rouge">ScriptAliasMatch</code></a> directives as per the <a href="https://httpd.apache.org/docs/current/mod/mod_alias.html"><code class="language-plaintext highlighter-rouge">mod_alias</code></a> documentation.</p>

<p>For example:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">aliases</span> <span class="p">=&gt;</span> <span class="p">[</span>
  <span class="p">{</span> <span class="py">aliasmatch</span>       <span class="p">=&gt;</span> <span class="s1">'^/image/(.*)\.jpg$'</span><span class="p">,</span>
    <span class="py">path</span>             <span class="p">=&gt;</span> <span class="s1">'/files/jpg.images/$1.jpg'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span> <span class="py">alias</span>            <span class="p">=&gt;</span> <span class="s1">'/image'</span><span class="p">,</span>
    <span class="py">path</span>             <span class="p">=&gt;</span> <span class="s1">'/ftp/pub/image'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span> <span class="py">scriptaliasmatch</span> <span class="p">=&gt;</span> <span class="s1">'^/cgi-bin(.*)'</span><span class="p">,</span>
    <span class="py">path</span>             <span class="p">=&gt;</span> <span class="s1">'/usr/local/share/cgi-bin$1'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span> <span class="py">scriptalias</span>      <span class="p">=&gt;</span> <span class="s1">'/nagios/cgi-bin/'</span><span class="p">,</span>
    <span class="py">path</span>             <span class="p">=&gt;</span> <span class="s1">'/usr/lib/nagios/cgi-bin/'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span> <span class="py">alias</span>            <span class="p">=&gt;</span> <span class="s1">'/nagios'</span><span class="p">,</span>
    <span class="py">path</span>             <span class="p">=&gt;</span> <span class="s1">'/usr/share/nagios/html'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">],</span>
</code></pre></div></div>

<p>For the <code class="language-plaintext highlighter-rouge">alias</code>, <code class="language-plaintext highlighter-rouge">aliasmatch</code>, <code class="language-plaintext highlighter-rouge">scriptalias</code> and <code class="language-plaintext highlighter-rouge">scriptaliasmatch</code> keys to work, each needs a corresponding context, such as <code class="language-plaintext highlighter-rouge">&lt;Directory /path/to/directory&gt;</code> or <code class="language-plaintext highlighter-rouge">&lt;Location /some/location/here&gt;</code>. Puppet creates the directives in the order specified in the <code class="language-plaintext highlighter-rouge">aliases</code> parameter. As described in the <a href="https://httpd.apache.org/docs/current/mod/mod_alias.html"><code class="language-plaintext highlighter-rouge">mod_alias</code></a> documentation, add more specific <code class="language-plaintext highlighter-rouge">alias</code>, <code class="language-plaintext highlighter-rouge">aliasmatch</code>, <code class="language-plaintext highlighter-rouge">scriptalias</code> or <code class="language-plaintext highlighter-rouge">scriptaliasmatch</code> parameters before the more general ones to avoid shadowing.</p>

<blockquote>
  <p><strong>Note</strong>: Use the <code class="language-plaintext highlighter-rouge">aliases</code> parameter instead of the <code class="language-plaintext highlighter-rouge">scriptaliases</code> parameter because you can precisely control the various alias directives’ order. Defining <code class="language-plaintext highlighter-rouge">ScriptAliases</code> using the <code class="language-plaintext highlighter-rouge">scriptaliases</code> parameter means <em>all</em> <code class="language-plaintext highlighter-rouge">ScriptAlias</code> directives will come after <em>all</em> <code class="language-plaintext highlighter-rouge">Alias</code> directives, which can lead to <code class="language-plaintext highlighter-rouge">Alias</code> directives shadowing <code class="language-plaintext highlighter-rouge">ScriptAlias</code> directives. This often causes problems, for example with Nagios.</p>
</blockquote>

<p>If <a href="#class-apachemodpassenger"><code class="language-plaintext highlighter-rouge">apache::mod::passenger</code></a> is loaded and <code class="language-plaintext highlighter-rouge">PassengerHighPerformance</code> is ‘true’, the <code class="language-plaintext highlighter-rouge">Alias</code> directive might not be able to honor the <code class="language-plaintext highlighter-rouge">PassengerEnabled =&gt; off</code> statement. See <a href="http://www.conandalton.net/2010/06/passengerenabled-off-not-working.html">this article</a> for details.</p>

<h5 id="allow_encoded_slashes-1"><code class="language-plaintext highlighter-rouge">allow_encoded_slashes</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/core.html#allowencodedslashes"><code class="language-plaintext highlighter-rouge">AllowEncodedSlashes</code></a> declaration for the virtual host, overriding the server default. This modifies the virtual host responses to URLs with <code class="language-plaintext highlighter-rouge">\</code> and <code class="language-plaintext highlighter-rouge">/</code> characters. Valid options: ‘nodecode’, ‘off’, ‘on’. Default: undef, which omits the declaration from the server configuration and selects the Apache default setting of <code class="language-plaintext highlighter-rouge">Off</code>.</p>

<h5 id="block"><code class="language-plaintext highlighter-rouge">block</code></h5>

<p>Specifies the list of things to which Apache blocks access. Valid option: ‘scm’, which blocks web access to <code class="language-plaintext highlighter-rouge">.svn</code>, <code class="language-plaintext highlighter-rouge">.git</code>, and <code class="language-plaintext highlighter-rouge">.bzr</code> directories. Default: an empty <a href="https://docs.puppetlabs.com/puppet/latest/reference/lang_data_array.html">array</a>.</p>

<h5 id="cas_attribute_prefix"><code class="language-plaintext highlighter-rouge">cas_attribute_prefix</code></h5>

<p>Adds a header with the value of this header being the attribute values when SAML validation is enabled. Defaults to
the value set by <a href="#class-apachemodauth_cas"><code class="language-plaintext highlighter-rouge">apache::mod::auth_cas</code></a></p>

<h5 id="cas_attribute_delimiter"><code class="language-plaintext highlighter-rouge">cas_attribute_delimiter</code></h5>

<p>The delimiter between attribute values in the header created by <code class="language-plaintext highlighter-rouge">cas_attribute_prefix</code>.  Defaults to the value
set by <a href="#class-apachemodauth_cas"><code class="language-plaintext highlighter-rouge">apache::mod::auth_cas</code></a></p>

<h5 id="cas_login_url"><code class="language-plaintext highlighter-rouge">cas_login_url</code></h5>

<p>Sets the URL to which the module redirects users when they attempt to access a CAS-protected resource and
don’t have an active session. Defaults to the value set by <a href="#class-apachemodauth_cas"><code class="language-plaintext highlighter-rouge">apache::mod::auth_cas</code></a></p>

<h5 id="cas_scrub_request_headers"><code class="language-plaintext highlighter-rouge">cas_scrub_request_headers</code></h5>

<p>Remove inbound request headers that may have special meaning within mod_auth_cas. Defaults to the value
set by <a href="#class-apachemodauth_cas"><code class="language-plaintext highlighter-rouge">apache::mod::auth_cas</code></a></p>

<h5 id="cas_sso_enabled"><code class="language-plaintext highlighter-rouge">cas_sso_enabled</code></h5>

<p>Enables experimental support for single sign out (may mangle POST data). Defaults to the value
set by <a href="#class-apachemodauth_cas"><code class="language-plaintext highlighter-rouge">apache::mod::auth_cas</code></a></p>

<h5 id="cas_validate_saml"><code class="language-plaintext highlighter-rouge">cas_validate_saml</code></h5>

<p>Parse response from CAS server for SAML. Defaults to the value set by <a href="#class-apachemodauth_cas"><code class="language-plaintext highlighter-rouge">apache::mod::auth_cas</code></a></p>

<h5 id="cas_validate_url"><code class="language-plaintext highlighter-rouge">cas_validate_url</code></h5>

<p>Sets the URL to use when validating a client-presented ticket in an HTTP query string. Defaults to the value set by
<a href="#class-apachemodauth_cas"><code class="language-plaintext highlighter-rouge">apache::mod::auth_cas</code></a></p>

<h5 id="custom_fragment"><code class="language-plaintext highlighter-rouge">custom_fragment</code></h5>

<p>Passes a string of custom configuration directives to place at the end of the virtual host configuration. Default: undef.</p>

<h5 id="default_vhost-1"><code class="language-plaintext highlighter-rouge">default_vhost</code></h5>

<p>Sets a given <code class="language-plaintext highlighter-rouge">apache::vhost</code> defined type as the default to serve requests that do not match any other <code class="language-plaintext highlighter-rouge">apache::vhost</code> defined types. Default: false.</p>

<h5 id="directories"><code class="language-plaintext highlighter-rouge">directories</code></h5>

<p>See the <a href="#parameter-directories-for-apachevhost"><code class="language-plaintext highlighter-rouge">directories</code></a> section.</p>

<h5 id="directoryindex"><code class="language-plaintext highlighter-rouge">directoryindex</code></h5>

<p>Sets the list of resources to look for when a client requests an index of the directory by specifying a ‘/’ at the end of the directory name. See the <a href="https://httpd.apache.org/docs/current/mod/mod_dir.html#directoryindex"><code class="language-plaintext highlighter-rouge">DirectoryIndex</code></a> directive documentation for details. Default: undef.</p>

<h5 id="docroot-1"><code class="language-plaintext highlighter-rouge">docroot</code></h5>

<p><strong>Required</strong>. Sets the <a href="https://httpd.apache.org/docs/current/mod/core.html#documentroot"><code class="language-plaintext highlighter-rouge">DocumentRoot</code></a> location, from which Apache serves files.</p>

<p>If <code class="language-plaintext highlighter-rouge">docroot</code> and <a href="#manage_docroot"><code class="language-plaintext highlighter-rouge">manage_docroot</code></a> are both set to false, no <a href="https://httpd.apache.org/docs/current/mod/core.html#documentroot"><code class="language-plaintext highlighter-rouge">DocumentRoot</code></a> will be set and the accompanying <code class="language-plaintext highlighter-rouge">&lt;Directory /path/to/directory&gt;</code> block will not be created.</p>

<h5 id="docroot_group"><code class="language-plaintext highlighter-rouge">docroot_group</code></h5>

<p>Sets group access to the <a href="#docroot"><code class="language-plaintext highlighter-rouge">docroot</code></a> directory. Valid options: A string representing a system group. Default: ‘root’.</p>

<h5 id="docroot_owner"><code class="language-plaintext highlighter-rouge">docroot_owner</code></h5>

<p>Sets individual user access to the <a href="#docroot"><code class="language-plaintext highlighter-rouge">docroot</code></a> directory. Valid options: A string representing a user account. Default: ‘root’.</p>

<h5 id="docroot_mode"><code class="language-plaintext highlighter-rouge">docroot_mode</code></h5>

<p>Sets access permissions for the <a href="#docroot"><code class="language-plaintext highlighter-rouge">docroot</code></a> directory, in numeric notation. Valid options: A string. Default: undef.</p>

<h5 id="manage_docroot"><code class="language-plaintext highlighter-rouge">manage_docroot</code></h5>

<p>Determines whether Puppet manages the <a href="#docroot"><code class="language-plaintext highlighter-rouge">docroot</code></a> directory. Valid options: Boolean. Default: true.</p>

<h5 id="error_log-1"><code class="language-plaintext highlighter-rouge">error_log</code></h5>

<p>Specifies whether <code class="language-plaintext highlighter-rouge">*_error.log</code> directives should be configured. Valid options: Boolean. Default: true.</p>

<h5 id="error_log_file"><code class="language-plaintext highlighter-rouge">error_log_file</code></h5>

<p>Points the virtual host’s error logs to a <code class="language-plaintext highlighter-rouge">*_error.log</code> file. If this parameter is undefined, Puppet checks for values in <a href="#error_log_pipe"><code class="language-plaintext highlighter-rouge">error_log_pipe</code></a>, then <a href="#error_log_syslog"><code class="language-plaintext highlighter-rouge">error_log_syslog</code></a>.</p>

<p>If none of these parameters is set, given a virtual host <code class="language-plaintext highlighter-rouge">example.com</code>, Puppet defaults to ‘$logroot/example.com_error_ssl.log’ for SSL virtual hosts and ‘$logroot/example.com_error.log’ for non-SSL virtual hosts.</p>

<h5 id="error_log_pipe"><code class="language-plaintext highlighter-rouge">error_log_pipe</code></h5>

<p>Specifies a pipe to send error log messages to. Default: undef.</p>

<p>This parameter has no effect if the <a href="#error_log_file"><code class="language-plaintext highlighter-rouge">error_log_file</code></a> parameter has a value. If neither this parameter nor <code class="language-plaintext highlighter-rouge">error_log_file</code> has a value, Puppet then checks <a href="#error_log_syslog"><code class="language-plaintext highlighter-rouge">error_log_syslog</code></a>.</p>

<h5 id="error_log_syslog"><code class="language-plaintext highlighter-rouge">error_log_syslog</code></h5>

<p>Determines whether to send all error log messages to syslog. Valid options: Boolean. Default: undef.</p>

<p>This parameter has no effect if either of the <a href="#error_log_file"><code class="language-plaintext highlighter-rouge">error_log_file</code></a> or <a href="#error_log_pipe"><code class="language-plaintext highlighter-rouge">error_log_pipe</code></a> parameters has a value. If none of these parameters has a value, given a virtual host <code class="language-plaintext highlighter-rouge">example.com</code>, Puppet defaults to ‘$logroot/example.com_error_ssl.log’ for SSL virtual hosts and ‘$logroot/example.com_error.log’ for non-SSL virtual hosts.</p>

<h5 id="error_documents-1"><code class="language-plaintext highlighter-rouge">error_documents</code></h5>

<p>A list of hashes which can be used to override the <a href="https://httpd.apache.org/docs/current/mod/core.html#errordocument">ErrorDocument</a> settings for this virtual host. Default: ‘[]’.</p>

<p>An example:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">error_documents</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s1">'error_code'</span> <span class="p">=&gt;</span> <span class="s1">'503'</span><span class="p">,</span> <span class="s1">'document'</span> <span class="p">=&gt;</span> <span class="s1">'/service-unavail'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s1">'error_code'</span> <span class="p">=&gt;</span> <span class="s1">'407'</span><span class="p">,</span> <span class="s1">'document'</span> <span class="p">=&gt;</span> <span class="s1">'https://example.com/proxy/login'</span> <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="ensure-1"><code class="language-plaintext highlighter-rouge">ensure</code></h5>

<p>Specifies if the virtual host is present or absent. Valid options: ‘absent’, ‘present’. Default: ‘present’.</p>

<h5 id="fallbackresource"><code class="language-plaintext highlighter-rouge">fallbackresource</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_dir.html#fallbackresource">FallbackResource</a> directive, which specifies an action to take for any URL that doesn’t map to anything in your filesystem and would otherwise return ‘HTTP 404 (Not Found)’. Valid options must either begin with a ‘/’ or be ‘disabled’. Default: undef.</p>

<p>#####<code class="language-plaintext highlighter-rouge">fastcgi_idle_timeout</code></p>

<p>If using fastcgi, this option sets the timeout for the server to respond.</p>

<h5 id="filters"><code class="language-plaintext highlighter-rouge">filters</code></h5>

<p><a href="https://httpd.apache.org/docs/current/mod/mod_filter.html">Filters</a> enable smart, context-sensitive configuration of output content filters.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s2">"</span><span class="nv">$::fqdn</span><span class="s2">"</span><span class="p">:</span>
  <span class="py">filters</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="s1">'FilterDeclare   COMPRESS'</span><span class="p">,</span>
    <span class="s1">'FilterProvider  COMPRESS DEFLATE resp=Content-Type $text/html'</span><span class="p">,</span>
    <span class="s1">'FilterChain     COMPRESS'</span><span class="p">,</span>
    <span class="s1">'FilterProtocol  COMPRESS DEFLATE change=yes;byteranges=no'</span><span class="p">,</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="force_type"><code class="language-plaintext highlighter-rouge">force_type</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/core.html#forcetype"><code class="language-plaintext highlighter-rouge">ForceType</code></a> directive, which forces Apache to serve all matching files with a <a href="https://www.iana.org/assignments/media-types/media-types.xhtml">MIME <code class="language-plaintext highlighter-rouge">content-type</code></a> matching this parameter’s value.</p>

<h5 id="headers"><code class="language-plaintext highlighter-rouge">headers</code></h5>

<p>Adds lines to replace, merge, or remove response headers. See <a href="https://httpd.apache.org/docs/current/mod/mod_headers.html#header">Apache’s mod_headers documentation</a> for more information. Valid options: A string, an array of strings, or undef. Default: undef.</p>

<h5 id="ip"><code class="language-plaintext highlighter-rouge">ip</code></h5>

<p>Sets the IP address the virtual host listens on. Valid options: Strings. Default: undef, which uses Apache’s default behavior of listening on all IPs.</p>

<h5 id="ip_based"><code class="language-plaintext highlighter-rouge">ip_based</code></h5>

<p>Enables an <a href="https://httpd.apache.org/docs/current/vhosts/ip-based.html">IP-based</a> virtual host. This parameter inhibits the creation of a NameVirtualHost directive, since those are used to funnel requests to name-based virtual hosts. Default: false.</p>

<h5 id="itk"><code class="language-plaintext highlighter-rouge">itk</code></h5>

<p>Configures <a href="http://mpm-itk.sesse.net/">ITK</a> in a hash. Keys can be:</p>

<ul>
  <li>user + group</li>
  <li><code class="language-plaintext highlighter-rouge">assignuseridexpr</code></li>
  <li><code class="language-plaintext highlighter-rouge">assigngroupidexpr</code></li>
  <li><code class="language-plaintext highlighter-rouge">maxclientvhost</code></li>
  <li><code class="language-plaintext highlighter-rouge">nice</code></li>
  <li><code class="language-plaintext highlighter-rouge">limituidrange</code> (Linux 3.5.0 or newer)</li>
  <li><code class="language-plaintext highlighter-rouge">limitgidrange</code> (Linux 3.5.0 or newer)</li>
</ul>

<p>Usage typically looks like:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span> <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">itk</span>     <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="py">user</span>  <span class="p">=&gt;</span> <span class="s1">'someuser'</span><span class="p">,</span>
    <span class="py">group</span> <span class="p">=&gt;</span> <span class="s1">'somegroup'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="jk_mounts"><code class="language-plaintext highlighter-rouge">jk_mounts</code></h5>

<p>Sets up a virtual host with ‘JkMount’ and ‘JkUnMount’ directives to handle the paths for URL mapping between Tomcat and Apache. Default: undef.</p>

<p>The parameter must be an array of hashes where each hash must contain the ‘worker’ and either the ‘mount’ or ‘unmount’ keys.</p>

<p>Usage typically looks like:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">jk_mounts</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">mount</span>   <span class="p">=&gt;</span> <span class="s1">'/*'</span><span class="p">,</span>     <span class="py">worker</span> <span class="p">=&gt;</span> <span class="s1">'tcnode1'</span><span class="p">,</span> <span class="p">},</span>
    <span class="p">{</span> <span class="py">unmount</span> <span class="p">=&gt;</span> <span class="s1">'/*.jpg'</span><span class="p">,</span> <span class="py">worker</span> <span class="p">=&gt;</span> <span class="s1">'tcnode1'</span><span class="p">,</span> <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="keepalive-1"><code class="language-plaintext highlighter-rouge">keepalive</code></h5>

<p>Determines whether to enable persistent HTTP connections with the <a href="https://httpd.apache.org/docs/current/mod/core.html#keepalive"><code class="language-plaintext highlighter-rouge">KeepAlive</code></a> directive for the virtual host. Valid options: ‘Off’, ‘On’ and <code class="language-plaintext highlighter-rouge">undef</code>. Default: <code class="language-plaintext highlighter-rouge">undef</code>, meaning the global, server-wide <a href="https://httpd.apache.org/docs/current/mod/core.html#keepalive"><code class="language-plaintext highlighter-rouge">KeepAlive</code></a> setting is in effect.</p>

<p>Use the <code class="language-plaintext highlighter-rouge">keepalive_timeout</code> and <code class="language-plaintext highlighter-rouge">max_keepalive_requests</code> parameters to set relevant options for the virtual host.</p>

<h5 id="keepalive_timeout-1"><code class="language-plaintext highlighter-rouge">keepalive_timeout</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/core.html#keepalivetimeout"><code class="language-plaintext highlighter-rouge">KeepAliveTimeout</code></a> directive for the virtual host, which determines the amount of time to wait for subsequent requests on a persistent HTTP connection. Default: <code class="language-plaintext highlighter-rouge">undef</code>, meaning the global, server-wide <a href="https://httpd.apache.org/docs/current/mod/core.html#keepalive"><code class="language-plaintext highlighter-rouge">KeepAlive</code></a> setting is in effect.</p>

<p>This parameter is only relevant if either the global, server-wide <a href="#keepalive"><code class="language-plaintext highlighter-rouge">keepalive</code> parameter</a> or the per-vhost <code class="language-plaintext highlighter-rouge">keepalive</code> parameter is enabled.</p>

<h5 id="max_keepalive_requests-1"><code class="language-plaintext highlighter-rouge">max_keepalive_requests</code></h5>

<p>Limits the number of requests allowed per connection to the virtual host. Default: <code class="language-plaintext highlighter-rouge">undef</code>, meaning the global, server-wide <a href="https://httpd.apache.org/docs/current/mod/core.html#keepalive"><code class="language-plaintext highlighter-rouge">KeepAlive</code></a> setting is in effect.</p>

<p>This parameter is only relevant if either the global, server-wide <a href="#keepalive"><code class="language-plaintext highlighter-rouge">keepalive</code> parameter</a> or the per-vhost <code class="language-plaintext highlighter-rouge">keepalive</code> parameter is enabled.</p>

<h5 id="auth_kerb"><code class="language-plaintext highlighter-rouge">auth_kerb</code></h5>

<p>Enable <a href="http://modauthkerb.sourceforge.net/configure.html"><code class="language-plaintext highlighter-rouge">mod_auth_kerb</code></a> parameters for a virtual host. Valid options: Boolean. Default: false.</p>

<p>Usage typically looks like:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">auth_kerb</span>              <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="py">krb_method_negotiate</span>   <span class="p">=&gt;</span> <span class="s1">'on'</span><span class="p">,</span>
  <span class="py">krb_auth_realms</span>        <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'EXAMPLE.ORG'</span><span class="p">],</span>
  <span class="py">krb_local_user_mapping</span> <span class="p">=&gt;</span> <span class="s1">'on'</span><span class="p">,</span>
  <span class="py">directories</span>            <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="py">path</span>         <span class="p">=&gt;</span> <span class="s1">'/var/www/html'</span><span class="p">,</span>
    <span class="py">auth_name</span>    <span class="p">=&gt;</span> <span class="s1">'Kerberos Login'</span><span class="p">,</span>
    <span class="py">auth_type</span>    <span class="p">=&gt;</span> <span class="s1">'Kerberos'</span><span class="p">,</span>
    <span class="py">auth_require</span> <span class="p">=&gt;</span> <span class="s1">'valid-user'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Related parameters follow the names of <code class="language-plaintext highlighter-rouge">mod_auth_kerb</code> directives:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">krb_method_negotiate</code>: Determines whether to use the Negotiate method. Default: ‘on’.</li>
  <li><code class="language-plaintext highlighter-rouge">krb_method_k5passwd</code>: Determines whether to use password-based authentication for Kerberos v5. Default: ‘on’.</li>
  <li><code class="language-plaintext highlighter-rouge">krb_authoritative</code>: If set to ‘off’, authentication controls can be passed on to another module. Default: ‘on’.</li>
  <li><code class="language-plaintext highlighter-rouge">krb_auth_realms</code>: Specifies an array of Kerberos realms to use for authentication. Default: ‘[]’.</li>
  <li><code class="language-plaintext highlighter-rouge">krb_5keytab</code>: Specifies the Kerberos v5 keytab file’s location. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">krb_local_user_mapping</code>: Strips @REALM from usernames for further use. Default: undef.</li>
</ul>

<h5 id="krb_verify_kdc"><code class="language-plaintext highlighter-rouge">krb_verify_kdc</code></h5>

<p>This option can be used to disable the verification tickets against local keytab to prevent KDC spoofing attacks. Default: ‘on’.</p>

<h5 id="krb_servicename"><code class="language-plaintext highlighter-rouge">krb_servicename</code></h5>

<p>Specifies the service name that will be used by Apache for authentication. Corresponding key of this name must be stored in the keytab. Default: ‘HTTP’.</p>

<h5 id="krb_save_credentials"><code class="language-plaintext highlighter-rouge">krb_save_credentials</code></h5>

<p>This option enables credential saving functionality. Default is ‘off’</p>

<h5 id="logroot-1"><code class="language-plaintext highlighter-rouge">logroot</code></h5>

<p>Specifies the location of the virtual host’s logfiles. Default: ‘/var/log/<apache log="" location="">/'.</apache></p>

<h5 id="logroot_ensure"><code class="language-plaintext highlighter-rouge">$logroot_ensure</code></h5>

<p>Determines whether or not to remove the logroot directory for a virtual host. Valid options: ‘directory’,  ‘absent’.</p>

<h5 id="logroot_mode-1"><code class="language-plaintext highlighter-rouge">logroot_mode</code></h5>

<p>Overrides the mode the logroot directory is set to. Default: undef. Do <em>not</em> grant write access to the directory the logs are stored in without being aware of the consequences; for more information, see <a href="https://httpd.apache.org/docs/2.4/logs.html#security">Apache’s log security documentation</a>.</p>

<h5 id="logroot_owner"><code class="language-plaintext highlighter-rouge">logroot_owner</code></h5>

<p>Sets individual user access to the logroot directory. Defaults to ‘undef’.</p>

<h5 id="logroot_group"><code class="language-plaintext highlighter-rouge">logroot_group</code></h5>

<p>Sets group access to the <a href="#logroot"><code class="language-plaintext highlighter-rouge">logroot</code></a> directory. Defaults to ‘undef’.</p>

<h5 id="log_level-1"><code class="language-plaintext highlighter-rouge">log_level</code></h5>

<p>Specifies the verbosity of the error log. Valid options: ‘emerg’, ‘alert’, ‘crit’, ‘error’, ‘warn’, ‘notice’, ‘info’ or ‘debug’. Default: ‘warn’ for the global server configuration, which can be overridden on a per-virtual host basis.</p>

<h6 id="modsec_body_limit"><code class="language-plaintext highlighter-rouge">modsec_body_limit</code></h6>

<p>Configures the maximum request body size (in bytes) ModSecurity will accept for buffering</p>

<h6 id="modsec_disable_vhost"><code class="language-plaintext highlighter-rouge">modsec_disable_vhost</code></h6>

<p>Disables <a href="https://www.modsecurity.org/"><code class="language-plaintext highlighter-rouge">mod_security</code></a> on a virtual host. Only valid if <a href="#class-apachemodsecurity"><code class="language-plaintext highlighter-rouge">apache::mod::security</code></a> is included. Valid options: Boolean. Default: undef.</p>

<h6 id="modsec_disable_ids"><code class="language-plaintext highlighter-rouge">modsec_disable_ids</code></h6>

<p>Array of mod_security IDs to remove from the virtual host. Also takes a hash allowing removal of an ID from a specific location.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">modsec_disable_ids</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="m">90015</span><span class="p">,</span> <span class="m">90016</span> <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">modsec_disable_ids</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="s1">'/location1'</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="m">90015</span><span class="p">,</span> <span class="m">90016</span> <span class="p">]</span> <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="modsec_disable_ips"><code class="language-plaintext highlighter-rouge">modsec_disable_ips</code></h6>

<p>Specifies an array of IP addresses to exclude from <a href="https://www.modsecurity.org/"><code class="language-plaintext highlighter-rouge">mod_security</code></a> rule matching. Default: undef.</p>

<h6 id="modsec_disable_msgs"><code class="language-plaintext highlighter-rouge">modsec_disable_msgs</code></h6>

<p>Array of mod_security Msgs to remove from the virtual host. Also takes a hash allowing removal of an Msg from a specific location. Default: undef.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">modsec_disable_msgs</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="s1">'Blind SQL Injection Attack'</span><span class="p">,</span> <span class="s1">'Session Fixation Attack'</span> <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">modsec_disable_msgs</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="s1">'/location1'</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="s1">'Blind SQL Injection Attack'</span><span class="p">,</span> <span class="s1">'Session Fixation Attack'</span> <span class="p">]</span> <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="modsec_disable_tags"><code class="language-plaintext highlighter-rouge">modsec_disable_tags</code></h6>

<p>Array of mod_security Tags to remove from the virtual host. Also takes a hash allowing removal of an Tag from a specific location. Default: undef.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">modsec_disable_tags</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="s1">'WEB_ATTACK/SQL_INJECTION'</span><span class="p">,</span> <span class="s1">'WEB_ATTACK/XSS'</span> <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">modsec_disable_tags</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="s1">'/location1'</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="s1">'WEB_ATTACK/SQL_INJECTION'</span><span class="p">,</span> <span class="s1">'WEB_ATTACK/XSS'</span> <span class="p">]</span> <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="modsec_audit_log--modsec_audit_log_file--modsec_audit_log_pipe"><code class="language-plaintext highlighter-rouge">modsec_audit_log</code> &amp; <code class="language-plaintext highlighter-rouge">modsec_audit_log_file</code> &amp; <code class="language-plaintext highlighter-rouge">modsec_audit_log_pipe</code></h5>

<p>Determines how to send mod_security audit log (<a href="https://github.com/SpiderLabs/ModSecurity/wiki/Reference-Manual#SecAuditLog">SecAuditLog</a>).</p>

<p>If <code class="language-plaintext highlighter-rouge">modsec_audit_log_file</code> is set, it is relative to <a href="#logroot"><code class="language-plaintext highlighter-rouge">logroot</code></a>. Default: undef.</p>

<table>
  <tbody>
    <tr>
      <td>If <code class="language-plaintext highlighter-rouge">modsec_audit_log_pipe</code> is set, it should start with a pipe. Example ‘</td>
      <td>/path/to/mlogc /path/to/mlogc.conf’. Default: undef.</td>
    </tr>
  </tbody>
</table>

<p>If <code class="language-plaintext highlighter-rouge">modsec_audit_log</code> is true, given a virtual host—for instance, example.com—it defaults to ‘example.com_security_ssl.log’ for <a href="https://httpd.apache.org/docs/current/ssl/index.html">SSL-encrypted</a> virtual hosts and ‘example.com_security.log’ for unencrypted virtual hosts. Default: false.</p>

<p>When none of those parameters is set, the global audit log is used (i.e. ‘‘/var/log/apache2/modsec_audit.log’’ on Debian and derivatives, ‘‘/var/log/httpd/modsec_audit.log’’ on others).</p>

<h5 id="no_proxy_uris"><code class="language-plaintext highlighter-rouge">no_proxy_uris</code></h5>

<p>Specifies URLs you do not want to proxy. This parameter is meant to be used in combination with <a href="#proxy_dest"><code class="language-plaintext highlighter-rouge">proxy_dest</code></a>.</p>

<h5 id="no_proxy_uris_match"><code class="language-plaintext highlighter-rouge">no_proxy_uris_match</code></h5>

<p>This directive is equivalent to <a href="#no_proxy_uris"><code class="language-plaintext highlighter-rouge">no_proxy_uris</code></a>, but takes regular expressions.</p>

<h5 id="proxy_preserve_host"><code class="language-plaintext highlighter-rouge">proxy_preserve_host</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypreservehost">ProxyPreserveHost Directive</a>. Valid options: Boolean. Default: false.</p>

<p>Setting this parameter to true enables the <code class="language-plaintext highlighter-rouge">Host:</code> line from an incoming request to be proxied to the host instead of hostname. Setting it to false sets this directive to ‘Off’.</p>

<h5 id="proxy_add_headers"><code class="language-plaintext highlighter-rouge">proxy_add_headers</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxyaddheaders">ProxyAddHeaders Directive</a>. Valid Options: Boolean. Default: false.</p>

<p>This parameter controlls whether proxy-related HTTP headers (X-Forwarded-For, X-Forwarded-Host and X-Forwarded-Server) get sent to the backend server.</p>

<h5 id="proxy_error_override"><code class="language-plaintext highlighter-rouge">proxy_error_override</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxyerroroverride">ProxyErrorOverride Directive</a>. This directive controls whether Apache should override error pages for proxied content. Default: false.</p>

<h5 id="options-1"><code class="language-plaintext highlighter-rouge">options</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/core.html#options"><code class="language-plaintext highlighter-rouge">Options</code></a> for the specified virtual host. Default: [‘Indexes’,’FollowSymLinks’,’MultiViews’], as demonstrated below:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'site.name.fdqn'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">options</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'Indexes'</span><span class="p">,</span><span class="s1">'FollowSymLinks'</span><span class="p">,</span><span class="s1">'MultiViews'</span><span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: If you use the <a href="#parameter-directories-for-apachevhost"><code class="language-plaintext highlighter-rouge">directories</code></a> parameter of <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a>, ‘Options’, ‘Override’, and ‘DirectoryIndex’ are ignored because they are parameters within <code class="language-plaintext highlighter-rouge">directories</code>.</p>
</blockquote>

<h5 id="override"><code class="language-plaintext highlighter-rouge">override</code></h5>

<p>Sets the overrides for the specified virtual host. Accepts an array of <a href="https://httpd.apache.org/docs/current/mod/core.html#allowoverride">AllowOverride</a> arguments. Default: ‘[none]’.</p>

<h5 id="passenger_app_root"><code class="language-plaintext highlighter-rouge">passenger_app_root</code></h5>

<p>Sets <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerapproot">PassengerRoot</a>, the location of the Passenger application root if different from the DocumentRoot.</p>

<h5 id="passenger_app_env"><code class="language-plaintext highlighter-rouge">passenger_app_env</code></h5>

<p>Sets <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerappenv">PassengerAppEnv</a>, the environment for the Passenger application. If not specifies, defaults to the global setting or ‘production’.</p>

<h5 id="passenger_log_file"><code class="language-plaintext highlighter-rouge">passenger_log_file</code></h5>

<p>By default, Passenger log messages are written to the Apache global error log. With <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerlogfile">PassengerLogFile</a>, you can configure those messages to be logged to a different file. This option is only available since Passenger 5.0.5.</p>

<h5 id="passenger_log_level"><code class="language-plaintext highlighter-rouge">passenger_log_level</code></h5>

<p>This option allows to specify how much information should be written to the log file. If not set, <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerloglevel">PassengerLogLevel</a> will not show up in the configuration file and the defaults are used. For Passenger &gt; 3.0.0 the default is ‘0’, since 5.0.0 it’s ‘3’.</p>

<h5 id="passenger_ruby"><code class="language-plaintext highlighter-rouge">passenger_ruby</code></h5>

<p>Sets <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerruby">PassengerRuby</a>, the Ruby interpreter to use for the application, on this virtual host.</p>

<h5 id="passenger_min_instances"><code class="language-plaintext highlighter-rouge">passenger_min_instances</code></h5>

<p>Sets <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengermininstances">PassengerMinInstances</a>, the minimum number of application processes to run.</p>

<h5 id="passenger_max_instances_per_app"><code class="language-plaintext highlighter-rouge">passenger_max_instances_per_app</code></h5>

<p>Sets <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengermaxinstancesperapp">PassengerMaxInstancesPerApp</a>, the maximum number of application processes that may simultaneously exist for a single application.</p>

<h5 id="passenger_start_timeout"><code class="language-plaintext highlighter-rouge">passenger_start_timeout</code></h5>

<p>Sets <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerstarttimeout">PassengerStartTimeout</a>, the timeout for the application startup.</p>

<h5 id="passenger_pre_start"><code class="language-plaintext highlighter-rouge">passenger_pre_start</code></h5>

<p>Sets <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerprestart">PassengerPreStart</a>, the URL of the application if pre-starting is required.</p>

<h5 id="passenger_user"><code class="language-plaintext highlighter-rouge">passenger_user</code></h5>

<p>Sets <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengeruser">PassengerUser</a>, the running user for sandboxing applications.</p>

<h5 id="passenger_high_performance"><code class="language-plaintext highlighter-rouge">passenger_high_performance</code></h5>

<p>Sets the <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerhighperformance"><code class="language-plaintext highlighter-rouge">PassengerHighPerformance</code></a> parameter. Valid options: ‘true’, ‘false’. Default: undef.</p>

<h5 id="passenger_nodejs"><code class="language-plaintext highlighter-rouge">passenger_nodejs</code></h5>

<p>Sets the <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengernodejs"><code class="language-plaintext highlighter-rouge">PassengerNodejs</code></a>, the NodeJS interpreter to use for the application, on this virtual host.</p>

<h5 id="passenger_sticky_sessions"><code class="language-plaintext highlighter-rouge">passenger_sticky_sessions</code></h5>

<p>Sets the <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerstickysessions"><code class="language-plaintext highlighter-rouge">PassengerStickySessions</code></a> parameter. Valid options: ‘true’, ‘false’. Default: undef.</p>

<h5 id="passenger_startup_file"><code class="language-plaintext highlighter-rouge">passenger_startup_file</code></h5>

<p>Sets the <a href="https://www.phusionpassenger.com/library/config/apache/reference/#passengerstartupfile"><code class="language-plaintext highlighter-rouge">PassengerStartupFile</code></a> path. This path is relative to the application root.</p>

<h5 id="php_flags--values"><code class="language-plaintext highlighter-rouge">php_flags &amp; values</code></h5>

<p>Allows per-virtual host setting <a href="http://php.net/manual/en/configuration.changes.php"><code class="language-plaintext highlighter-rouge">php_value</code>s or <code class="language-plaintext highlighter-rouge">php_flag</code>s</a>. These flags or values can be overwritten by a user or an application. Default: ‘{}’.</p>

<h5 id="php_admin_flags--values"><code class="language-plaintext highlighter-rouge">php_admin_flags &amp; values</code></h5>

<p>Allows per-virtual host setting <a href="http://php.net/manual/en/configuration.changes.php"><code class="language-plaintext highlighter-rouge">php_admin_value</code>s or <code class="language-plaintext highlighter-rouge">php_admin_flag</code>s</a>. These flags or values cannot be overwritten by a user or an application. Default: ‘{}’.</p>

<h5 id="port"><code class="language-plaintext highlighter-rouge">port</code></h5>

<p>Sets the port the host is configured on. The module’s defaults ensure the host listens on port 80 for non-SSL virtual hosts and port 443 for SSL virtual hosts. The host only listens on the port set in this parameter.</p>

<h5 id="priority-1"><code class="language-plaintext highlighter-rouge">priority</code></h5>

<p>Sets the relative load-order for Apache HTTPD VirtualHost configuration files. Default: ‘25’.</p>

<p>If nothing matches the priority, the first name-based virtual host is used. Likewise, passing a higher priority causes the alphabetically first name-based virtual host to be used if no other names match.</p>

<blockquote>
  <p><strong>Note:</strong> You should not need to use this parameter. However, if you do use it, be aware that the <code class="language-plaintext highlighter-rouge">default_vhost</code> parameter for <code class="language-plaintext highlighter-rouge">apache::vhost</code> passes a priority of ‘15’.</p>
</blockquote>

<p>To omit the priority prefix in file names, pass a priority of false.</p>

<h5 id="proxy_dest"><code class="language-plaintext highlighter-rouge">proxy_dest</code></h5>

<p>Specifies the destination address of a <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypass">ProxyPass</a> configuration. Default: undef.</p>

<h5 id="proxy_pass"><code class="language-plaintext highlighter-rouge">proxy_pass</code></h5>

<p>Specifies an array of <code class="language-plaintext highlighter-rouge">path =&gt; URI</code> values for a <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypass">ProxyPass</a> configuration. Defaults to ‘undef’. Optionally parameters can be added as an array.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'site.name.fdqn'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">proxy_pass</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/a'</span><span class="p">,</span> <span class="s1">'url'</span> <span class="p">=&gt;</span> <span class="s1">'http://backend-a/'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/b'</span><span class="p">,</span> <span class="s1">'url'</span> <span class="p">=&gt;</span> <span class="s1">'http://backend-b/'</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/c'</span><span class="p">,</span> <span class="s1">'url'</span> <span class="p">=&gt;</span> <span class="s1">'http://backend-a/c'</span><span class="p">,</span> <span class="s1">'params'</span> <span class="p">=&gt;</span> <span class="p">{</span><span class="s1">'max'</span><span class="p">=&gt;</span><span class="m">20</span><span class="p">,</span> <span class="s1">'ttl'</span><span class="p">=&gt;</span><span class="m">120</span><span class="p">,</span> <span class="s1">'retry'</span><span class="p">=&gt;</span><span class="m">300</span><span class="p">}},</span>
    <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/l'</span><span class="p">,</span> <span class="s1">'url'</span> <span class="p">=&gt;</span> <span class="s1">'http://backend-xy'</span><span class="p">,</span>
      <span class="s1">'reverse_urls'</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'http://backend-x'</span><span class="p">,</span> <span class="s1">'http://backend-y'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/d'</span><span class="p">,</span> <span class="s1">'url'</span> <span class="p">=&gt;</span> <span class="s1">'http://backend-a/d'</span><span class="p">,</span>
      <span class="s1">'params'</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="s1">'retry'</span> <span class="p">=&gt;</span> <span class="s1">'0'</span><span class="p">,</span> <span class="s1">'timeout'</span> <span class="p">=&gt;</span> <span class="s1">'5'</span> <span class="p">},</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/e'</span><span class="p">,</span> <span class="s1">'url'</span> <span class="p">=&gt;</span> <span class="s1">'http://backend-a/e'</span><span class="p">,</span>
      <span class="s1">'keywords'</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'nocanon'</span><span class="p">,</span> <span class="s1">'interpolate'</span><span class="p">]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/f'</span><span class="p">,</span> <span class="s1">'url'</span> <span class="p">=&gt;</span> <span class="s1">'http://backend-f/'</span><span class="p">,</span>
      <span class="s1">'setenv'</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'proxy-nokeepalive 1'</span><span class="p">,</span><span class="s1">'force-proxy-request-1.0 1'</span><span class="p">]},</span>
    <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/g'</span><span class="p">,</span> <span class="s1">'url'</span> <span class="p">=&gt;</span> <span class="s1">'http://backend-g/'</span><span class="p">,</span>
      <span class="s1">'reverse_cookies'</span> <span class="p">=&gt;</span> <span class="p">[{</span><span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/g'</span><span class="p">,</span> <span class="s1">'url'</span> <span class="p">=&gt;</span> <span class="s1">'http://backend-g/'</span><span class="p">,},</span> <span class="p">{</span><span class="s1">'domain'</span> <span class="p">=&gt;</span> <span class="s1">'http://backend-g'</span><span class="p">,</span> <span class="s1">'url'</span> <span class="p">=&gt;</span> <span class="s1">'http:://backend-g'</span><span class="p">,},],</span> <span class="p">},</span>
    <span class="p">{</span> <span class="s1">'path'</span> <span class="p">=&gt;</span> <span class="s1">'/h'</span><span class="p">,</span> <span class="s1">'url'</span> <span class="p">=&gt;</span> <span class="s1">'http://backend-h/h'</span><span class="p">,</span>
      <span class="s1">'no_proxy_uris'</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'/h/admin'</span><span class="p">,</span> <span class="s1">'/h/server-status'</span><span class="p">]</span> <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">reverse_urls</code>. <em>Optional.</em> This setting is useful when used with <code class="language-plaintext highlighter-rouge">mod_proxy_balancer</code>. Valid options: an array or string.</li>
  <li><code class="language-plaintext highlighter-rouge">reverse_cookies</code>. <em>Optional.</em> Sets <code class="language-plaintext highlighter-rouge">ProxyPassReverseCookiePath</code> and <code class="language-plaintext highlighter-rouge">ProxyPassReverseCookieDomain</code>.</li>
  <li><code class="language-plaintext highlighter-rouge">params</code>. <em>Optional.</em> Allows for ProxyPass key-value parameters, such as connection settings.</li>
  <li><code class="language-plaintext highlighter-rouge">setenv</code>. <em>Optional.</em> Sets <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#envsettings">environment variables</a> for the proxy directive. Valid options: array.</li>
</ul>

<h5 id="proxy_dest_match"><code class="language-plaintext highlighter-rouge">proxy_dest_match</code></h5>

<p>This directive is equivalent to <a href="#proxy_dest"><code class="language-plaintext highlighter-rouge">proxy_dest</code></a>, but takes regular expressions, see <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypassmatch">ProxyPassMatch</a> for details.</p>

<h5 id="proxy_dest_reverse_match"><code class="language-plaintext highlighter-rouge">proxy_dest_reverse_match</code></h5>

<p>Allows you to pass a ProxyPassReverse if <a href="#proxy_dest_match"><code class="language-plaintext highlighter-rouge">proxy_dest_match</code></a> is specified. See <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypassreverse">ProxyPassReverse</a> for details.</p>

<h5 id="proxy_pass_match"><code class="language-plaintext highlighter-rouge">proxy_pass_match</code></h5>

<p>This directive is equivalent to <a href="#proxy_pass"><code class="language-plaintext highlighter-rouge">proxy_pass</code></a>, but takes regular expressions, see <a href="https://httpd.apache.org/docs/current/mod/mod_proxy.html#proxypassmatch">ProxyPassMatch</a> for details.</p>

<h5 id="rack_base_uris"><code class="language-plaintext highlighter-rouge">rack_base_uris</code></h5>

<p>Specifies the resource identifiers for a rack configuration. The file paths specified are listed as rack application roots for <a href="http://www.modrails.com/documentation/Users%20guide%20Apache.html#_railsbaseuri_and_rackbaseuri">Phusion Passenger</a> in the _rack.erb template. Default: undef.</p>

<p>#####<code class="language-plaintext highlighter-rouge">passenger_base_uris</code></p>

<p>Used to specify that the given URI is a Phusion Passenger-served application. The file paths specified are listed as passenger application roots for <a href="https://www.phusionpassenger.com/documentation/Users%20guide%20Apache.html#PassengerBaseURI">Phusion Passenger</a> in the _passenger_base_uris.erb template. Default: undef.</p>

<h5 id="redirect_dest"><code class="language-plaintext highlighter-rouge">redirect_dest</code></h5>

<p>Specifies the address to redirect to. Default: undef.</p>

<h5 id="redirect_source"><code class="language-plaintext highlighter-rouge">redirect_source</code></h5>

<p>Specifies the source URIs that redirect to the destination specified in <code class="language-plaintext highlighter-rouge">redirect_dest</code>. If more than one item for redirect is supplied, the source and destination must be the same length, and the items are order-dependent.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'site.name.fdqn'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">redirect_source</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'/images'</span><span class="p">,</span><span class="s1">'/downloads'</span><span class="p">],</span>
  <span class="py">redirect_dest</span>   <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'http://img.example.com/'</span><span class="p">,</span><span class="s1">'http://downloads.example.com/'</span><span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="redirect_status"><code class="language-plaintext highlighter-rouge">redirect_status</code></h5>

<p>Specifies the status to append to the redirect. Default: undef.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'site.name.fdqn'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">redirect_status</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'temp'</span><span class="p">,</span><span class="s1">'permanent'</span><span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="redirectmatch_regexp--redirectmatch_status--redirectmatch_dest"><code class="language-plaintext highlighter-rouge">redirectmatch_regexp</code> &amp; <code class="language-plaintext highlighter-rouge">redirectmatch_status</code> &amp; <code class="language-plaintext highlighter-rouge">redirectmatch_dest</code></h5>

<p>Determines which server status should be raised for a given regular expression and where to forward the user to. Entered as arrays. Default: undef.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'site.name.fdqn'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">redirectmatch_status</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'404'</span><span class="p">,</span><span class="s1">'404'</span><span class="p">],</span>
  <span class="py">redirectmatch_regexp</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'\.git(/.*|$)/'</span><span class="p">,</span><span class="s1">'\.svn(/.*|$)'</span><span class="p">],</span>
  <span class="py">redirectmatch_dest</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'http://www.example.com/1'</span><span class="p">,</span><span class="s1">'http://www.example.com/2'</span><span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="request_headers"><code class="language-plaintext highlighter-rouge">request_headers</code></h5>

<p>Modifies collected <a href="https://httpd.apache.org/docs/current/mod/mod_headers.html#requestheader">request headers</a> in various ways, including adding additional request headers, removing request headers, etc. Default: undef.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'site.name.fdqn'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">request_headers</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="s1">'append MirrorID "mirror 12"'</span><span class="p">,</span>
    <span class="s1">'unset MirrorID'</span><span class="p">,</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>
<h5 id="rewrites"><code class="language-plaintext highlighter-rouge">rewrites</code></h5>

<p>Creates URL rewrite rules. Expects an array of hashes, and the hash keys can be any of ‘comment’, ‘rewrite_base’, ‘rewrite_cond’, ‘rewrite_rule’ or ‘rewrite_map’. Default: undef.</p>

<p>For example, you can specify that anyone trying to access index.html is served welcome.html</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'site.name.fdqn'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">rewrites</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="p">{</span> <span class="py">rewrite_rule</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'^index\.html$ welcome.html'</span><span class="p">]</span> <span class="p">}</span> <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The parameter allows rewrite conditions that, when true, execute the associated rule. For instance, if you wanted to rewrite URLs only if the visitor is using IE</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'site.name.fdqn'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">rewrites</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="py">comment</span>      <span class="p">=&gt;</span> <span class="s1">'redirect IE'</span><span class="p">,</span>
      <span class="py">rewrite_cond</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'%{HTTP_USER_AGENT} ^MSIE'</span><span class="p">],</span>
      <span class="py">rewrite_rule</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'^index\.html$ welcome.html'</span><span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You can also apply multiple conditions. For instance, rewrite index.html to welcome.html only when the browser is Lynx or Mozilla (version 1 or 2)</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'site.name.fdqn'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">rewrites</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="py">comment</span>      <span class="p">=&gt;</span> <span class="s1">'Lynx or Mozilla v1/2'</span><span class="p">,</span>
      <span class="py">rewrite_cond</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'%{HTTP_USER_AGENT} ^Lynx/ [OR]'</span><span class="p">,</span> <span class="s1">'%{HTTP_USER_AGENT} ^Mozilla/[12]'</span><span class="p">],</span>
      <span class="py">rewrite_rule</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'^index\.html$ welcome.html'</span><span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Multiple rewrites and conditions are also possible</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'site.name.fdqn'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">rewrites</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="py">comment</span>      <span class="p">=&gt;</span> <span class="s1">'Lynx or Mozilla v1/2'</span><span class="p">,</span>
      <span class="py">rewrite_cond</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'%{HTTP_USER_AGENT} ^Lynx/ [OR]'</span><span class="p">,</span> <span class="s1">'%{HTTP_USER_AGENT} ^Mozilla/[12]'</span><span class="p">],</span>
      <span class="py">rewrite_rule</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'^index\.html$ welcome.html'</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="py">comment</span>      <span class="p">=&gt;</span> <span class="s1">'Internet Explorer'</span><span class="p">,</span>
      <span class="py">rewrite_cond</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'%{HTTP_USER_AGENT} ^MSIE'</span><span class="p">],</span>
      <span class="py">rewrite_rule</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'^index\.html$ /index.IE.html [L]'</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span>
      <span class="py">rewrite_base</span> <span class="p">=&gt;</span> <span class="o">/</span><span class="n">apps</span><span class="o">/</span><span class="p">,</span>
      <span class="py">rewrite_rule</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'^index\.cgi$ index.php'</span><span class="p">,</span> <span class="s1">'^index\.html$ index.php'</span><span class="p">,</span> <span class="s1">'^index\.asp$ index.html'</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="p">{</span> <span class="py">comment</span>      <span class="p">=&gt;</span> <span class="s1">'Rewrite to lower case'</span><span class="p">,</span>
      <span class="py">rewrite_cond</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'%{REQUEST_URI} [A-Z]'</span><span class="p">],</span>
      <span class="py">rewrite_map</span>  <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'lc int:tolower'</span><span class="p">],</span>
      <span class="py">rewrite_rule</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'(.*) ${lc:$1} [R=301,L]'</span><span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Refer to the <a href="https://httpd.apache.org/docs/current/mod/mod_rewrite.html"><code class="language-plaintext highlighter-rouge">mod_rewrite</code> documentation</a> for more details on what is possible with rewrite rules and conditions.</p>

<h5 id="rewrite_inherit"><code class="language-plaintext highlighter-rouge">rewrite_inherit</code></h5>

<p>Determines whether the virtual host inherits global rewrite rules. Default: false.</p>

<p>Rewrite rules may be specified globally (in <code class="language-plaintext highlighter-rouge">$conf_file</code> or <code class="language-plaintext highlighter-rouge">$confd_dir</code>) or inside the virtual host <code class="language-plaintext highlighter-rouge">.conf</code> file. By default, virtual hosts do not inherit global settings. To activate inheritance, specify the <code class="language-plaintext highlighter-rouge">rewrites</code> parameter and set <code class="language-plaintext highlighter-rouge">rewrite_inherit</code> parameter to <code class="language-plaintext highlighter-rouge">true</code>:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'site.name.fdqn'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">rewrites</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="o">&lt;</span><span class="n">rules</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="py">rewrite_inherit</span> <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: The <code class="language-plaintext highlighter-rouge">rewrites</code> parameter is <strong>required</strong> for this to have effect</p>
</blockquote>

<h6 id="some-background">Some background</h6>

<p>Apache activates global <code class="language-plaintext highlighter-rouge">Rewrite</code> rules inheritance if the virtual host files contains the following directives:</p>

<pre><code class="language-ApacheConf">RewriteEngine On
RewriteOptions Inherit
</code></pre>

<p>Refer to the <a href="https://httpd.apache.org/docs/2.2/mod/mod_rewrite.html">official <code class="language-plaintext highlighter-rouge">mod_rewrite</code> documentation</a>, section “Rewriting in Virtual Hosts”.</p>

<h5 id="scriptalias-1"><code class="language-plaintext highlighter-rouge">scriptalias</code></h5>

<p>Defines a directory of CGI scripts to be aliased to the path ‘/cgi-bin’, such as ‘/usr/scripts’. Default: undef.</p>

<h5 id="scriptaliases"><code class="language-plaintext highlighter-rouge">scriptaliases</code></h5>

<blockquote>
  <p><strong>Note</strong>: This parameter is deprecated in favor of the <code class="language-plaintext highlighter-rouge">aliases</code> parameter.</p>
</blockquote>

<p>Passes an array of hashes to the virtual host to create either ScriptAlias or ScriptAliasMatch statements per the <a href="https://httpd.apache.org/docs/current/mod/mod_alias.html"><code class="language-plaintext highlighter-rouge">mod_alias</code> documentation</a>.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="py">scriptaliases</span> <span class="p">=&gt;</span> <span class="p">[</span>
  <span class="p">{</span>
    <span class="py">alias</span> <span class="p">=&gt;</span> <span class="s1">'/myscript'</span><span class="p">,</span>
    <span class="py">path</span>  <span class="p">=&gt;</span> <span class="s1">'/usr/share/myscript'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="py">aliasmatch</span> <span class="p">=&gt;</span> <span class="s1">'^/foo(.*)'</span><span class="p">,</span>
    <span class="py">path</span>       <span class="p">=&gt;</span> <span class="s1">'/usr/share/fooscripts$1'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="py">aliasmatch</span> <span class="p">=&gt;</span> <span class="s1">'^/bar/(.*)'</span><span class="p">,</span>
    <span class="py">path</span>       <span class="p">=&gt;</span> <span class="s1">'/usr/share/bar/wrapper.sh/$1'</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="py">alias</span> <span class="p">=&gt;</span> <span class="s1">'/neatscript'</span><span class="p">,</span>
    <span class="py">path</span>  <span class="p">=&gt;</span> <span class="s1">'/usr/share/neatscript'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">]</span>
</code></pre></div></div>

<p>The ScriptAlias and ScriptAliasMatch directives are created in the order specified. As with <a href="#aliases">Alias and AliasMatch</a> directives, specify more specific aliases before more general ones to avoid shadowing.</p>

<h5 id="serveradmin-1"><code class="language-plaintext highlighter-rouge">serveradmin</code></h5>

<p>Specifies the email address Apache displays when it renders one of its error pages. Default: undef.</p>

<h5 id="serveraliases"><code class="language-plaintext highlighter-rouge">serveraliases</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/core.html#serveralias">ServerAliases</a> of the site. Default: ‘[]’.</p>

<h5 id="servername-1"><code class="language-plaintext highlighter-rouge">servername</code></h5>

<p>Sets the servername corresponding to the hostname you connect to the virtual host at. Default: the title of the resource.</p>

<h5 id="setenv"><code class="language-plaintext highlighter-rouge">setenv</code></h5>

<p>Used by HTTPD to set environment variables for virtual hosts. Default: ‘[]’.</p>

<p>Example:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'setenv.example.com'</span><span class="p">:</span>
  <span class="py">setenv</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'SPECIAL_PATH /foo/bin'</span><span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="setenvif"><code class="language-plaintext highlighter-rouge">setenvif</code></h5>

<p>Used by HTTPD to conditionally set environment variables for virtual hosts. Default: ‘[]’.</p>

<h5 id="setenvifnocase"><code class="language-plaintext highlighter-rouge">setenvifnocase</code></h5>

<p>Used by HTTPD to conditionally set environment variables for virtual hosts (caseless matching). Default: ‘[]’.</p>

<h5 id="suphp_addhandler-suphp_configpath--suphp_engine"><code class="language-plaintext highlighter-rouge">suphp_addhandler</code>, <code class="language-plaintext highlighter-rouge">suphp_configpath</code>, &amp; <code class="language-plaintext highlighter-rouge">suphp_engine</code></h5>

<p>Sets up a virtual host with <a href="http://suphp.org/DocumentationView.html?file=apache/CONFIG">suPHP</a>.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">suphp_addhandler</code>. Default: ‘php5-script’ on RedHat and FreeBSD, and ‘x-httpd-php’ on Debian and Gentoo.</li>
  <li><code class="language-plaintext highlighter-rouge">suphp_configpath</code>. Default: undef on RedHat and FreeBSD, and ‘/etc/php5/apache2’ on Debian and Gentoo.</li>
  <li><code class="language-plaintext highlighter-rouge">suphp_engine</code>. Valid options: ‘on’ or ‘off’. Default: ‘off’.</li>
</ul>

<p>An example virtual host configuration with suPHP:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'suphp.example.com'</span><span class="p">:</span>
  <span class="py">port</span>             <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>          <span class="p">=&gt;</span> <span class="s1">'/home/appuser/myphpapp'</span><span class="p">,</span>
  <span class="py">suphp_addhandler</span> <span class="p">=&gt;</span> <span class="s1">'x-httpd-php'</span><span class="p">,</span>
  <span class="py">suphp_engine</span>     <span class="p">=&gt;</span> <span class="s1">'on'</span><span class="p">,</span>
  <span class="py">suphp_configpath</span> <span class="p">=&gt;</span> <span class="s1">'/etc/php5/apache2'</span><span class="p">,</span>
  <span class="py">directories</span>      <span class="p">=&gt;</span> <span class="p">{</span> <span class="py">path</span> <span class="p">=&gt;</span> <span class="s1">'/home/appuser/myphpapp'</span><span class="p">,</span>
    <span class="s1">'suphp'</span>        <span class="p">=&gt;</span> <span class="p">{</span> <span class="py">user</span> <span class="p">=&gt;</span> <span class="s1">'myappuser'</span><span class="p">,</span> <span class="py">group</span> <span class="p">=&gt;</span> <span class="s1">'myappgroup'</span> <span class="p">},</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="vhost_name"><code class="language-plaintext highlighter-rouge">vhost_name</code></h5>

<p>Enables name-based virtual hosting. If no IP is passed to the virtual host, but the virtual host is assigned a port, then the virtual host name is ‘vhost_name:port’. If the virtual host has no assigned IP or port, the virtual host name is set to the title of the resource. Default: ‘*’.</p>

<h5 id="virtual_docroot"><code class="language-plaintext highlighter-rouge">virtual_docroot</code></h5>

<p>Sets up a virtual host with a wildcard alias subdomain mapped to a directory with the same name. For example, ‘http://example.com’ would map to ‘/var/www/example.com’. Default: false.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'subdomain.loc'</span><span class="p">:</span>
  <span class="py">vhost_name</span>      <span class="p">=&gt;</span> <span class="s1">'*'</span><span class="p">,</span>
  <span class="py">port</span>            <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">virtual_docroot</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/%-2+'</span><span class="p">,</span>
  <span class="py">docroot</span>         <span class="p">=&gt;</span> <span class="s1">'/var/www'</span><span class="p">,</span>
  <span class="py">serveraliases</span>   <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'*.loc'</span><span class="p">,],</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="wsgi_daemon_process-wsgi_daemon_process_options-wsgi_process_group-wsgi_script_aliases--wsgi_pass_authorization"><code class="language-plaintext highlighter-rouge">wsgi_daemon_process</code>, <code class="language-plaintext highlighter-rouge">wsgi_daemon_process_options</code>, <code class="language-plaintext highlighter-rouge">wsgi_process_group</code>, <code class="language-plaintext highlighter-rouge">wsgi_script_aliases</code>, &amp; <code class="language-plaintext highlighter-rouge">wsgi_pass_authorization</code></h5>

<p>Sets up a virtual host with <a href="https://github.com/GrahamDumpleton/mod_wsgi">WSGI</a>.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">wsgi_daemon_process</code>: A hash that sets the name of the WSGI daemon, accepting <a href="http://modwsgi.readthedocs.org/en/latest/configuration-directives/WSGIDaemonProcess.html">certain keys</a>. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">wsgi_daemon_process_options</code>. <em>Optional.</em> Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">wsgi_process_group</code>: Sets the group ID that the virtual host runs under. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">wsgi_script_aliases</code>: Requires a hash of web paths to filesystem .wsgi paths. Default: undef.</li>
  <li><code class="language-plaintext highlighter-rouge">wsgi_script_aliases_match</code>: Requires a hash of web path regexes to filesystem .wsgi paths. Default: undef</li>
  <li><code class="language-plaintext highlighter-rouge">wsgi_pass_authorization</code>: Uses the WSGI application to handle authorization instead of Apache when set to ‘On’. For more information, see [mod_wsgi’s WSGIPassAuthorization documentation] (https://modwsgi.readthedocs.org/en/latest/configuration-directives/WSGIPassAuthorization.html). Default: undef, leading Apache to use its default value of ‘Off’.</li>
  <li><code class="language-plaintext highlighter-rouge">wsgi_chunked_request</code>: Enables support for chunked requests. Default: undef.</li>
</ul>

<p>An example virtual host configuration with WSGI:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'wsgi.example.com'</span><span class="p">:</span>
  <span class="py">port</span>                        <span class="p">=&gt;</span> <span class="s1">'80'</span><span class="p">,</span>
  <span class="py">docroot</span>                     <span class="p">=&gt;</span> <span class="s1">'/var/www/pythonapp'</span><span class="p">,</span>
  <span class="py">wsgi_daemon_process</span>         <span class="p">=&gt;</span> <span class="s1">'wsgi'</span><span class="p">,</span>
  <span class="py">wsgi_daemon_process_options</span> <span class="p">=&gt;</span>
    <span class="p">{</span> <span class="py">processes</span>    <span class="p">=&gt;</span> <span class="s1">'2'</span><span class="p">,</span>
      <span class="py">threads</span>      <span class="p">=&gt;</span> <span class="s1">'15'</span><span class="p">,</span>
      <span class="n">display</span><span class="o">-</span><span class="py">name</span> <span class="p">=&gt;</span> <span class="s1">'%{GROUP}'</span><span class="p">,</span>
     <span class="p">},</span>
  <span class="py">wsgi_process_group</span>          <span class="p">=&gt;</span> <span class="s1">'wsgi'</span><span class="p">,</span>
  <span class="py">wsgi_script_aliases</span>         <span class="p">=&gt;</span> <span class="p">{</span> <span class="s1">'/'</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/demo.wsgi'</span> <span class="p">},</span>
  <span class="py">wsgi_chunked_request</span>        <span class="p">=&gt;</span> <span class="s1">'On'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="parameter-directories-for-apachevhost">Parameter <code class="language-plaintext highlighter-rouge">directories</code> for <code class="language-plaintext highlighter-rouge">apache::vhost</code></h4>

<p>The <code class="language-plaintext highlighter-rouge">directories</code> parameter within the <code class="language-plaintext highlighter-rouge">apache::vhost</code> class passes an array of hashes to the virtual host to create <a href="https://httpd.apache.org/docs/current/mod/core.html#directory">Directory</a>, <a href="https://httpd.apache.org/docs/current/mod/core.html#files">File</a>, and <a href="https://httpd.apache.org/docs/current/mod/core.html#location">Location</a> directive blocks. These blocks take the form, ‘&lt; Directory /path/to/directory&gt;…&lt; /Directory&gt;’.</p>

<p>The <code class="language-plaintext highlighter-rouge">path</code> key sets the path for the directory, files, and location blocks. Its value must be a path for the ‘directory’, ‘files’, and ‘location’ providers, or a regex for the ‘directorymatch’, ‘filesmatch’, or ‘locationmatch’ providers. Each hash passed to <code class="language-plaintext highlighter-rouge">directories</code> <strong>must</strong> contain <code class="language-plaintext highlighter-rouge">path</code> as one of the keys.</p>

<p>The <code class="language-plaintext highlighter-rouge">provider</code> key is optional. If missing, this key defaults to ‘directory’. Valid options: ‘directory’, ‘files’, ‘proxy’, ‘location’, ‘directorymatch’, ‘filesmatch’, ‘proxymatch’ or ‘locationmatch’. If you set <code class="language-plaintext highlighter-rouge">provider</code> to ‘directorymatch’, it uses the keyword ‘DirectoryMatch’ in the Apache config file.</p>

<p>An example use of <code class="language-plaintext highlighter-rouge">directories</code>:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'files.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/var/www/files'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="s1">'path'</span>     <span class="p">=&gt;</span> <span class="s1">'/var/www/files'</span><span class="p">,</span>
      <span class="s1">'provider'</span> <span class="p">=&gt;</span> <span class="s1">'files'</span><span class="p">,</span>
      <span class="s1">'deny'</span>     <span class="p">=&gt;</span> <span class="s1">'from all'</span><span class="p">,</span>
     <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note:</strong> At least one directory should match the <code class="language-plaintext highlighter-rouge">docroot</code> parameter. After you start declaring directories, <code class="language-plaintext highlighter-rouge">apache::vhost</code> assumes that all required Directory blocks will be declared. If not defined, a single default Directory block is created that matches the <code class="language-plaintext highlighter-rouge">docroot</code> parameter.</p>
</blockquote>

<p>Available handlers, represented as keys, should be placed within the <code class="language-plaintext highlighter-rouge">directory</code>, <code class="language-plaintext highlighter-rouge">files</code>, or <code class="language-plaintext highlighter-rouge">location</code> hashes. This looks like</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="p">{</span> <span class="py">path</span> <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span> <span class="py">handler</span> <span class="p">=&gt;</span> <span class="n">value</span> <span class="p">}</span> <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Any handlers you do not set in these hashes are considered ‘undefined’ within Puppet and are not added to the virtual host, resulting in the module using their default values. Supported handlers are:</p>

<h6 id="addhandlers"><code class="language-plaintext highlighter-rouge">addhandlers</code></h6>

<p>Sets <a href="https://httpd.apache.org/docs/current/mod/mod_mime.html#addhandler">AddHandler</a> directives, which map filename extensions to the specified handler. Accepts a list of hashes, with <code class="language-plaintext highlighter-rouge">extensions</code> serving to list the extensions being managed by the handler, and takes the form: <code class="language-plaintext highlighter-rouge">{ handler =&gt; 'handler-name', extensions =&gt; ['extension'] }</code>.</p>

<p>An example:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>        <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">addhandlers</span> <span class="p">=&gt;</span> <span class="p">[{</span> <span class="py">handler</span> <span class="p">=&gt;</span> <span class="s1">'cgi-script'</span><span class="p">,</span> <span class="py">extensions</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'.cgi'</span><span class="p">]}],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="allow"><code class="language-plaintext highlighter-rouge">allow</code></h6>

<p>Sets an <a href="https://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#allow">Allow</a> directive, which groups authorizations based on hostnames or IPs. <strong>Deprecated:</strong> This parameter is being deprecated due to a change in Apache. It only works with Apache 2.2 and lower. You can use it as a single string for one rule or as an array for more than one.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>  <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">allow</span> <span class="p">=&gt;</span> <span class="s1">'from example.org'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="allow_override"><code class="language-plaintext highlighter-rouge">allow_override</code></h6>

<p>Sets the types of directives allowed in <a href="https://httpd.apache.org/docs/current/mod/core.html#allowoverride">.htaccess</a> files. Accepts an array.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>      <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span>  <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>           <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">allow_override</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'AuthConfig'</span><span class="p">,</span> <span class="s1">'Indexes'</span><span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="auth_basic_authoritative"><code class="language-plaintext highlighter-rouge">auth_basic_authoritative</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_auth_basic.html#authbasicauthoritative">AuthBasicAuthoritative</a>, which determines whether authorization and authentication are passed to lower level Apache modules.</p>

<h6 id="auth_basic_fake"><code class="language-plaintext highlighter-rouge">auth_basic_fake</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_auth_basic.html#authbasicfake">AuthBasicFake</a>, which statically configures authorization credentials for a given directive block.</p>

<h6 id="auth_basic_provider"><code class="language-plaintext highlighter-rouge">auth_basic_provider</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_auth_basic.html#authbasicprovider">AuthBasicProvider</a>, which sets the authentication provider for a given location.</p>

<h6 id="auth_digest_algorithm"><code class="language-plaintext highlighter-rouge">auth_digest_algorithm</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_auth_digest.html#authdigestalgorithm">AuthDigestAlgorithm</a>, which selects the algorithm used to calculate the challenge and response hashes.</p>

<h6 id="auth_digest_domain"><code class="language-plaintext highlighter-rouge">auth_digest_domain</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_auth_digest.html#authdigestdomain">AuthDigestDomain</a>, which allows you to specify one or more URIs in the same protection space for digest authentication.</p>

<h6 id="auth_digest_nonce_lifetime"><code class="language-plaintext highlighter-rouge">auth_digest_nonce_lifetime</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_auth_digest.html#authdigestnoncelifetime">AuthDigestNonceLifetime</a>, which controls how long the server nonce is valid.</p>

<h6 id="auth_digest_provider"><code class="language-plaintext highlighter-rouge">auth_digest_provider</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_auth_digest.html#authdigestprovider">AuthDigestProvider</a>, which sets the authentication provider for a given location.</p>

<h6 id="auth_digest_qop"><code class="language-plaintext highlighter-rouge">auth_digest_qop</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_auth_digest.html#authdigestqop">AuthDigestQop</a>, which determines the quality-of-protection to use in digest authentication.</p>

<h6 id="auth_digest_shmem_size"><code class="language-plaintext highlighter-rouge">auth_digest_shmem_size</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_auth_digest.html#authdigestshmemsize">AuthAuthDigestShmemSize</a>, which defines the amount of shared memory allocated to the server for keeping track of clients.</p>

<h6 id="auth_group_file"><code class="language-plaintext highlighter-rouge">auth_group_file</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_authz_groupfile.html#authgroupfile">AuthGroupFile</a>, which sets the name of the text file containing the list of user groups for authorization.</p>

<h6 id="auth_name"><code class="language-plaintext highlighter-rouge">auth_name</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_authn_core.html#authname">AuthName</a>, which sets the name of the authorization realm.</p>

<h6 id="auth_require"><code class="language-plaintext highlighter-rouge">auth_require</code></h6>

<p>Sets the entity name you’re requiring to allow access. Read more about <a href="https://httpd.apache.org/docs/current/mod/mod_authz_host.html#requiredirectives">Require</a>.</p>

<h6 id="auth_type"><code class="language-plaintext highlighter-rouge">auth_type</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_authn_core.html#authtype">AuthType</a>, which guides the type of user authentication.</p>

<h6 id="auth_user_file"><code class="language-plaintext highlighter-rouge">auth_user_file</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_authn_file.html#authuserfile">AuthUserFile</a>, which sets the name of the text file containing the users/passwords for authentication.</p>

<h6 id="auth_merging"><code class="language-plaintext highlighter-rouge">auth_merging</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_authz_core.html#authmerging">AuthMerging</a>, which determines if authorization logic should be combined</p>

<h6 id="auth_ldap_url"><code class="language-plaintext highlighter-rouge">auth_ldap_url</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_authnz_ldap.html#authldapurl">AuthLDAPURL</a>, which determines URL of LDAP-server(s) if AuthBasicProvider ‘ldap’ is used</p>

<h6 id="auth_ldap_bind_dn"><code class="language-plaintext highlighter-rouge">auth_ldap_bind_dn</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_authnz_ldap.html#authldapbinddn">AuthLDAPBindDN</a>, which allows use of an optional DN used to bind to the LDAP-server when searching for entries if AuthBasicProvider ‘ldap’ is used</p>

<h6 id="auth_ldap_bind_password"><code class="language-plaintext highlighter-rouge">auth_ldap_bind_password</code></h6>

<p>Sets the value for <a href="https://httpd.apache.org/docs/current/mod/mod_authnz_ldap.html#authldapbindpassword">AuthLDAPBindPassword</a>, which allows use of an optional bind password to use in conjunction with the bind DN if AuthBasicProvider ‘ldap’ is used</p>

<h6 id="auth_ldap_group_attribute"><code class="language-plaintext highlighter-rouge">auth_ldap_group_attribute</code></h6>

<p>Array of values for <a href="https://httpd.apache.org/docs/current/mod/mod_authnz_ldap.html#authldapgroupattribute">AuthLDAPGroupAttribute</a>, specifies which LDAP attributes are used to check for user members within ldap-groups. defaults are: “member” and “uniquemember”</p>

<h6 id="auth_ldap_group_attribute_is_dn"><code class="language-plaintext highlighter-rouge">auth_ldap_group_attribute_is_dn</code></h6>

<p>Sets value for <a href="https://httpd.apache.org/docs/current/mod/mod_authnz_ldap.html#authldapgroupattributeisdn">AuthLDAPGroupAttributeIsDN</a>, specifies if member of a ldapgroup is a dn or simple username. When set on, this directive says to use the distinguished name of the client username when checking for group membership. Otherwise, the username will be used. valid values are: “on” or “off”</p>

<h6 id="custom_fragment-1"><code class="language-plaintext highlighter-rouge">custom_fragment</code></h6>

<p>Pass a string of custom configuration directives to be placed at the end of the directory configuration.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'monitor'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="py">path</span> <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">custom_fragment</span> <span class="p">=&gt;</span> <span class="s1">'
&lt;Location /balancer-manager&gt;
  SetHandler balancer-manager
  Order allow,deny
  Allow from all
&lt;/Location&gt;
&lt;Location /server-status&gt;
  SetHandler server-status
  Order allow,deny
  Allow from all
&lt;/Location&gt;
ProxyStatus On'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="dav"><code class="language-plaintext highlighter-rouge">dav</code></h6>

<p>Sets the value for <a href="http://httpd.apache.org/docs/current/mod/mod_dav.html#dav">Dav</a>, which determines if the WebDAV HTTP methods should be enabled. The value can be either <code class="language-plaintext highlighter-rouge">On</code>, <code class="language-plaintext highlighter-rouge">Off</code> or the name of the provider. A value of <code class="language-plaintext highlighter-rouge">On</code> enables the default filesystem provider implemented by the <code class="language-plaintext highlighter-rouge">mod_dav_fs</code> module.</p>

<h6 id="dav_depth_infinity"><code class="language-plaintext highlighter-rouge">dav_depth_infinity</code></h6>

<p>Sets the value for <a href="http://httpd.apache.org/docs/current/mod/mod_dav.html#davdepthinfinity">DavDepthInfinity</a>, which is used to enable the processing of <code class="language-plaintext highlighter-rouge">PROPFIND</code> requests having a <code class="language-plaintext highlighter-rouge">Depth: Infinity</code> header.</p>

<h6 id="dav_min_timeout"><code class="language-plaintext highlighter-rouge">dav_min_timeout</code></h6>

<p>Sets the value for <a href="http://httpd.apache.org/docs/current/mod/mod_dav.html#davmintimeout">DavMinTimeout</a>, which sets the time the server holds a lock on a DAV resource. The value should be the number of seconds to set.</p>

<h6 id="deny"><code class="language-plaintext highlighter-rouge">deny</code></h6>

<p>Sets a <a href="https://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#deny">Deny</a> directive, specifying which hosts are denied access to the server. <strong>Deprecated:</strong> This parameter is being deprecated due to a change in Apache. It only works with Apache 2.2 and lower. You can use it as a single string for one rule or as an array for more than one.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span> <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">deny</span> <span class="p">=&gt;</span> <span class="s1">'from example.org'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="error_documents-2"><code class="language-plaintext highlighter-rouge">error_documents</code></h6>

<p>An array of hashes used to override the <a href="https://httpd.apache.org/docs/current/mod/core.html#errordocument">ErrorDocument</a> settings for the directory.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>            <span class="p">=&gt;</span> <span class="s1">'/srv/www'</span><span class="p">,</span>
      <span class="py">error_documents</span> <span class="p">=&gt;</span> <span class="p">[</span>
        <span class="p">{</span> <span class="s1">'error_code'</span> <span class="p">=&gt;</span> <span class="s1">'503'</span><span class="p">,</span>
          <span class="s1">'document'</span>   <span class="p">=&gt;</span> <span class="s1">'/service-unavail'</span><span class="p">,</span>
        <span class="p">},</span>
      <span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="ext_filter_options"><code class="language-plaintext highlighter-rouge">ext_filter_options</code></h6>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ext_filter.html">ExtFilterOptions</a> directive.
Note that you must declare <code class="language-plaintext highlighter-rouge">class { 'apache::mod::ext_filter': }</code> before using this directive.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'filter.example.org'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/var/www/filter'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>               <span class="p">=&gt;</span> <span class="s1">'/var/www/filter'</span><span class="p">,</span>
      <span class="py">ext_filter_options</span> <span class="p">=&gt;</span> <span class="s1">'LogStderr Onfail=abort'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="geoip_enable"><code class="language-plaintext highlighter-rouge">geoip_enable</code></h6>

<p>Sets the <a href="http://dev.maxmind.com/geoip/legacy/mod_geoip2/#Configuration">GeoIPEnable</a> directive.
Note that you must declare <code class="language-plaintext highlighter-rouge">class {'apache::mod::geoip': }</code> before using this directive.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'first.example.com'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/var/www/first'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>         <span class="p">=&gt;</span> <span class="s1">'/var/www/first'</span><span class="p">,</span>
      <span class="py">geoip_enable</span> <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="headers-1"><code class="language-plaintext highlighter-rouge">headers</code></h6>

<p>Adds lines for <a href="https://httpd.apache.org/docs/current/mod/mod_headers.html#header">Header</a> directives.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
    <span class="py">headers</span> <span class="p">=&gt;</span> <span class="s1">'Set X-Robots-Tag "noindex, noarchive, nosnippet"'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="index_options"><code class="language-plaintext highlighter-rouge">index_options</code></h6>

<p>Allows configuration settings for <a href="https://httpd.apache.org/docs/current/mod/mod_autoindex.html#indexoptions">directory indexing</a>.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>           <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">directoryindex</span> <span class="p">=&gt;</span> <span class="s1">'disabled'</span><span class="p">,</span> <span class="c"># this is needed on Apache 2.4 or mod_autoindex doesn't work
</span>      <span class="py">options</span>        <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'Indexes'</span><span class="p">,</span><span class="s1">'FollowSymLinks'</span><span class="p">,</span><span class="s1">'MultiViews'</span><span class="p">],</span>
      <span class="py">index_options</span>  <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'IgnoreCase'</span><span class="p">,</span> <span class="s1">'FancyIndexing'</span><span class="p">,</span> <span class="s1">'FoldersFirst'</span><span class="p">,</span> <span class="s1">'NameWidth=*'</span><span class="p">,</span> <span class="s1">'DescriptionWidth=*'</span><span class="p">,</span> <span class="s1">'SuppressHTMLPreamble'</span><span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="index_order_default"><code class="language-plaintext highlighter-rouge">index_order_default</code></h6>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_autoindex.html#indexorderdefault">default ordering</a> of the directory index.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>                <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">order</span>               <span class="p">=&gt;</span> <span class="s1">'Allow,Deny'</span><span class="p">,</span>
      <span class="py">index_order_default</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'Descending'</span><span class="p">,</span> <span class="s1">'Date'</span><span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="index_style_sheet"><code class="language-plaintext highlighter-rouge">index_style_sheet</code></h6>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_autoindex.html#indexstylesheet">IndexStyleSheet</a>, which adds a CSS stylesheet to the directory index.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>              <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">options</span>           <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'Indexes'</span><span class="p">,</span><span class="s1">'FollowSymLinks'</span><span class="p">,</span><span class="s1">'MultiViews'</span><span class="p">],</span>
      <span class="py">index_options</span>     <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'FancyIndexing'</span><span class="p">],</span>
      <span class="py">index_style_sheet</span> <span class="p">=&gt;</span> <span class="s1">'/styles/style.css'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="limit"><code class="language-plaintext highlighter-rouge">limit</code></h6>

<p>Creates a <a href="https://httpd.apache.org/docs/current/mod/core.html#limit">Limit</a> block inside the Directory block, which can also contain <code class="language-plaintext highlighter-rouge">require</code> directives.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/docroot'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>     <span class="p">=&gt;</span> <span class="s1">'/'</span><span class="p">,</span>
      <span class="py">provider</span> <span class="p">=&gt;</span> <span class="s1">'location'</span><span class="p">,</span>
      <span class="py">limit</span>    <span class="p">=&gt;</span> <span class="p">[</span>
        <span class="p">{</span> <span class="py">methods</span> <span class="p">=&gt;</span> <span class="s1">'GET HEAD'</span><span class="p">,</span>
          <span class="kp">require</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'valid-user'</span><span class="p">]</span>
        <span class="p">},</span>
      <span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="mellon_enable"><code class="language-plaintext highlighter-rouge">mellon_enable</code></h6>

<p>Sets the <a href="https://github.com/UNINETT/mod_auth_mellon">MellonEnable</a> directory to enable <a href="https://github.com/UNINETT/mod_auth_mellon"><code class="language-plaintext highlighter-rouge">mod_auth_mellon</code></a>. You can use <a href="#class-apachemodauth_mellon"><code class="language-plaintext highlighter-rouge">apache::mod::auth_mellon</code></a> to install <code class="language-plaintext highlighter-rouge">mod_auth_mellon</code>.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>                       <span class="p">=&gt;</span> <span class="s1">'/'</span><span class="p">,</span>
      <span class="py">provider</span>                   <span class="p">=&gt;</span> <span class="s1">'directory'</span><span class="p">,</span>
      <span class="py">mellon_enable</span>              <span class="p">=&gt;</span> <span class="s1">'info'</span><span class="p">,</span>
      <span class="py">mellon_sp_private_key_file</span> <span class="p">=&gt;</span> <span class="s1">'/etc/certs/${::fqdn}.key'</span><span class="p">,</span>
      <span class="py">mellon_endpoint_path</span>       <span class="p">=&gt;</span> <span class="s1">'/mellon'</span><span class="p">,</span>
      <span class="py">mellon_set_env_no_prefix</span>   <span class="p">=&gt;</span> <span class="p">{</span> <span class="s1">'ADFS_GROUP'</span> <span class="p">=&gt;</span> <span class="s1">'http://schemas.xmlsoap.org/claims/Group'</span><span class="p">,</span>
                                      <span class="s1">'ADFS_EMAIL'</span> <span class="p">=&gt;</span> <span class="s1">'http://schemas.xmlsoap.org/claims/EmailAddress'</span><span class="p">,</span> <span class="p">},</span>
      <span class="py">mellon_user</span> <span class="p">=&gt;</span> <span class="s1">'ADFS_LOGIN'</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="p">{</span> <span class="py">path</span>          <span class="p">=&gt;</span> <span class="s1">'/protected'</span><span class="p">,</span>
      <span class="py">provider</span>      <span class="p">=&gt;</span> <span class="s1">'location'</span><span class="p">,</span>
      <span class="py">mellon_enable</span> <span class="p">=&gt;</span> <span class="s1">'auth'</span><span class="p">,</span>
      <span class="py">auth_type</span>     <span class="p">=&gt;</span> <span class="s1">'Mellon'</span><span class="p">,</span>
      <span class="py">auth_require</span>  <span class="p">=&gt;</span> <span class="s1">'valid-user'</span><span class="p">,</span>
      <span class="py">mellon_cond</span>   <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'ADFS_LOGIN userA [MAP]'</span><span class="p">,</span><span class="s1">'ADFS_LOGIN userB [MAP]'</span><span class="p">],</span>
    <span class="p">},</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Related parameters follow the names of <code class="language-plaintext highlighter-rouge">mod_auth_mellon</code> directives:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">mellon_cond</code>: Takes an array of mellon conditions that must be met to grant access, and creates a <a href="https://github.com/UNINETT/mod_auth_mellon">MellonCond</a> directive for each item in the array.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_endpoint_path</code>: Sets the <a href="https://github.com/UNINETT/mod_auth_mellon">MellonEndpointPath</a> to set the mellon endpoint path.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_sp_metadata_file</code>: Sets the <a href="https://github.com/UNINETT/mod_auth_mellon">MellonSPMetadataFile</a> location of the SP metadata file.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_idp_metadata_file</code>: Sets the <a href="https://github.com/UNINETT/mod_auth_mellon">MellonIDPMetadataFile</a> location of the IDP metadata file.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_saml_rsponse_dump</code>: Sets the <a href="https://github.com/UNINETT/mod_auth_mellon">MellonSamlResponseDump</a> directive to enable debug of SAML.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_set_env_no_prefix</code>: Sets the <a href="https://github.com/UNINETT/mod_auth_mellon">MellonSetEnvNoPrefix</a> directive to a hash of attribute names to map
to environment variables.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_sp_private_key_file</code>: Sets the <a href="https://github.com/UNINETT/mod_auth_mellon">MellonSPPrivateKeyFile</a> directive for the private key location of the service provider.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_sp_cert_file</code>: Sets the <a href="https://github.com/UNINETT/mod_auth_mellon">MellonSPCertFile</a> directive for the public key location of the service provider.</li>
  <li><code class="language-plaintext highlighter-rouge">mellon_user</code>: Sets the <a href="https://github.com/UNINETT/mod_auth_mellon">MellonUser</a> attribute to use for the username.</li>
</ul>

<h6 id="options-2"><code class="language-plaintext highlighter-rouge">options</code></h6>

<p>Lists the <a href="https://httpd.apache.org/docs/current/mod/core.html#options">Options</a> for the given Directory block.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">options</span> <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'Indexes'</span><span class="p">,</span><span class="s1">'FollowSymLinks'</span><span class="p">,</span><span class="s1">'MultiViews'</span><span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="order"><code class="language-plaintext highlighter-rouge">order</code></h6>

<p>Sets the order of processing Allow and Deny statements as per <a href="https://httpd.apache.org/docs/2.2/mod/mod_authz_host.html#order">Apache core documentation</a>. <strong>Deprecated:</strong> This parameter is being deprecated due to a change in Apache. It only works with Apache 2.2 and lower.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>  <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">order</span> <span class="p">=&gt;</span> <span class="s1">'Allow,Deny'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="passenger_enabled"><code class="language-plaintext highlighter-rouge">passenger_enabled</code></h6>

<p>Sets the value for the <a href="http://www.modrails.com/documentation/Users%20guide%20Apache.html#PassengerEnabled">PassengerEnabled</a> directive to ‘on’ or ‘off’. Requires <code class="language-plaintext highlighter-rouge">apache::mod::passenger</code> to be included.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>              <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">passenger_enabled</span> <span class="p">=&gt;</span> <span class="s1">'on'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note:</strong> There is an <a href="http://www.conandalton.net/2010/06/passengerenabled-off-not-working.html">issue</a> using the PassengerEnabled directive with the PassengerHighPerformance directive.</p>
</blockquote>

<h6 id="php_value-and-php_flag"><code class="language-plaintext highlighter-rouge">php_value</code> and <code class="language-plaintext highlighter-rouge">php_flag</code></h6>

<p><code class="language-plaintext highlighter-rouge">php_value</code> sets the value of the directory, and <code class="language-plaintext highlighter-rouge">php_flag</code> uses a boolean to configure the directory. Further information can be found <a href="http://php.net/manual/en/configuration.changes.php">here</a>.</p>

<h6 id="php_admin_value-and-php_admin_flag"><code class="language-plaintext highlighter-rouge">php_admin_value</code> and <code class="language-plaintext highlighter-rouge">php_admin_flag</code></h6>

<p><code class="language-plaintext highlighter-rouge">php_admin_value</code> sets the value of the directory, and <code class="language-plaintext highlighter-rouge">php_admin_flag</code> uses a boolean to configure the directory. Further information can be found <a href="http://php.net/manual/en/configuration.changes.php">here</a>.</p>

<h6 id="require"><code class="language-plaintext highlighter-rouge">require</code></h6>

<p>Sets a <code class="language-plaintext highlighter-rouge">Require</code> directive as per the <a href="https://httpd.apache.org/docs/current/mod/mod_authz_core.html#require">Apache Authz documentation</a>. If no <code class="language-plaintext highlighter-rouge">require</code> is set, it will default to <code class="language-plaintext highlighter-rouge">Require all granted</code>.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="kp">require</span> <span class="p">=&gt;</span> <span class="s1">'ip 10.17.42.23'</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<p>When more complex sets of requirement are needed, apache &gt;= 2.4 provides the use of <a href="https://httpd.apache.org/docs/2.4/mod/mod_authz_core.html#requireall">RequireAll</a>, <a href="https://httpd.apache.org/docs/2.4/mod/mod_authz_core.html#requirenone">RequireNone</a> or <a href="https://httpd.apache.org/docs/2.4/mod/mod_authz_core.html#requireany">RequireAny</a> directives.
Using the ‘enforce’ key, which only supports ‘any’,’none’,’all’ (other values are silently ignored), this could be established like:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="kp">require</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="py">enforce</span>  <span class="p">=&gt;</span> <span class="s1">'any'</span><span class="p">,</span>
        <span class="py">requires</span> <span class="p">=&gt;</span> <span class="p">[</span>
          <span class="s1">'ip 1.2.3.4'</span><span class="p">,</span>
          <span class="s1">'not host host.example.com'</span><span class="p">,</span>
          <span class="s1">'user xyz'</span><span class="p">,</span>
        <span class="p">],</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<p>If <code class="language-plaintext highlighter-rouge">require</code> is set to <code class="language-plaintext highlighter-rouge">unmanaged</code> it will not be set at all. This is useful for complex authentication/authorization requirements which are handled in a custom fragment.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="kp">require</span> <span class="p">=&gt;</span> <span class="s1">'unmanaged'</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="satisfy"><code class="language-plaintext highlighter-rouge">satisfy</code></h6>

<p>Sets a <code class="language-plaintext highlighter-rouge">Satisfy</code> directive per the <a href="https://httpd.apache.org/docs/2.2/mod/core.html#satisfy">Apache Core documentation</a>. <strong>Deprecated:</strong> This parameter is deprecated due to a change in Apache and only works with Apache 2.2 and lower.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">satisfy</span> <span class="p">=&gt;</span> <span class="s1">'Any'</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="sethandler"><code class="language-plaintext highlighter-rouge">sethandler</code></h6>

<p>Sets a <code class="language-plaintext highlighter-rouge">SetHandler</code> directive per the <a href="https://httpd.apache.org/docs/2.2/mod/core.html#sethandler">Apache Core documentation</a>.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>       <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">sethandler</span> <span class="p">=&gt;</span> <span class="s1">'None'</span><span class="p">,</span>
    <span class="p">}</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="set_output_filter"><code class="language-plaintext highlighter-rouge">set_output_filter</code></h6>

<p>Sets a <code class="language-plaintext highlighter-rouge">SetOutputFilter</code> directive per the <a href="https://httpd.apache.org/docs/current/mod/core.html#setoutputfilter">Apache Core documentation</a>.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span><span class="p">{</span> <span class="s1">'filter.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>              <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">set_output_filter</span> <span class="p">=&gt;</span> <span class="n">puppetdb</span><span class="o">-</span><span class="n">strip</span><span class="o">-</span><span class="n">resource</span><span class="o">-</span><span class="n">params</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="rewrites-1"><code class="language-plaintext highlighter-rouge">rewrites</code></h6>

<p>Creates URL <a href="#rewrites"><code class="language-plaintext highlighter-rouge">rewrites</code></a> rules in virtual host directories. Expects an array of hashes, and the hash keys can be any of ‘comment’, ‘rewrite_base’, ‘rewrite_cond’, or ‘rewrite_rule’.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'secure.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>        <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">rewrites</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="p">{</span> <span class="py">comment</span>      <span class="p">=&gt;</span> <span class="s1">'Permalink Rewrites'</span><span class="p">,</span>
                      <span class="py">rewrite_base</span> <span class="p">=&gt;</span> <span class="s1">'/'</span>
                    <span class="p">},</span>
                    <span class="p">{</span> <span class="py">rewrite_rule</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="s1">'^index\.php$ - [L]'</span> <span class="p">]</span>
                    <span class="p">},</span>
                    <span class="p">{</span> <span class="py">rewrite_cond</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="s1">'%{REQUEST_FILENAME} !-f'</span><span class="p">,</span>
                                        <span class="s1">'%{REQUEST_FILENAME} !-d'</span><span class="p">,</span>
                                      <span class="p">],</span>
                      <span class="py">rewrite_rule</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="s1">'. /index.php [L]'</span> <span class="p">],</span>
                    <span class="p">}</span>
                  <span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong>: If you include rewrites in your directories, also include <code class="language-plaintext highlighter-rouge">apache::mod::rewrite</code> and consider setting the rewrites using the <code class="language-plaintext highlighter-rouge">rewrites</code> parameter in <code class="language-plaintext highlighter-rouge">apache::vhost</code> rather than setting the rewrites in the virtual host’s directories.</p>
</blockquote>

<h6 id="shib_request_settings"><code class="language-plaintext highlighter-rouge">shib_request_settings</code></h6>

<p>Allows a valid content setting to be set or altered for the application request. This command takes two parameters: the name of the content setting, and the value to set it to. Check the Shibboleth <a href="https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPContentSettings">content setting documentation</a> for valid settings. This key is disabled if <code class="language-plaintext highlighter-rouge">apache::mod::shib</code> is not defined. Check the <a href="https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPApacheConfig#NativeSPApacheConfig-Server/VirtualHostOptions"><code class="language-plaintext highlighter-rouge">mod_shib</code> documentation</a> for more details.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'secure.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>                  <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">shib_request_settings</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="s1">'requiresession'</span> <span class="p">=&gt;</span> <span class="s1">'On'</span> <span class="p">},</span>
      <span class="py">shib_use_headers</span>      <span class="p">=&gt;</span> <span class="s1">'On'</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="shib_use_headers"><code class="language-plaintext highlighter-rouge">shib_use_headers</code></h6>

<p>When set to ‘On’, this turns on the use of request headers to publish attributes to applications. Valid options for this key is ‘On’ or ‘Off’, and the default value is ‘Off’. This key is disabled if <code class="language-plaintext highlighter-rouge">apache::mod::shib</code> is not defined. Check the <a href="https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPApacheConfig#NativeSPApacheConfig-Server/VirtualHostOptions"><code class="language-plaintext highlighter-rouge">mod_shib</code> documentation</a> for more details.</p>

<h6 id="ssl_options"><code class="language-plaintext highlighter-rouge">ssl_options</code></h6>

<p>String or list of <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#ssloptions">SSLOptions</a>, which configure SSL engine run-time options. This handler takes precedence over SSLOptions set in the parent block of the virtual host.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'secure.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>        <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">ssl_options</span> <span class="p">=&gt;</span> <span class="s1">'+ExportCertData'</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="p">{</span> <span class="py">path</span>        <span class="p">=&gt;</span> <span class="s1">'/path/to/different/dir'</span><span class="p">,</span>
      <span class="py">ssl_options</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="s1">'-StdEnvVars'</span><span class="p">,</span> <span class="s1">'+ExportCertData'</span><span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h6 id="suphp"><code class="language-plaintext highlighter-rouge">suphp</code></h6>

<p>A hash containing the ‘user’ and ‘group’ keys for the <a href="http://www.suphp.org/DocumentationView.html?file=apache/CONFIG">suPHP_UserGroup</a> setting. It must be used with <code class="language-plaintext highlighter-rouge">suphp_engine =&gt; on</code> in the virtual host declaration, and can only be passed within <code class="language-plaintext highlighter-rouge">directories</code>.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'secure.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>  <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
      <span class="py">suphp</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="py">user</span>  <span class="p">=&gt;</span> <span class="s1">'myappuser'</span><span class="p">,</span>
        <span class="py">group</span> <span class="p">=&gt;</span> <span class="s1">'myappgroup'</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>
<h6 id="additional_includes-1"><code class="language-plaintext highlighter-rouge">additional_includes</code></h6>

<p>Specifies paths to additional static, specific Apache configuration files in virtual host directories. Valid options: a array of string path.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="py">docroot</span>     <span class="p">=&gt;</span> <span class="s1">'/path/to/directory'</span><span class="p">,</span>
  <span class="py">directories</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="p">{</span> <span class="py">path</span>  <span class="p">=&gt;</span> <span class="s1">'/path/to/different/dir'</span><span class="p">,</span>
      <span class="py">additional_includes</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="s1">'/custom/path/includes'</span><span class="p">,</span> <span class="s1">'/custom/path/another_includes'</span><span class="p">,</span> <span class="p">],</span>
    <span class="p">},</span>
  <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="ssl-parameters-for-apachevhost">SSL parameters for <code class="language-plaintext highlighter-rouge">apache::vhost</code></h4>

<p>All of the SSL parameters for <code class="language-plaintext highlighter-rouge">::vhost</code> default to whatever is set in the base <code class="language-plaintext highlighter-rouge">apache</code> class. Use the below parameters to tweak individual SSL settings for specific virtual hosts.</p>

<h5 id="ssl"><code class="language-plaintext highlighter-rouge">ssl</code></h5>

<p>Enables SSL for the virtual host. SSL virtual hosts only respond to HTTPS queries. Valid options: Boolean. Default: false.</p>

<h5 id="ssl_ca"><code class="language-plaintext highlighter-rouge">ssl_ca</code></h5>

<p>Specifies the SSL certificate authority. Default: undef.</p>

<h5 id="ssl_cert"><code class="language-plaintext highlighter-rouge">ssl_cert</code></h5>

<p>Specifies the SSL certification. Defaults are based on your OS: ‘/etc/pki/tls/certs/localhost.crt’ for RedHat, ‘/etc/ssl/certs/ssl-cert-snakeoil.pem’ for Debian, ‘/usr/local/etc/apache22/server.crt’ for FreeBSD, and ‘/etc/ssl/apache2/server.crt’ on Gentoo.</p>

<h5 id="ssl_protocol"><code class="language-plaintext highlighter-rouge">ssl_protocol</code></h5>

<p>Specifies <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslprotocol">SSLProtocol</a>. Expects an array or space separated string of accepted protocols. Defaults: ‘all’, ‘-SSLv2’, ‘-SSLv3’.</p>

<h5 id="ssl_cipher"><code class="language-plaintext highlighter-rouge">ssl_cipher</code></h5>

<p>Specifies <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslciphersuite">SSLCipherSuite</a>. Default: ‘HIGH:MEDIUM:!aNULL:!MD5’.</p>

<h5 id="ssl_honorcipherorder"><code class="language-plaintext highlighter-rouge">ssl_honorcipherorder</code></h5>

<p>Sets <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslhonorcipherorder">SSLHonorCipherOrder</a>, to cause Apache to use the server’s preferred order of ciphers rather than the client’s preferred order. Default: true. In addition to true/false Boolean values, will also accept case-insensitive Strings ‘on’ or ‘off’.</p>

<h5 id="ssl_certs_dir"><code class="language-plaintext highlighter-rouge">ssl_certs_dir</code></h5>

<p>Specifies the location of the SSL certification directory. Default: Depends on the operating system.</p>

<ul>
  <li><strong>Debian:</strong> ‘/etc/ssl/certs’</li>
  <li><strong>Red Hat:</strong> ‘/etc/pki/tls/certs’</li>
  <li><strong>FreeBSD:</strong> undef</li>
  <li><strong>Gentoo:</strong> ‘/etc/ssl/apache2’</li>
</ul>

<h5 id="ssl_chain"><code class="language-plaintext highlighter-rouge">ssl_chain</code></h5>

<p>Specifies the SSL chain. Default: undef. This default works out of the box, but it must be updated in the base <code class="language-plaintext highlighter-rouge">apache</code> class with your specific certificate information before being used in production.</p>

<h5 id="ssl_crl"><code class="language-plaintext highlighter-rouge">ssl_crl</code></h5>

<p>Specifies the certificate revocation list to use. Default: undef. (This default works out of the box but must be updated in the base <code class="language-plaintext highlighter-rouge">apache</code> class with your specific certificate information before being used in production.)</p>

<h5 id="ssl_crl_path"><code class="language-plaintext highlighter-rouge">ssl_crl_path</code></h5>

<p>Specifies the location of the certificate revocation list. Default: undef. (This default works out of the box but must be updated in the base <code class="language-plaintext highlighter-rouge">apache</code> class with your specific certificate information before being used in production.)</p>

<h5 id="ssl_crl_check"><code class="language-plaintext highlighter-rouge">ssl_crl_check</code></h5>

<p>Sets the certificate revocation check level via the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslcarevocationcheck">SSLCARevocationCheck directive</a>. Default: undef. This default works out of the box but must be specified when using CRLs in production. Only applicable to Apache 2.4 or higher; the value is ignored on older versions.</p>

<h5 id="ssl_key"><code class="language-plaintext highlighter-rouge">ssl_key</code></h5>

<p>Specifies the SSL key. Defaults are based on your operating system: ‘/etc/pki/tls/private/localhost.key’ for RedHat, ‘/etc/ssl/private/ssl-cert-snakeoil.key’ for Debian, ‘/usr/local/etc/apache22/server.key’ for FreeBSD, and ‘/etc/ssl/apache2/server.key’ on Gentoo. (This default works out of the box but must be updated in the base <code class="language-plaintext highlighter-rouge">apache</code> class with your specific certificate information before being used in production.)</p>

<h5 id="ssl_verify_client"><code class="language-plaintext highlighter-rouge">ssl_verify_client</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslverifyclient">SSLVerifyClient</a> directive, which sets the certificate verification level for client authentication. Valid options are: ‘none’, ‘optional’, ‘require’, and ‘optional_no_ca’. Default: undef.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">ssl_verify_client</span> <span class="p">=&gt;</span> <span class="s1">'optional'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="ssl_verify_depth"><code class="language-plaintext highlighter-rouge">ssl_verify_depth</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslverifydepth">SSLVerifyDepth</a> directive, which specifies the maximum depth of CA certificates in client certificate verification. Default: undef.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">ssl_verify_depth</span> <span class="p">=&gt;</span> <span class="m">1</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>
<h5 id="ssl_proxy_protocol"><code class="language-plaintext highlighter-rouge">ssl_proxy_protocol</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslproxyprotocol">SSLProxyProtocol</a> directive, which controls the SSL protocol flavors mod_ssl should use when establishing its server environment for proxy. It will only connect to servers using one of the provided protocols. Default: undef.</p>

<h5 id="ssl_proxy_verify"><code class="language-plaintext highlighter-rouge">ssl_proxy_verify</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslproxyverify">SSLProxyVerify</a> directive, which configures certificate verification of the remote server when a proxy is configured to forward requests to a remote SSL server. Default: undef.</p>

<h5 id="ssl_proxy_machine_cert"><code class="language-plaintext highlighter-rouge">ssl_proxy_machine_cert</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslproxymachinecertificatefile">SSLProxyMachineCertificateFile</a> directive, which specifies an all-in-one file where you keep the certs and keys used for this server to authenticate itself to remote servers. This file should be a concatenation of the PEM-encoded certificate files in order of preference. Default: undef.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">ssl_proxy_machine_cert</span> <span class="p">=&gt;</span> <span class="s1">'/etc/httpd/ssl/client_certificate.pem'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="ssl_proxy_check_peer_cn"><code class="language-plaintext highlighter-rouge">ssl_proxy_check_peer_cn</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslproxycheckpeercn">SSLProxyCheckPeerCN</a> directive, which specifies whether the remote server certificate’s CN field is compared against the hostname of the request URL. Valid options: ‘on’, ‘off’. Default: undef.</p>

<h5 id="ssl_proxy_check_peer_name"><code class="language-plaintext highlighter-rouge">ssl_proxy_check_peer_name</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslproxycheckpeername">SSLProxyCheckPeerName</a> directive, which specifies whether the remote server certificate’s CN field is compared against the hostname of the request URL. Valid options: ‘on’, ‘off’. Default: undef.</p>

<h5 id="ssl_proxy_check_peer_expire"><code class="language-plaintext highlighter-rouge">ssl_proxy_check_peer_expire</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslproxycheckpeerexpire">SSLProxyCheckPeerExpire</a> directive, which specifies whether the remote server certificate is checked for expiration or not. Valid options: ‘on’, ‘off’. Default: undef.</p>

<h5 id="ssl_options-1"><code class="language-plaintext highlighter-rouge">ssl_options</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#ssloptions">SSLOptions</a> directive, which configures various SSL engine run-time options. This is the global setting for the given virtual host and can be a string or an array. Default: undef.</p>

<p>A string:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">ssl_options</span> <span class="p">=&gt;</span> <span class="s1">'+ExportCertData'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>An array:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'sample.example.net'</span><span class="p">:</span>
  <span class="err">…</span>
  <span class="py">ssl_options</span> <span class="p">=&gt;</span> <span class="p">[</span> <span class="s1">'+StrictRequire'</span><span class="p">,</span> <span class="s1">'+ExportCertData'</span> <span class="p">],</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="ssl_openssl_conf_cmd"><code class="language-plaintext highlighter-rouge">ssl_openssl_conf_cmd</code></h5>

<p>Sets the <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslopensslconfcmd">SSLOpenSSLConfCmd</a> directive, which provides direct configuration of OpenSSL parameters. Default: undef.</p>

<h5 id="ssl_proxyengine"><code class="language-plaintext highlighter-rouge">ssl_proxyengine</code></h5>

<p>Specifies whether or not to use <a href="https://httpd.apache.org/docs/current/mod/mod_ssl.html#sslproxyengine">SSLProxyEngine</a>. Valid options: Boolean. Default: true.</p>

<h5 id="ssl_stapling-1"><code class="language-plaintext highlighter-rouge">ssl_stapling</code></h5>

<p>Specifies whether or not to use <a href="http://httpd.apache.org/docs/current/mod/mod_ssl.html#sslusestapling">SSLUseStapling</a>. Valid options: Boolean or undef. Default: undef, meaning use what is set globally.</p>

<p>This parameter only applies to Apache 2.4 or higher and is ignored on older versions.</p>

<h5 id="ssl_stapling_timeout"><code class="language-plaintext highlighter-rouge">ssl_stapling_timeout</code></h5>

<p>Can be used to set the <a href="http://httpd.apache.org/docs/current/mod/mod_ssl.html#sslstaplingrespondertimeout">SSLStaplingResponderTimeout</a> directive. No default.</p>

<p>This parameter only applies to Apache 2.4 or higher and is ignored on older versions.</p>

<h5 id="ssl_stapling_return_errors-1"><code class="language-plaintext highlighter-rouge">ssl_stapling_return_errors</code></h5>

<p>Can be used to set the <a href="http://httpd.apache.org/docs/current/mod/mod_ssl.html#sslstaplingreturnrespondererrors">SSLStaplingReturnResponderErrors</a> directive. No default.</p>

<p>This parameter only applies to Apache 2.4 or higher and is ignored on older versions.</p>

<h4 id="defined-type-fastcgi-server">Defined type: FastCGI Server</h4>

<p>This type is intended for use with mod_fastcgi. It allows you to define one or more external FastCGI servers to handle specific file types.</p>

<p>** Note ** If using Ubuntu 10.04+, you’ll need to manually enable the multiverse repository.</p>

<p>Ex:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::fastcgi::server</span> <span class="p">{</span> <span class="s1">'php'</span><span class="p">:</span>
  <span class="py">host</span>        <span class="p">=&gt;</span> <span class="s1">'127.0.0.1:9000'</span><span class="p">,</span>
  <span class="py">timeout</span>     <span class="p">=&gt;</span> <span class="m">15</span><span class="p">,</span>
  <span class="py">flush</span>       <span class="p">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
  <span class="py">faux_path</span>   <span class="p">=&gt;</span> <span class="s1">'/var/www/php.fcgi'</span><span class="p">,</span>
  <span class="py">fcgi_alias</span>  <span class="p">=&gt;</span> <span class="s1">'/php.fcgi'</span><span class="p">,</span>
  <span class="py">file_type</span>   <span class="p">=&gt;</span> <span class="s1">'application/x-httpd-php'</span><span class="p">,</span>
  <span class="py">pass_header</span> <span class="p">=&gt;</span> <span class="s1">''</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Within your virtual host, you can then configure the specified file type to be handled by the fastcgi server specified above.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'www'</span><span class="p">:</span>
  <span class="o">...</span>
  <span class="py">custom_fragment</span> <span class="p">=&gt;</span> <span class="s1">'AddType application/x-httpd-php .php'</span>
  <span class="o">...</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="host-1"><code class="language-plaintext highlighter-rouge">host</code></h5>

<p>The hostname or IP address and TCP port number (1-65535) of the FastCGI server.</p>

<p>It is also possible to pass a unix socket:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">apache::fastcgi::server</span> <span class="p">{</span> <span class="s1">'php'</span><span class="p">:</span>
  <span class="py">host</span>        <span class="p">=&gt;</span> <span class="s1">'/var/run/fcgi.sock'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="timeout-2"><code class="language-plaintext highlighter-rouge">timeout</code></h5>

<p>The number of seconds of FastCGI application inactivity allowed before the request is aborted and the event is logged (at the error LogLevel). The inactivity timer applies only as long as a connection is pending with the FastCGI application. If a request is queued to an application, but the application doesn’t respond (by writing and flushing) within this period, the request is aborted. If communication is complete with the application but incomplete with the client (the response is buffered), the timeout does not apply.</p>

<h5 id="flush-1"><code class="language-plaintext highlighter-rouge">flush</code></h5>

<p>Force a write to the client as data is received from the application. By default, mod_fastcgi buffers data in order to free the application as quickly as possible.</p>

<h5 id="faux_path-1"><code class="language-plaintext highlighter-rouge">faux_path</code></h5>

<p><code class="language-plaintext highlighter-rouge">faux_path</code> does not have to exist in the local filesystem. URIs that Apache resolves to this filename are handled by this external FastCGI application.</p>

<h5 id="alias-1"><code class="language-plaintext highlighter-rouge">alias</code></h5>

<p>A unique alias. This is used internally to link the action with the FastCGI server.</p>

<h5 id="file_type-1"><code class="language-plaintext highlighter-rouge">file_type</code></h5>

<p>The MIME-type of the file to be processed by the FastCGI server.</p>

<h5 id="pass_header"><code class="language-plaintext highlighter-rouge">pass_header</code></h5>

<p>The name of an HTTP Request Header to be passed in the request environment. This option makes available the contents of headers which are normally not available (e.g. Authorization) to a CGI environment.</p>

<h4 id="defined-type-apachevhostcustom">Defined type: <code class="language-plaintext highlighter-rouge">apache::vhost::custom</code></h4>

<p>The <code class="language-plaintext highlighter-rouge">apache::vhost::custom</code> defined type is a thin wrapper around the <code class="language-plaintext highlighter-rouge">apache::custom_config</code> defined type, and simply overrides some of its default settings specific to the virtual host directory in Apache.</p>

<p><strong>Parameters within <code class="language-plaintext highlighter-rouge">apache::vhost::custom</code></strong>:</p>

<h5 id="content-1"><code class="language-plaintext highlighter-rouge">content</code></h5>

<p>Sets the configuration file’s content.</p>

<h5 id="ensure-2"><code class="language-plaintext highlighter-rouge">ensure</code></h5>

<p>Specifies if the virtual host file is present or absent. Valid options: ‘absent’, ‘present’. Default: ‘present’.</p>

<h5 id="priority-2"><code class="language-plaintext highlighter-rouge">priority</code></h5>

<p>Sets the relative load order for Apache HTTPD VirtualHost configuration files. Default: ‘25’.</p>

<h5 id="verify_config-1"><code class="language-plaintext highlighter-rouge">verify_config</code></h5>

<p>Specifies whether to validate the configuration file before notifying the Apache service. Valid options: Boolean. Default: true.</p>

<h3 id="private-defined-types">Private defined types</h3>

<h4 id="defined-type-apacheperusermultiplexer">Defined type: <code class="language-plaintext highlighter-rouge">apache::peruser::multiplexer</code></h4>

<p>This defined type checks if an Apache module has a class. If it does, it includes that class. If it does not, it passes the module name to the <a href="#defined-type-apachemod"><code class="language-plaintext highlighter-rouge">apache::mod</code></a> defined type.</p>

<h4 id="defined-type-apacheperusermultiplexer-1">Defined type: <code class="language-plaintext highlighter-rouge">apache::peruser::multiplexer</code></h4>

<p>Enables the <a href="https://www.freebsd.org/cgi/url.cgi?ports/www/apache22-peruser-mpm/pkg-descr"><code class="language-plaintext highlighter-rouge">Peruser</code></a> module for FreeBSD only.</p>

<h4 id="defined-type-apacheperuserprocessor">Defined type: <code class="language-plaintext highlighter-rouge">apache::peruser::processor</code></h4>

<p>Enables the <a href="https://www.freebsd.org/cgi/url.cgi?ports/www/apache22-peruser-mpm/pkg-descr"><code class="language-plaintext highlighter-rouge">Peruser</code></a> module for FreeBSD only.</p>

<h4 id="defined-type-apachesecurityfile_link">Defined type: <code class="language-plaintext highlighter-rouge">apache::security::file_link</code></h4>

<p>Links the <code class="language-plaintext highlighter-rouge">activated_rules</code> from <a href="#class-apachemodsecurity"><code class="language-plaintext highlighter-rouge">apache::mod::security</code></a> to the respective CRS rules on disk.</p>

<h3 id="templates">Templates</h3>

<p>The Apache module relies heavily on templates to enable the <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> and <a href="#defined-type-apachemod"><code class="language-plaintext highlighter-rouge">apache::mod</code></a> defined types. These templates are built based on <a href="http://docs.puppetlabs.com/facter/">Facter</a> facts specific to your operating system. Unless explicitly called out, most templates are not meant for configuration.</p>

<h2 id="limitations">Limitations</h2>

<h3 id="ubuntu-1004">Ubuntu 10.04</h3>

<p>The <a href="#wsgiimportscript"><code class="language-plaintext highlighter-rouge">apache::vhost::WSGIImportScript</code></a> parameter creates a statement inside the virtual host that is unsupported on older versions of Apache, causing it to fail. This will be remedied in a future refactoring.</p>

<h3 id="ubuntu-1604">Ubuntu 16.04</h3>
<p>The [<code class="language-plaintext highlighter-rouge">apache::mod::suphp</code>][] class is untested since repositories are missing compatible packages.</p>

<h3 id="rhelcentos-5">RHEL/CentOS 5</h3>

<p>The <a href="#class-apachemodpassenger"><code class="language-plaintext highlighter-rouge">apache::mod::passenger</code></a> and <a href="#class-apachemodproxy_html"><code class="language-plaintext highlighter-rouge">apache::mod::proxy_html</code></a> classes are untested since repositories are missing compatible packages.</p>

<h3 id="rhelcentos-6">RHEL/CentOS 6</h3>

<p>The <a href="#class-apachemodpassenger"><code class="language-plaintext highlighter-rouge">apache::mod::passenger</code></a> class is not installing as the the EL6 repository is missing compatible packages.</p>

<h3 id="rhelcentos-7">RHEL/CentOS 7</h3>

<p>The <a href="#class-apachemodpassenger"><code class="language-plaintext highlighter-rouge">apache::mod::passenger</code></a> and <a href="#class-apachemodproxy_html"><code class="language-plaintext highlighter-rouge">apache::mod::proxy_html</code></a> classes are untested as the EL7 repository is missing compatible packages, which also blocks us from testing the <a href="#defined-type-apachevhost"><code class="language-plaintext highlighter-rouge">apache::vhost</code></a> defined type’s <a href="#rack_base_uris"><code class="language-plaintext highlighter-rouge">rack_base_uris</code></a> parameter.</p>

<h3 id="general">General</h3>

<p>This module is CI tested against both <a href="https://docs.puppetlabs.com/puppet/">open source Puppet</a> and <a href="https://docs.puppetlabs.com/pe/">Puppet Enterprise</a> on:</p>

<ul>
  <li>CentOS 5 and 6</li>
  <li>Ubuntu 12.04 and 14.04</li>
  <li>Debian 7</li>
  <li>RHEL 5, 6, and 7</li>
</ul>

<p>This module also provides functions for other distributions and operating systems, such as FreeBSD, Gentoo, and Amazon Linux, but is not formally tested on them and are subject to regressions.</p>

<h3 id="ubuntu-1004-1">Ubuntu 10.04</h3>

<p>The [<code class="language-plaintext highlighter-rouge">apache::vhost::wsgi_import_script</code>][] parameter creates a statement inside the virtual host that is unsupported on older versions of Apache, causing it to fail. This will be remedied in a future refactoring.</p>

<h3 id="rhelcentos">RHEL/CentOS</h3>
<p>The <a href="#class-apachemodauth_cas"><code class="language-plaintext highlighter-rouge">apache::mod::auth_cas</code></a>, <a href="#class-apachemodpassenger"><code class="language-plaintext highlighter-rouge">apache::mod::passenger</code></a>, <a href="#class-apachemodproxy_html"><code class="language-plaintext highlighter-rouge">apache::mod::proxy_html</code></a> and <a href="#class-apachemodshib"><code class="language-plaintext highlighter-rouge">apache::mod::shib</code></a> classes are not functional on RH/CentOS without providing dependency packages from extra repositories.</p>

<p>See their respective documentation above for related repositories and packages.</p>

<h3 id="selinux-and-custom-paths">SELinux and custom paths</h3>

<p>If <a href="http://selinuxproject.org/">SELinux</a> is in <a href="http://selinuxproject.org/page/Guide/Mode">enforcing mode</a> and you want to use custom paths for <code class="language-plaintext highlighter-rouge">logroot</code>, <code class="language-plaintext highlighter-rouge">mod_dir</code>, <code class="language-plaintext highlighter-rouge">vhost_dir</code>, and <code class="language-plaintext highlighter-rouge">docroot</code>, you need to manage the files’ context yourself.</p>

<p>You can do this with Puppet:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">exec</span> <span class="p">{</span> <span class="s1">'set_apache_defaults'</span><span class="p">:</span>
  <span class="py">command</span> <span class="p">=&gt;</span> <span class="s1">'semanage fcontext -a -t httpd_sys_content_t "/custom/path(/.*)?"'</span><span class="p">,</span>
  <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/bin:/usr/bin/:/sbin:/usr/sbin'</span><span class="p">,</span>
  <span class="kp">require</span> <span class="p">=&gt;</span> <span class="nc">Package</span><span class="p">[</span><span class="s1">'policycoreutils-python'</span><span class="p">],</span>
<span class="p">}</span>

<span class="n">package</span> <span class="p">{</span> <span class="s1">'policycoreutils-python'</span><span class="p">:</span>
  <span class="py">ensure</span> <span class="p">=&gt;</span> <span class="n">installed</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">exec</span> <span class="p">{</span> <span class="s1">'restorecon_apache'</span><span class="p">:</span>
  <span class="py">command</span> <span class="p">=&gt;</span> <span class="s1">'restorecon -Rv /apache_spec'</span><span class="p">,</span>
  <span class="py">path</span>    <span class="p">=&gt;</span> <span class="s1">'/bin:/usr/bin/:/sbin:/usr/sbin'</span><span class="p">,</span>
  <span class="kp">before</span>  <span class="p">=&gt;</span> <span class="nc">Class</span><span class="p">[</span><span class="s1">'Apache::Service'</span><span class="p">],</span>
  <span class="kp">require</span> <span class="p">=&gt;</span> <span class="nc">Class</span><span class="p">[</span><span class="s1">'apache'</span><span class="p">],</span>
<span class="p">}</span>

<span class="k">class</span> <span class="p">{</span> <span class="s1">'apache'</span><span class="p">:</span> <span class="p">}</span>

<span class="n">host</span> <span class="p">{</span> <span class="s1">'test.server'</span><span class="p">:</span>
  <span class="py">ip</span> <span class="p">=&gt;</span> <span class="s1">'127.0.0.1'</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">file</span> <span class="p">{</span> <span class="s1">'/custom/path'</span><span class="p">:</span>
  <span class="py">ensure</span> <span class="p">=&gt;</span> <span class="n">directory</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">file</span> <span class="p">{</span> <span class="s1">'/custom/path/include'</span><span class="p">:</span>
  <span class="py">ensure</span>  <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
  <span class="py">content</span> <span class="p">=&gt;</span> <span class="s1">'#additional_includes'</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">apache::vhost</span> <span class="p">{</span> <span class="s1">'test.server'</span><span class="p">:</span>
  <span class="py">docroot</span>             <span class="p">=&gt;</span> <span class="s1">'/custom/path'</span><span class="p">,</span>
  <span class="py">additional_includes</span> <span class="p">=&gt;</span> <span class="s1">'/custom/path/include'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You need to set the contexts using <code class="language-plaintext highlighter-rouge">semanage fcontext</code> instead of <code class="language-plaintext highlighter-rouge">chcon</code> because Puppet’s <code class="language-plaintext highlighter-rouge">file</code> resources reset the values’ context in the database if the resource doesn’t specify it.</p>

<h3 id="freebsd">FreeBSD</h3>

<p>In order to use this module on FreeBSD, you <em>must</em> use apache24-2.4.12 (www/apache24) or newer.</p>

<h2 id="development">Development</h2>

<h3 id="contributing">Contributing</h3>

<p><a href="https://puppetlabs.com">Puppet Labs</a> modules on the <a href="https://forge.puppetlabs.com">Puppet Forge</a> are open projects, and community contributions are essential for keeping them great. We can’t access the huge number of platforms and myriad hardware, software, and deployment configurations that Puppet is intended to serve.</p>

<p>We want to make it as easy as possible to contribute changes so our modules work in your environment, but we also need contributors to follow a few guidelines to help us maintain and improve the modules’ quality.</p>

<p>For more information, please read the complete <a href="https://docs.puppetlabs.com/forge/contributing.html">module contribution guide</a>.</p>

<h3 id="running-tests">Running tests</h3>

<p>This project contains tests for both <a href="http://rspec-puppet.com/">rspec-puppet</a> and <a href="https://github.com/puppetlabs/beaker-rspec">beaker-rspec</a> to verify functionality. For detailed information on using these tools, please see their respective documentation.</p>

<h4 id="testing-quickstart-ruby--187">Testing quickstart: Ruby &gt; 1.8.7</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem install bundler
bundle install
bundle exec rake spec
bundle exec rspec spec/acceptance
RS_DEBUG=yes bundle exec rspec spec/acceptance
</code></pre></div></div>

<h4 id="testing-quickstart-ruby--187-1">Testing quickstart: Ruby = 1.8.7</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem install bundler
bundle install --without system_tests
bundle exec rake spec
</code></pre></div></div>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/RussianPenguin/russianpenguin.github.io">russianpenguin.github.io</a> is maintained by <a href="https://github.com/RussianPenguin">RussianPenguin</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(69889387, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/69889387" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  </body>
</html>
