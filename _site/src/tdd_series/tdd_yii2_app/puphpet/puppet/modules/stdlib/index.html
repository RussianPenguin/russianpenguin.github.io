<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="yandex-verification" content="551ffc5ae1433df6" />
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Чтобы не забыть | Записная книжка рассеянного [в пространстве и времени] программиста</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Чтобы не забыть" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<meta property="og:description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<link rel="canonical" href="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/stdlib/" />
<meta property="og:url" content="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/stdlib/" />
<meta property="og:site_name" content="Чтобы не забыть" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Чтобы не забыть" />
<script type="application/ld+json">
{"headline":"Чтобы не забыть","description":"Записная книжка рассеянного [в пространстве и времени] программиста","@type":"WebPage","url":"http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/stdlib/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=eacdde9998fcd3dd17b1956e7070eca69fdaf217">
  </head>
  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name">Чтобы не забыть</h1>
      <h2 class="project-tagline">Записная книжка рассеянного [в пространстве и времени] программиста</h2>
      
        <a href="https://github.com/RussianPenguin/russianpenguin.github.io" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <p>#stdlib</p>

<p>####Table of Contents</p>

<ol>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#module-description">Module Description - What the module does and why it is useful</a></li>
  <li><a href="#setup">Setup - The basics of getting started with stdlib</a></li>
  <li><a href="#usage">Usage - Configuration options and additional functionality</a></li>
  <li><a href="#reference">Reference - An under-the-hood peek at what the module is doing and how</a></li>
  <li><a href="#limitations">Limitations - OS compatibility, etc.</a></li>
  <li><a href="#development">Development - Guide for contributing to the module</a></li>
</ol>

<p>##Overview</p>

<p>Adds a standard library of resources for Puppet modules.</p>

<p>##Module Description</p>

<p>This module provides a standard library of resources for the development of Puppet modules. Puppet modules make heavy use of this standard library. The stdlib module adds the following resources to Puppet:</p>

<ul>
  <li>Stages</li>
  <li>Facts</li>
  <li>Functions</li>
  <li>Defined resource types</li>
  <li>Types</li>
  <li>Providers</li>
</ul>

<blockquote>
  <p><em>Note:</em> As of version 3.7, Puppet Enterprise no longer includes the stdlib module. If you’re running Puppet Enterprise, you should install the most recent release of stdlib for compatibility with Puppet modules.</p>
</blockquote>

<p>##Setup</p>

<p>Installing the stdlib module adds the functions, facts, and resources of this standard library to Puppet.</p>

<p>##Usage</p>

<p>After you’ve installed stdlib, all of its functions, facts, and resources are available for module use or development.</p>

<p>If you want to use a standardized set of run stages for Puppet, <code class="language-plaintext highlighter-rouge">include stdlib</code> in your manifest.</p>

<ul>
  <li>
    <p><code class="language-plaintext highlighter-rouge">stdlib</code>: Most of stdlib’s features are automatically loaded by Puppet. To use standardized run stages in Puppet, declare this class in your manifest with <code class="language-plaintext highlighter-rouge">include stdlib</code>.</p>

    <p>When declared, stdlib declares all other classes in the module. The only other class currently included in the module is <code class="language-plaintext highlighter-rouge">stdlib::stages</code>.</p>
  </li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">stdlib::stages</code> class declares various run stages for deploying infrastructure, language runtimes, and application layers. The high level stages are (in order):</p>

<ul>
  <li>setup</li>
  <li>main</li>
  <li>runtime</li>
  <li>setup_infra</li>
  <li>deploy_infra</li>
  <li>setup_app</li>
  <li>deploy_app</li>
  <li>deploy</li>
</ul>

<p>Sample usage:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  node default {
    include stdlib
    class { java: stage =&gt; 'runtime' }
  }
</code></pre></div></div>

<h2 id="reference">Reference</h2>

<h3 id="classes">Classes</h3>

<h4 id="public-classes">Public Classes</h4>

<p>The stdlib class has no parameters.</p>

<h4 id="private-classes">Private Classes</h4>

<ul>
  <li><code class="language-plaintext highlighter-rouge">stdlib::stages</code>: Manages a standard set of run stages for Puppet. It is managed by the stdlib class and should not be declared independently.</li>
</ul>

<h3 id="types">Types</h3>

<h4 id="file_line"><code class="language-plaintext highlighter-rouge">file_line</code></h4>

<p>Ensures that a given line is contained within a file. The implementation matches the full line, including whitespace at the beginning and end. If the line is not contained in the given file, Puppet appends the line to the end of the file to ensure the desired state.  Multiple resources can be declared to manage multiple lines in the same file.</p>

<p>Example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>file_line { 'sudo_rule':
  path =&gt; '/etc/sudoers',
  line =&gt; '%sudo ALL=(ALL) ALL',
}

file_line { 'sudo_rule_nopw':
  path =&gt; '/etc/sudoers',
  line =&gt; '%sudonopw ALL=(ALL) NOPASSWD: ALL',
}
</code></pre></div></div>

<p>In this example, Puppet ensures that both of the specified lines are contained in the file <code class="language-plaintext highlighter-rouge">/etc/sudoers</code>.</p>

<p>Match Example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>file_line { 'bashrc_proxy':
  ensure =&gt; present,
  path   =&gt; '/etc/bashrc',
  line   =&gt; 'export HTTP_PROXY=http://squid.puppetlabs.vm:3128',
  match  =&gt; '^export\ HTTP_PROXY\=',
}
</code></pre></div></div>

<p>In this code example, <code class="language-plaintext highlighter-rouge">match</code> looks for a line beginning with export followed by HTTP_PROXY and replaces it with the value in line.</p>

<p>Match Example With <code class="language-plaintext highlighter-rouge">ensure =&gt; absent</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>file_line { 'bashrc_proxy':
  ensure            =&gt; absent,
  path              =&gt; '/etc/bashrc',
  line              =&gt; 'export HTTP_PROXY=http://squid.puppetlabs.vm:3128',
  match             =&gt; '^export\ HTTP_PROXY\=',
  match_for_absence =&gt; true,
}
</code></pre></div></div>

<p>In this code example, <code class="language-plaintext highlighter-rouge">match</code> looks for a line beginning with export
followed by HTTP_PROXY and delete it.  If multiple lines match, an
error will be raised unless the <code class="language-plaintext highlighter-rouge">multiple =&gt; true</code> parameter is set.</p>

<p><strong>Autorequires:</strong> If Puppet is managing the file that contains the line being managed, the <code class="language-plaintext highlighter-rouge">file_line</code> resource autorequires that file.</p>

<h5 id="parameters">Parameters</h5>

<p>All parameters are optional, unless otherwise noted.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">after</code>: Specifies the line after which Puppet adds any new lines. (Existing lines are added in place.) Valid options: String. Default: Undefined.</li>
  <li><code class="language-plaintext highlighter-rouge">ensure</code>: Ensures whether the resource is present. Valid options: ‘present’, ‘absent’. Default: ‘present’.</li>
  <li><code class="language-plaintext highlighter-rouge">line</code>: <strong>Required.</strong> Sets the line to be added to the file located by the <code class="language-plaintext highlighter-rouge">path</code> parameter. Valid options: String. Default: Undefined.</li>
  <li><code class="language-plaintext highlighter-rouge">match</code>: Specifies a regular expression to run against existing lines in the file; if a match is found, it is replaced rather than adding a new line. A regex comparison is performed against the line value, and if it does not match, an exception is raised. Valid options: String containing a regex. Default: Undefined.</li>
  <li><code class="language-plaintext highlighter-rouge">match_for_absence</code>: An optional value to determine if match should be applied when <code class="language-plaintext highlighter-rouge">ensure =&gt; absent</code>. If set to true and match is set, the line that matches match will be deleted. If set to false (the default), match is ignored when <code class="language-plaintext highlighter-rouge">ensure =&gt; absent</code> and the value of <code class="language-plaintext highlighter-rouge">line</code> is used instead. Default: false.</li>
  <li><code class="language-plaintext highlighter-rouge">multiple</code>: Determines if <code class="language-plaintext highlighter-rouge">match</code> and/or <code class="language-plaintext highlighter-rouge">after</code> can change multiple lines. If set to false, an exception will be raised if more than one line matches. Valid options: ‘true’, ‘false’. Default: Undefined.</li>
  <li><code class="language-plaintext highlighter-rouge">name</code>: Sets the name to use as the identity of the resource. This is necessary if you want the resource namevar to differ from the supplied <code class="language-plaintext highlighter-rouge">title</code> of the resource. Valid options: String. Default: Undefined.</li>
  <li><code class="language-plaintext highlighter-rouge">path</code>: <strong>Required.</strong> Defines the file in which Puppet will ensure the line specified by <code class="language-plaintext highlighter-rouge">line</code>. Must be an absolute path to the file.</li>
  <li><code class="language-plaintext highlighter-rouge">replace</code>: Defines whether the resource will overwrite an existing line that matches the <code class="language-plaintext highlighter-rouge">match</code> parameter. If set to false and a line is found matching the <code class="language-plaintext highlighter-rouge">match</code> param, the line will not be placed in the file. Valid options: true, false, yes, no. Default: true</li>
</ul>

<h3 id="functions">Functions</h3>

<h4 id="abs"><code class="language-plaintext highlighter-rouge">abs</code></h4>

<p>Returns the absolute value of a number; for example, ‘-34.56’ becomes ‘34.56’. Takes a single integer and float value as an argument. <em>Type</em>: rvalue.</p>

<h4 id="any2array"><code class="language-plaintext highlighter-rouge">any2array</code></h4>

<p>Converts any object to an array containing that object. Empty argument lists are converted to an empty array. Arrays are left untouched. Hashes are converted to arrays of alternating keys and values. <em>Type</em>: rvalue.</p>

<h4 id="base64"><code class="language-plaintext highlighter-rouge">base64</code></h4>

<p>Converts a string to and from base64 encoding. Requires an <code class="language-plaintext highlighter-rouge">action</code> (‘encode’, ‘decode’) and either a plain or base64-encoded <code class="language-plaintext highlighter-rouge">string</code>, and an optional <code class="language-plaintext highlighter-rouge">method</code> (‘default’, ‘strict’, ‘urlsafe’)</p>

<p>For backward compatibility, <code class="language-plaintext highlighter-rouge">method</code> will be set as <code class="language-plaintext highlighter-rouge">default</code> if not specified.</p>

<p><em>Examples:</em></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>base64('encode', 'hello')
base64('encode', 'hello', 'default')
# return: "aGVsbG8=\n"

base64('encode', 'hello', 'strict')
# return: "aGVsbG8="

base64('decode', 'aGVsbG8=')
base64('decode', 'aGVsbG8=\n')
base64('decode', 'aGVsbG8=', 'default')
base64('decode', 'aGVsbG8=\n', 'default')
base64('decode', 'aGVsbG8=', 'strict')
# return: "hello"

base64('encode', 'https://puppetlabs.com', 'urlsafe')
# return: "aHR0cHM6Ly9wdXBwZXRsYWJzLmNvbQ=="

base64('decode', 'aHR0cHM6Ly9wdXBwZXRsYWJzLmNvbQ==', 'urlsafe')
# return: "https://puppetlabs.com"
</code></pre></div></div>

<p><em>Type</em>: rvalue.</p>

<h4 id="basename"><code class="language-plaintext highlighter-rouge">basename</code></h4>

<p>Returns the <code class="language-plaintext highlighter-rouge">basename</code> of a path (optionally stripping an extension). For example:</p>
<ul>
  <li>(‘/path/to/a/file.ext’) returns ‘file.ext’</li>
  <li>(‘relative/path/file.ext’) returns ‘file.ext’</li>
  <li>(‘/path/to/a/file.ext’, ‘.ext’) returns ‘file’</li>
</ul>

<p><em>Type</em>: rvalue.</p>

<h4 id="bool2num"><code class="language-plaintext highlighter-rouge">bool2num</code></h4>

<p>Converts a boolean to a number. Converts values:</p>
<ul>
  <li>‘false’, ‘f’, ‘0’, ‘n’, and ‘no’ to 0.</li>
  <li>‘true’, ‘t’, ‘1’, ‘y’, and ‘yes’ to 1.
  Requires a single boolean or string as an input. <em>Type</em>: rvalue.</li>
</ul>

<h4 id="bool2str"><code class="language-plaintext highlighter-rouge">bool2str</code></h4>

<p>Converts a boolean to a string using optionally supplied arguments. The optional second and third arguments represent what true and false are converted to respectively. If only one argument is given, it is converted from a boolean to a string containing ‘true’ or ‘false’.</p>

<p><em>Examples:</em></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bool2str(true)                    =&gt; 'true'
bool2str(true, 'yes', 'no')       =&gt; 'yes'
bool2str(false, 't', 'f')         =&gt; 'f'
</code></pre></div></div>

<p>Requires a single boolean as input. <em>Type</em>: rvalue.</p>

<h4 id="capitalize"><code class="language-plaintext highlighter-rouge">capitalize</code></h4>

<p>Capitalizes the first character of a string or array of strings and lowercases the remaining characters of each string. Requires either a single string or an array as an input. <em>Type</em>: rvalue.</p>

<h4 id="ceiling"><code class="language-plaintext highlighter-rouge">ceiling</code></h4>

<p>Returns the smallest integer greater than or equal to the argument. Takes a single numeric value as an argument. <em>Type</em>: rvalue.</p>

<h4 id="chomp"><code class="language-plaintext highlighter-rouge">chomp</code></h4>

<p>Removes the record separator from the end of a string or an array of strings; for example, ‘hello\n’ becomes ‘hello’. Requires a single string or array as an input. <em>Type</em>: rvalue.</p>

<h4 id="chop"><code class="language-plaintext highlighter-rouge">chop</code></h4>

<p>Returns a new string with the last character removed. If the string ends with ‘\r\n’, both characters are removed. Applying <code class="language-plaintext highlighter-rouge">chop</code> to an empty string returns an empty string. If you want to merely remove record separators, then you should use the <code class="language-plaintext highlighter-rouge">chomp</code> function. Requires a string or an array of strings as input. <em>Type</em>: rvalue.</p>

<h4 id="clamp"><code class="language-plaintext highlighter-rouge">clamp</code></h4>

<p>Keeps value within the range [Min, X, Max] by sort based on integer value (order of params doesn’t matter). Takes strings, arrays or numerics. Strings are converted and compared numerically. Arrays of values are flattened into a list for further handling. For example:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">clamp('24', [575, 187])</code> returns 187.</li>
  <li><code class="language-plaintext highlighter-rouge">clamp(16, 88, 661)</code> returns 88.</li>
  <li><code class="language-plaintext highlighter-rouge">clamp([4, 3, '99'])</code> returns 4.
  <em>Type</em>: rvalue.</li>
</ul>

<h4 id="concat"><code class="language-plaintext highlighter-rouge">concat</code></h4>

<p>Appends the contents of multiple arrays onto the first array given. For example:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">concat(['1','2','3'],'4')</code> returns [‘1’,’2’,’3’,’4’].</li>
  <li><code class="language-plaintext highlighter-rouge">concat(['1','2','3'],'4',['5','6','7'])</code> returns [‘1’,’2’,’3’,’4’,’5’,’6’,’7’].
  <em>Type</em>: rvalue.</li>
</ul>

<h4 id="convert_base"><code class="language-plaintext highlighter-rouge">convert_base</code></h4>

<p>Converts a given integer or base 10 string representing an integer to a specified base, as a string. For example:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">convert_base(5, 2)</code> results in: ‘101’</li>
  <li><code class="language-plaintext highlighter-rouge">convert_base('254', '16')</code> results in: ‘fe’</li>
</ul>

<h4 id="count"><code class="language-plaintext highlighter-rouge">count</code></h4>

<p>If called with only an array, it counts the number of elements that are <strong>not</strong> nil/undef. If called with a second argument, counts the number of elements in an array that matches the second argument. <em>Type</em>: rvalue.</p>

<h4 id="defined_with_params"><code class="language-plaintext highlighter-rouge">defined_with_params</code></h4>

<p>Takes a resource reference and an optional hash of attributes. Returns ‘true’ if a resource with the specified attributes has already been added to the catalog. Returns ‘false’ otherwise.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  user { 'dan':
    ensure =&gt; present,
  }

  if ! defined_with_params(User[dan], {'ensure' =&gt; 'present' }) {
    user { 'dan': ensure =&gt; present, }
  }
</code></pre></div></div>

<p><em>Type</em>: rvalue.</p>

<h4 id="delete"><code class="language-plaintext highlighter-rouge">delete</code></h4>

<p>Deletes all instances of a given element from an array, substring from a string, or key from a hash. For example, <code class="language-plaintext highlighter-rouge">delete(['a','b','c','b'], 'b')</code> returns [‘a’,’c’]; <code class="language-plaintext highlighter-rouge">delete('abracadabra', 'bra')</code> returns ‘acada’. <code class="language-plaintext highlighter-rouge">delete({'a' =&gt; 1,'b' =&gt; 2,'c' =&gt; 3},['b','c'])</code> returns {‘a’=&gt; 1}. <em>Type</em>: rvalue.</p>

<h4 id="delete_at"><code class="language-plaintext highlighter-rouge">delete_at</code></h4>

<p>Deletes a determined indexed value from an array. For example, <code class="language-plaintext highlighter-rouge">delete_at(['a','b','c'], 1)</code> returns [‘a’,’c’]. <em>Type</em>: rvalue.</p>

<h4 id="delete_values"><code class="language-plaintext highlighter-rouge">delete_values</code></h4>

<p>Deletes all instances of a given value from a hash. For example, <code class="language-plaintext highlighter-rouge">delete_values({'a'=&gt;'A','b'=&gt;'B','c'=&gt;'C','B'=&gt;'D'}, 'B')</code> returns {‘a’=&gt;’A’,’c’=&gt;’C’,’B’=&gt;’D’} <em>Type</em>: rvalue.</p>

<h4 id="delete_undef_values"><code class="language-plaintext highlighter-rouge">delete_undef_values</code></h4>

<p>Deletes all instances of the undef value from an array or hash. For example, <code class="language-plaintext highlighter-rouge">$hash = delete_undef_values({a=&gt;'A', b=&gt;'', c=&gt;undef, d =&gt; false})</code> returns {a =&gt; ‘A’, b =&gt; ‘’, d =&gt; false}. <em>Type</em>: rvalue.</p>

<h4 id="difference"><code class="language-plaintext highlighter-rouge">difference</code></h4>

<p>Returns the difference between two arrays. The returned array is a copy of the original array, removing any items that also appear in the second array. For example, <code class="language-plaintext highlighter-rouge">difference(["a","b","c"],["b","c","d"])</code> returns [“a”]. <em>Type</em>: rvalue.</p>

<h4 id="dig"><code class="language-plaintext highlighter-rouge">dig</code></h4>

<p><em>Type</em>: rvalue.</p>

<p>Retrieves a value within multiple layers of hashes and arrays via an array of keys containing a path. The function goes through the structure by each path component and tries to return the value at the end of the path.</p>

<p>In addition to the required path argument, the function accepts the default argument. It is returned if the path is not correct, if no value was found, or if any other error has occurred.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vg">$data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'a'</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">'b'</span> <span class="o">=&gt;</span> <span class="p">[</span>
      <span class="s1">'b1'</span><span class="p">,</span>
      <span class="s1">'b2'</span><span class="p">,</span>
      <span class="s1">'b3'</span><span class="p">,</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="vg">$value</span> <span class="o">=</span> <span class="n">dig</span><span class="p">(</span><span class="vg">$data</span><span class="p">,</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="c1"># $value = 'b3'</span>

<span class="c1"># with all possible options</span>
<span class="vg">$value</span> <span class="o">=</span> <span class="n">dig</span><span class="p">(</span><span class="vg">$data</span><span class="p">,</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="s1">'not_found'</span><span class="p">)</span>
<span class="c1"># $value = 'b3'</span>

<span class="c1"># using the default value</span>
<span class="vg">$value</span> <span class="o">=</span> <span class="n">dig</span><span class="p">(</span><span class="vg">$data</span><span class="p">,</span> <span class="p">[</span><span class="s1">'a'</span><span class="p">,</span> <span class="s1">'b'</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="s1">'d'</span><span class="p">],</span> <span class="s1">'not_found'</span><span class="p">)</span>
<span class="c1"># $value = 'not_found'</span>
</code></pre></div></div>

<ol>
  <li><strong>$data</strong> The data structure we are working with.</li>
  <li><strong>[‘a’, ‘b’, 2]</strong> The path array.</li>
  <li><strong>‘not_found’</strong> The default value. It will be returned if nothing is found.
(optional, defaults to <em>undef</em>)</li>
</ol>

<h4 id="dirname"><code class="language-plaintext highlighter-rouge">dirname</code></h4>

<p>Returns the <code class="language-plaintext highlighter-rouge">dirname</code> of a path. For example, <code class="language-plaintext highlighter-rouge">dirname('/path/to/a/file.ext')</code> returns ‘/path/to/a’. <em>Type</em>: rvalue.</p>

<h4 id="dos2unix"><code class="language-plaintext highlighter-rouge">dos2unix</code></h4>

<p>Returns the Unix version of the given string. Very useful when using a File resource with a cross-platform template. <em>Type</em>: rvalue.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>file{$config_file:
  ensure  =&gt; file,
  content =&gt; dos2unix(template('my_module/settings.conf.erb')),
}
</code></pre></div></div>

<p>See also <a href="#unix2dos">unix2dos</a>.</p>

<h4 id="downcase"><code class="language-plaintext highlighter-rouge">downcase</code></h4>

<p>Converts the case of a string or of all strings in an array to lowercase. <em>Type</em>: rvalue.</p>

<h4 id="empty"><code class="language-plaintext highlighter-rouge">empty</code></h4>

<p>Returns true if the argument is an array or hash that contains no elements, or an empty string. Returns false when the argument is a numerical value. <em>Type</em>: rvalue.</p>

<h4 id="enclose_ipv6"><code class="language-plaintext highlighter-rouge">enclose_ipv6</code></h4>

<p>Takes an array of ip addresses and encloses the ipv6 addresses with square brackets. <em>Type</em>: rvalue.</p>

<h4 id="ensure_packages"><code class="language-plaintext highlighter-rouge">ensure_packages</code></h4>

<p>Takes a list of packages array/hash and only installs them if they don’t already exist. It optionally takes a hash as a second parameter to be passed as the third argument to the <code class="language-plaintext highlighter-rouge">ensure_resource()</code> or <code class="language-plaintext highlighter-rouge">ensure_resources()</code> function. <em>Type</em>: statement.</p>

<p>For Array:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ensure_packages(['ksh','openssl'], {'ensure' =&gt; 'present'})
</code></pre></div></div>

<p>For Hash:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ensure_packages({'ksh' =&gt; { enure =&gt; '20120801-1' } ,  'mypackage' =&gt; { source =&gt; '/tmp/myrpm-1.0.0.x86_64.rpm', provider =&gt; "rpm" }}, {'ensure' =&gt; 'present'})
</code></pre></div></div>

<h4 id="ensure_resource"><code class="language-plaintext highlighter-rouge">ensure_resource</code></h4>

<p>Takes a resource type, title, and a hash of attributes that describe the resource(s).</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user { 'dan':
  ensure =&gt; present,
}
</code></pre></div></div>

<p>This example only creates the resource if it does not already exist:</p>

<p><code class="language-plaintext highlighter-rouge">ensure_resource('user', 'dan', {'ensure' =&gt; 'present' })</code></p>

<p>If the resource already exists, but does not match the specified parameters, this function attempts to recreate the resource, leading to a duplicate resource definition error.</p>

<p>An array of resources can also be passed in, and each will be created with the type and parameters specified if it doesn’t already exist.</p>

<p><code class="language-plaintext highlighter-rouge">ensure_resource('user', ['dan','alex'], {'ensure' =&gt; 'present'})</code></p>

<p><em>Type</em>: statement.</p>

<h4 id="ensure_resources"><code class="language-plaintext highlighter-rouge">ensure_resources</code></h4>

<p>Takes a resource type, title (only hash), and a hash of attributes that describe the resource(s).</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>user { 'dan':
  gid =&gt; 'mygroup',
  ensure =&gt; present,
}

ensure_resources($user)
</code></pre></div></div>

<p>An hash of resources should be passed in and each will be created with the type and parameters specified if it doesn’t already exist:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ensure_resources('user', {'dan' =&gt; { gid =&gt; 'mygroup', uid =&gt; '600' } ,  'alex' =&gt; { gid =&gt; 'mygroup' }}, {'ensure' =&gt; 'present'})
</code></pre></div></div>

<p>From Hiera Backend:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>userlist:
dan:
  gid: 'mygroup'
uid: '600'
alex:
gid: 'mygroup'

ensure_resources('user', hiera_hash('userlist'), {'ensure' =&gt; 'present'})
</code></pre></div></div>

<h3 id="flatten"><code class="language-plaintext highlighter-rouge">flatten</code></h3>

<p>Flattens deeply nested arrays and returns a single flat array as a result. For example, <code class="language-plaintext highlighter-rouge">flatten(['a', ['b', ['c']]])</code> returns [‘a’,’b’,’c’]. <em>Type</em>: rvalue.</p>

<h4 id="floor"><code class="language-plaintext highlighter-rouge">floor</code></h4>

<p>Takes a single numeric value as an argument, and returns the largest integer less than or equal to the argument. <em>Type</em>: rvalue.</p>

<h4 id="fqdn_rand_string"><code class="language-plaintext highlighter-rouge">fqdn_rand_string</code></h4>

<p>Generates a random alphanumeric string using an optionally-specified character set (default is alphanumeric), combining the <code class="language-plaintext highlighter-rouge">$fqdn</code> fact and an optional seed for repeatable randomness.</p>

<p><em>Usage:</em></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fqdn_rand_string(LENGTH, [CHARSET], [SEED])
</code></pre></div></div>
<p><em>Examples:</em></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fqdn_rand_string(10)
fqdn_rand_string(10, 'ABCDEF!@#$%^')
fqdn_rand_string(10, '', 'custom seed')
</code></pre></div></div>

<p><em>Type</em>: rvalue.</p>

<h4 id="fqdn_rotate"><code class="language-plaintext highlighter-rouge">fqdn_rotate</code></h4>

<p>Rotates an array or string a random number of times, combining the <code class="language-plaintext highlighter-rouge">$fqdn</code> fact and an optional seed for repeatable randomness.</p>

<p><em>Usage:</em></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fqdn_rotate(VALUE, [SEED])
</code></pre></div></div>

<p><em>Examples:</em></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fqdn_rotate(['a', 'b', 'c', 'd'])
fqdn_rotate('abcd')
fqdn_rotate([1, 2, 3], 'custom seed')
</code></pre></div></div>

<p><em>Type</em>: rvalue.</p>

<h4 id="get_module_path"><code class="language-plaintext highlighter-rouge">get_module_path</code></h4>

<p>Returns the absolute path of the specified module for the current environment.</p>

<p><code class="language-plaintext highlighter-rouge">$module_path = get_module_path('stdlib')</code></p>

<p><em>Type</em>: rvalue.</p>

<h4 id="getparam"><code class="language-plaintext highlighter-rouge">getparam</code></h4>

<p>Takes a resource reference and the name of the parameter, and returns the value of the resource’s parameter.</p>

<p>For example, the following returns ‘param_value’:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  define example_resource($param) {
  }

  example_resource { "example_resource_instance":
    param =&gt; "param_value"
  }

  getparam(Example_resource["example_resource_instance"], "param")
</code></pre></div></div>

<p><em>Type</em>: rvalue.</p>

<h4 id="getvar"><code class="language-plaintext highlighter-rouge">getvar</code></h4>

<p>Looks up a variable in a remote namespace.</p>

<p>For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $foo = getvar('site::data::foo')
  # Equivalent to $foo = $site::data::foo
</code></pre></div></div>

<p>This is useful if the namespace itself is stored in a string:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $datalocation = 'site::data'
  $bar = getvar("${datalocation}::bar")
  # Equivalent to $bar = $site::data::bar
</code></pre></div></div>

<p><em>Type</em>: rvalue.</p>

<h4 id="grep"><code class="language-plaintext highlighter-rouge">grep</code></h4>

<p>Searches through an array and returns any elements that match the provided regular expression. For example, <code class="language-plaintext highlighter-rouge">grep(['aaa','bbb','ccc','aaaddd'], 'aaa')</code> returns [‘aaa’,’aaaddd’]. <em>Type</em>: rvalue.</p>

<h4 id="has_interface_with"><code class="language-plaintext highlighter-rouge">has_interface_with</code></h4>

<p>Returns a boolean based on kind and value:</p>
<ul>
  <li>macaddress</li>
  <li>netmask</li>
  <li>ipaddress</li>
  <li>network</li>
</ul>

<p><em>Examples:</em></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  has_interface_with("macaddress", "x:x:x:x:x:x")
  has_interface_with("ipaddress", "127.0.0.1")    =&gt; true
</code></pre></div></div>

<p>If no kind is given, then the presence of the interface is checked:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  has_interface_with("lo")                        =&gt; true
</code></pre></div></div>

<p><em>Type</em>: rvalue.</p>

<h4 id="has_ip_address"><code class="language-plaintext highlighter-rouge">has_ip_address</code></h4>

<p>Returns ‘true’ if the client has the requested IP address on some interface. This function iterates through the <code class="language-plaintext highlighter-rouge">interfaces</code> fact and checks the <code class="language-plaintext highlighter-rouge">ipaddress_IFACE</code> facts, performing a simple string comparison. <em>Type</em>: rvalue.</p>

<h4 id="has_ip_network"><code class="language-plaintext highlighter-rouge">has_ip_network</code></h4>

<p>Returns ‘true’ if the client has an IP address within the requested network. This function iterates through the <code class="language-plaintext highlighter-rouge">interfaces</code> fact and checks the <code class="language-plaintext highlighter-rouge">network_IFACE</code> facts, performing a simple string comparision. <em>Type</em>: rvalue.</p>

<h4 id="has_key"><code class="language-plaintext highlighter-rouge">has_key</code></h4>

<p>Determines if a hash has a certain key value.</p>

<p><em>Example</em>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $my_hash = {'key_one' =&gt; 'value_one'}
  if has_key($my_hash, 'key_two') {
    notice('we will not reach here')
  }
  if has_key($my_hash, 'key_one') {
    notice('this will be printed')
  }
</code></pre></div></div>

<p><em>Type</em>: rvalue.</p>

<h4 id="hash"><code class="language-plaintext highlighter-rouge">hash</code></h4>

<p>Converts an array into a hash. For example, <code class="language-plaintext highlighter-rouge">hash(['a',1,'b',2,'c',3])</code> returns {‘a’=&gt;1,’b’=&gt;2,’c’=&gt;3}. <em>Type</em>: rvalue.</p>

<h4 id="intersection"><code class="language-plaintext highlighter-rouge">intersection</code></h4>

<p>Returns an array an intersection of two. For example, <code class="language-plaintext highlighter-rouge">intersection(["a","b","c"],["b","c","d"])</code> returns [“b”,”c”]. <em>Type</em>: rvalue.</p>

<h4 id="is_a"><code class="language-plaintext highlighter-rouge">is_a</code></h4>

<p>Boolean check to determine whether a variable is of a given data type. This is equivalent to the <code class="language-plaintext highlighter-rouge">=~</code> type checks. This function is available only in Puppet 4 or in Puppet 3 with the “future” parser.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  foo = 3
  $bar = [1,2,3]
  $baz = 'A string!'

  if $foo.is_a(Integer) {
    notify  { 'foo!': }
  }
  if $bar.is_a(Array) {
    notify { 'bar!': }
  }
  if $baz.is_a(String) {
    notify { 'baz!': }
  }
</code></pre></div></div>

<p>See the <a href="https://docs.puppetlabs.com/references/latest/type.html#about-resource-types">the Puppet type system</a> for more information about types.
See the <a href="https://docs.puppetlabs.com/references/latest/function.html#asserttype"><code class="language-plaintext highlighter-rouge">assert_type()</code></a> function for flexible ways to assert the type of a value.</p>

<h4 id="is_absolute_path"><code class="language-plaintext highlighter-rouge">is_absolute_path</code></h4>

<p>Returns ‘true’ if the given path is absolute. <em>Type</em>: rvalue.</p>

<h4 id="is_array"><code class="language-plaintext highlighter-rouge">is_array</code></h4>

<p>Returns ‘true’ if the variable passed to this function is an array. <em>Type</em>: rvalue.</p>

<h4 id="is_bool"><code class="language-plaintext highlighter-rouge">is_bool</code></h4>

<p>Returns ‘true’ if the variable passed to this function is a boolean. <em>Type</em>: rvalue.</p>

<h4 id="is_domain_name"><code class="language-plaintext highlighter-rouge">is_domain_name</code></h4>

<p>Returns ‘true’ if the string passed to this function is a syntactically correct domain name. <em>Type</em>: rvalue.</p>

<h4 id="is_float"><code class="language-plaintext highlighter-rouge">is_float</code></h4>

<p>Returns ‘true’ if the variable passed to this function is a float. <em>Type</em>: rvalue.</p>

<h4 id="is_function_available"><code class="language-plaintext highlighter-rouge">is_function_available</code></h4>

<p>Accepts a string as an argument and determines whether the Puppet runtime has access to a function by that name. It returns ‘true’ if the function exists, ‘false’ if not. <em>Type</em>: rvalue.</p>

<h4 id="is_hash"><code class="language-plaintext highlighter-rouge">is_hash</code></h4>

<p>Returns ‘true’ if the variable passed to this function is a hash. <em>Type</em>: rvalue.</p>

<h4 id="is_integer"><code class="language-plaintext highlighter-rouge">is_integer</code></h4>

<p>Returns ‘true’ if the variable returned to this string is an integer. <em>Type</em>: rvalue.</p>

<h4 id="is_ip_address"><code class="language-plaintext highlighter-rouge">is_ip_address</code></h4>

<p>Returns ‘true’ if the string passed to this function is a valid IP address. <em>Type</em>: rvalue.</p>

<h4 id="is_ipv6_address"><code class="language-plaintext highlighter-rouge">is_ipv6_address</code></h4>

<p>Returns ‘true’ if the string passed to this function is a valid IPv6 address. <em>Type</em>: rvalue.</p>

<h4 id="is_ipv4_address"><code class="language-plaintext highlighter-rouge">is_ipv4_address</code></h4>

<p>Returns ‘true’ if the string passed to this function is a valid IPv4 address. <em>Type</em>: rvalue.</p>

<h4 id="is_mac_address"><code class="language-plaintext highlighter-rouge">is_mac_address</code></h4>

<p>Returns ‘true’ if the string passed to this function is a valid MAC address. <em>Type</em>: rvalue.</p>

<h4 id="is_numeric"><code class="language-plaintext highlighter-rouge">is_numeric</code></h4>

<p>Returns ‘true’ if the variable passed to this function is a number. <em>Type</em>: rvalue.</p>

<h4 id="is_string"><code class="language-plaintext highlighter-rouge">is_string</code></h4>

<p>Returns ‘true’ if the variable passed to this function is a string. <em>Type</em>: rvalue.</p>

<h4 id="join"><code class="language-plaintext highlighter-rouge">join</code></h4>

<p>Joins an array into a string using a separator. For example, <code class="language-plaintext highlighter-rouge">join(['a','b','c'], ",")</code> results in: “a,b,c”. <em>Type</em>: rvalue.</p>

<h4 id="join_keys_to_values"><code class="language-plaintext highlighter-rouge">join_keys_to_values</code></h4>

<p>Joins each key of a hash to that key’s corresponding value with a separator. Keys and values are cast to strings. The return value is an array in which each element is one joined key/value pair. For example, <code class="language-plaintext highlighter-rouge">join_keys_to_values({'a'=&gt;1,'b'=&gt;2}, " is ")</code> results in [“a is 1”,”b is 2”]. <em>Type</em>: rvalue.</p>

<h4 id="keys"><code class="language-plaintext highlighter-rouge">keys</code></h4>

<p>Returns the keys of a hash as an array. <em>Type</em>: rvalue.</p>

<h4 id="loadyaml"><code class="language-plaintext highlighter-rouge">loadyaml</code></h4>

<p>Loads a YAML file containing an array, string, or hash, and returns the data in the corresponding native data type. For example:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $myhash = loadyaml('/etc/puppet/data/myhash.yaml')
</code></pre></div></div>

<p><em>Type</em>: rvalue.</p>

<h4 id="load_module_metadata"><code class="language-plaintext highlighter-rouge">load_module_metadata</code></h4>

<p>Loads the metadata.json of a target module. Can be used to determine module version and authorship for dynamic support of modules.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $metadata = load_module_metadata('archive')
  notify { $metadata['author']: }
</code></pre></div></div>

<p>If you do not want to fail the catalog compilation when a module’s metadata file is absent:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $metadata = load_module_metadata('mysql', true)
  if empty($metadata) {
    notify { "This module does not have a metadata.json file.": }
  }
</code></pre></div></div>

<p><em>Type</em>: rvalue.</p>

<h4 id="lstrip"><code class="language-plaintext highlighter-rouge">lstrip</code></h4>

<p>Strips spaces to the left of a string. <em>Type</em>: rvalue.</p>

<h4 id="max"><code class="language-plaintext highlighter-rouge">max</code></h4>

<p>Returns the highest value of all arguments. Requires at least one argument. <em>Type</em>: rvalue.</p>

<h4 id="member"><code class="language-plaintext highlighter-rouge">member</code></h4>

<p>This function determines if a variable is a member of an array. The variable can be either a string, array, or fixnum. For example, <code class="language-plaintext highlighter-rouge">member(['a','b'], 'b')</code> and <code class="language-plaintext highlighter-rouge">member(['a','b','c'], ['b','c'])</code> return ‘true’, while <code class="language-plaintext highlighter-rouge">member(['a','b'], 'c')</code> and <code class="language-plaintext highlighter-rouge">member(['a','b','c'], ['c','d'])</code> return ‘false’. <em>Note</em>: This function does not support nested arrays. If the first argument contains nested arrays, it will not recurse through them.</p>

<p><em>Type</em>: rvalue.</p>

<h4 id="merge"><code class="language-plaintext highlighter-rouge">merge</code></h4>

<p>Merges two or more hashes together and returns the resulting hash.</p>

<p><em>Example</em>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $hash1 = {'one' =&gt; 1, 'two' =&gt; 2}
  $hash2 = {'two' =&gt; 'dos', 'three' =&gt; 'tres'}
  $merged_hash = merge($hash1, $hash2)
  # The resulting hash is equivalent to:
  # $merged_hash =  {'one' =&gt; 1, 'two' =&gt; 'dos', 'three' =&gt; 'tres'}
</code></pre></div></div>

<p>When there is a duplicate key, the key in the rightmost hash “wins.” <em>Type</em>: rvalue.</p>

<h4 id="min"><code class="language-plaintext highlighter-rouge">min</code></h4>

<p>Returns the lowest value of all arguments. Requires at least one argument. <em>Type</em>: rvalue.</p>

<h4 id="num2bool"><code class="language-plaintext highlighter-rouge">num2bool</code></h4>

<p>Converts a number or a string representation of a number into a true boolean. Zero or anything non-numeric becomes ‘false’. Numbers greater than 0 become ‘true’. <em>Type</em>: rvalue.</p>

<h4 id="parsejson"><code class="language-plaintext highlighter-rouge">parsejson</code></h4>

<p>Converts a string of JSON into the correct Puppet structure. <em>Type</em>: rvalue. The optional second argument is returned if the data was not correct.</p>

<h4 id="parseyaml"><code class="language-plaintext highlighter-rouge">parseyaml</code></h4>

<p>Converts a string of YAML into the correct Puppet structure. <em>Type</em>: rvalue. The optional second argument is returned if the data was not correct.</p>

<h4 id="pick"><code class="language-plaintext highlighter-rouge">pick</code></h4>

<p>From a list of values, returns the first value that is not undefined or an empty string. Takes any number of arguments, and raises an error if all values are undefined or empty.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $real_jenkins_version = pick($::jenkins_version, '1.449')
</code></pre></div></div>

<p><em>Type</em>: rvalue.</p>

<h4 id="pick_default"><code class="language-plaintext highlighter-rouge">pick_default</code></h4>

<p>Returns the first value in a list of values. Contrary to the <code class="language-plaintext highlighter-rouge">pick()</code> function, the <code class="language-plaintext highlighter-rouge">pick_default()</code> does not fail if all arguments are empty. This allows it to use an empty value as default. <em>Type</em>: rvalue.</p>

<h4 id="prefix"><code class="language-plaintext highlighter-rouge">prefix</code></h4>

<p>Applies a prefix to all elements in an array, or to the keys in a hash.
For example:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">prefix(['a','b','c'], 'p')</code> returns [‘pa’,’pb’,’pc’]</li>
  <li><code class="language-plaintext highlighter-rouge">prefix({'a'=&gt;'b','b'=&gt;'c','c'=&gt;'d'}, 'p')</code> returns {‘pa’=&gt;’b’,’pb’=&gt;’c’,’pc’=&gt;’d’}.</li>
</ul>

<p><em>Type</em>: rvalue.</p>

<h4 id="assert_private"><code class="language-plaintext highlighter-rouge">assert_private</code></h4>

<p>Sets the current class or definition as private. Calling the class or definition from outside the current module will fail.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">assert_private()</code> called in class <code class="language-plaintext highlighter-rouge">foo::bar</code> outputs the following message if class is called from outside module <code class="language-plaintext highlighter-rouge">foo</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Class foo::bar is private
</code></pre></div></div>

<p>To specify the error message you want to use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  assert_private("You're not supposed to do that!")
</code></pre></div></div>

<p><em>Type</em>: statement.</p>

<h4 id="pw_hash"><code class="language-plaintext highlighter-rouge">pw_hash</code></h4>

<p>Hashes a password using the crypt function. Provides a hash usable on most POSIX systems.</p>

<p>The first argument to this function is the password to hash. If it is undef or an empty string, this function returns undef.</p>

<p>The second argument to this function is which type of hash to use. It will be converted into the appropriate crypt(3) hash specifier. Valid hash types are:</p>

<table>
  <thead>
    <tr>
      <th>Hash type</th>
      <th>Specifier</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>MD5</td>
      <td>1</td>
    </tr>
    <tr>
      <td>SHA-256</td>
      <td>5</td>
    </tr>
    <tr>
      <td>SHA-512 (recommended)</td>
      <td>6</td>
    </tr>
  </tbody>
</table>

<p>The third argument to this function is the salt to use.</p>

<p><em>Type</em>: rvalue.</p>

<p><strong>Note:</strong> this uses the Puppet master’s implementation of crypt(3). If your environment contains several different operating systems, ensure that they are compatible before using this function.</p>

<h4 id="range"><code class="language-plaintext highlighter-rouge">range</code></h4>

<p>Extrapolates a range as an array when given in the form of ‘(start, stop)’. For example, <code class="language-plaintext highlighter-rouge">range("0", "9")</code> returns [0,1,2,3,4,5,6,7,8,9]. Zero-padded strings are converted to integers automatically, so <code class="language-plaintext highlighter-rouge">range("00", "09")</code> returns [0,1,2,3,4,5,6,7,8,9].</p>

<p>Non-integer strings are accepted; <code class="language-plaintext highlighter-rouge">range("a", "c")</code> returns [“a”,”b”,”c”], and <code class="language-plaintext highlighter-rouge">range("host01", "host10")</code> returns [“host01”, “host02”, …, “host09”, “host10”].</p>

<p>Passing a third argument will cause the generated range to step by that interval, e.g. <code class="language-plaintext highlighter-rouge">range("0", "9", "2")</code> returns [“0”,”2”,”4”,”6”,”8”].</p>

<p><em>Type</em>: rvalue.</p>

<h4 id="reject"><code class="language-plaintext highlighter-rouge">reject</code></h4>

<p>Searches through an array and rejects all elements that match the provided regular expression. For example, <code class="language-plaintext highlighter-rouge">reject(['aaa','bbb','ccc','aaaddd'], 'aaa')</code> returns [‘bbb’,’ccc’]. <em>Type</em>: rvalue.</p>

<h4 id="reverse"><code class="language-plaintext highlighter-rouge">reverse</code></h4>

<p>Reverses the order of a string or array. <em>Type</em>: rvalue.</p>

<h4 id="rstrip"><code class="language-plaintext highlighter-rouge">rstrip</code></h4>

<p>Strips spaces to the right of the string. <em>Type</em>: rvalue.</p>

<h4 id="seeded_rand"><code class="language-plaintext highlighter-rouge">seeded_rand</code></h4>

<p>Takes an integer max value and a string seed value and returns a repeatable random integer smaller than max. Like <code class="language-plaintext highlighter-rouge">fqdn_rand</code>, but does not add node specific data to the seed.  <em>Type</em>: rvalue.</p>

<h4 id="shuffle"><code class="language-plaintext highlighter-rouge">shuffle</code></h4>

<p>Randomizes the order of a string or array elements. <em>Type</em>: rvalue.</p>

<h4 id="size"><code class="language-plaintext highlighter-rouge">size</code></h4>

<p>Returns the number of elements in a string, an array or a hash. <em>Type</em>: rvalue.</p>

<h4 id="sort"><code class="language-plaintext highlighter-rouge">sort</code></h4>

<p>Sorts strings and arrays lexically. <em>Type</em>: rvalue.</p>

<h4 id="squeeze"><code class="language-plaintext highlighter-rouge">squeeze</code></h4>

<p>Returns a new string where runs of the same character that occur in this set are replaced by a single character. <em>Type</em>: rvalue.</p>

<h4 id="str2bool"><code class="language-plaintext highlighter-rouge">str2bool</code></h4>

<p>Converts certain strings to a boolean. This attempts to convert strings that contain the values ‘1’, ‘t’, ‘y’, or ‘yes’ to true. Strings that contain values ‘0’, ‘f’, ‘n’, or ‘no’, or that are an empty string or undefined are converted to false. Any other value causes an error. <em>Type</em>: rvalue.</p>

<h4 id="str2saltedsha512"><code class="language-plaintext highlighter-rouge">str2saltedsha512</code></h4>

<p>Converts a string to a salted-SHA512 password hash, used for OS X versions &gt;= 10.7. Given any string, this function returns a hex version of a salted-SHA512 password hash, which can be inserted into your Puppet
manifests as a valid password attribute. <em>Type</em>: rvalue.</p>

<h4 id="strftime"><code class="language-plaintext highlighter-rouge">strftime</code></h4>

<p>Returns formatted time. For example, <code class="language-plaintext highlighter-rouge">strftime("%s")</code> returns the time since Unix epoch, and <code class="language-plaintext highlighter-rouge">strftime("%Y-%m-%d")</code> returns the date. <em>Type</em>: rvalue.</p>

<p><em>Format:</em></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>* `%a`: The abbreviated weekday name ('Sun')
* `%A`: The full weekday name ('Sunday')
* `%b`: The abbreviated month name ('Jan')
* `%B`: The full month name ('January')
* `%c`: The preferred local date and time representation
* `%C`: Century (20 in 2009)
* `%d`: Day of the month (01..31)
* `%D`: Date (%m/%d/%y)
* `%e`: Day of the month, blank-padded ( 1..31)
* `%F`: Equivalent to %Y-%m-%d (the ISO 8601 date format)
* `%h`: Equivalent to %b
* `%H`: Hour of the day, 24-hour clock (00..23)
* `%I`: Hour of the day, 12-hour clock (01..12)
* `%j`: Day of the year (001..366)
* `%k`: Hour, 24-hour clock, blank-padded ( 0..23)
* `%l`: Hour, 12-hour clock, blank-padded ( 0..12)
* `%L`: Millisecond of the second (000..999)
* `%m`: Month of the year (01..12)
* `%M`: Minute of the hour (00..59)
* `%n`: Newline (\n)
* `%N`: Fractional seconds digits, default is 9 digits (nanosecond)
  * `%3N`: Millisecond (3 digits)
  * `%6N`: Microsecond (6 digits)
  * `%9N`: Nanosecond (9 digits)
* `%p`: Meridian indicator ('AM' or 'PM')
* `%P`: Meridian indicator ('am' or 'pm')
* `%r`: Time, 12-hour (same as %I:%M:%S %p)
* `%R`: Time, 24-hour (%H:%M)
* `%s`: Number of seconds since the Unix epoch, 1970-01-01 00:00:00 UTC.
* `%S`: Second of the minute (00..60)
* `%t`: Tab character (	)
* `%T`: Time, 24-hour (%H:%M:%S)
* `%u`: Day of the week as a decimal, Monday being 1. (1..7)
* `%U`: Week number of the current year, starting with the first Sunday as the first day of the first week (00..53)
* `%v`: VMS date (%e-%b-%Y)
* `%V`: Week number of year according to ISO 8601 (01..53)
* `%W`: Week number of the current year, starting with the first Monday as the first day of the first week (00..53)
* `%w`: Day of the week (Sunday is 0, 0..6)
* `%x`: Preferred representation for the date alone, no time
* `%X`: Preferred representation for the time alone, no date
* `%y`: Year without a century (00..99)
* `%Y`: Year with century
* `%z`: Time zone as hour offset from UTC (e.g. +0900)
* `%Z`: Time zone name
* `%%`: Literal '%' character
</code></pre></div></div>

<h4 id="strip"><code class="language-plaintext highlighter-rouge">strip</code></h4>

<p>Removes leading and trailing whitespace from a string or from every string inside an array. For example, <code class="language-plaintext highlighter-rouge">strip("    aaa   ")</code> results in “aaa”. <em>Type</em>: rvalue.</p>

<h4 id="suffix"><code class="language-plaintext highlighter-rouge">suffix</code></h4>

<p>Applies a suffix to all elements in an array, or to the keys in a hash.
For example:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">suffix(['a','b','c'], 'p')</code> returns [‘ap’,’bp’,’cp’]</li>
  <li><code class="language-plaintext highlighter-rouge">suffix({'a'=&gt;'b','b'=&gt;'c','c'=&gt;'d'}, 'p')</code> returns {‘ap’=&gt;’b’,’bp’=&gt;’c’,’cp’=&gt;’d’}.</li>
</ul>

<p><em>Type</em>: rvalue.</p>

<h4 id="swapcase"><code class="language-plaintext highlighter-rouge">swapcase</code></h4>

<p>Swaps the existing case of a string. For example, <code class="language-plaintext highlighter-rouge">swapcase("aBcD")</code> results in “AbCd”. <em>Type</em>: rvalue.</p>

<h4 id="time"><code class="language-plaintext highlighter-rouge">time</code></h4>

<p>Returns the current Unix epoch time as an integer. For example, <code class="language-plaintext highlighter-rouge">time()</code> returns something like ‘1311972653’. <em>Type</em>: rvalue.</p>

<h4 id="to_bytes"><code class="language-plaintext highlighter-rouge">to_bytes</code></h4>

<p>Converts the argument into bytes, for example “4 kB” becomes “4096”. Takes a single string value as an argument. <em>Type</em>: rvalue.</p>

<h4 id="try_get_value"><code class="language-plaintext highlighter-rouge">try_get_value</code></h4>

<p><em>Type</em>: rvalue.</p>

<p>DEPRECATED: replaced by <code class="language-plaintext highlighter-rouge">dig()</code>.</p>

<p>Retrieves a value within multiple layers of hashes and arrays via a string containing a path. The path is a string of hash keys or array indexes starting with zero, separated by the path separator character (default “/”). The function goes through the structure by each path component and tries to return the value at the end of the path.</p>

<p>In addition to the required path argument, the function accepts the default argument. It is returned if the path is not correct, if no value was found, or if any other error has occurred. The last argument can set the path separator character.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vg">$data</span> <span class="o">=</span> <span class="p">{</span>
  <span class="s1">'a'</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="s1">'b'</span> <span class="o">=&gt;</span> <span class="p">[</span>
      <span class="s1">'b1'</span><span class="p">,</span>
      <span class="s1">'b2'</span><span class="p">,</span>
      <span class="s1">'b3'</span><span class="p">,</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="vg">$value</span> <span class="o">=</span> <span class="n">try_get_value</span><span class="p">(</span><span class="vg">$data</span><span class="p">,</span> <span class="s1">'a/b/2'</span><span class="p">)</span>
<span class="c1"># $value = 'b3'</span>

<span class="c1"># with all possible options</span>
<span class="vg">$value</span> <span class="o">=</span> <span class="n">try_get_value</span><span class="p">(</span><span class="vg">$data</span><span class="p">,</span> <span class="s1">'a/b/2'</span><span class="p">,</span> <span class="s1">'not_found'</span><span class="p">,</span> <span class="s1">'/'</span><span class="p">)</span>
<span class="c1"># $value = 'b3'</span>

<span class="c1"># using the default value</span>
<span class="vg">$value</span> <span class="o">=</span> <span class="n">try_get_value</span><span class="p">(</span><span class="vg">$data</span><span class="p">,</span> <span class="s1">'a/b/c/d'</span><span class="p">,</span> <span class="s1">'not_found'</span><span class="p">)</span>
<span class="c1"># $value = 'not_found'</span>

<span class="c1"># using custom separator</span>
<span class="vg">$value</span> <span class="o">=</span> <span class="n">try_get_value</span><span class="p">(</span><span class="vg">$data</span><span class="p">,</span> <span class="s1">'a|b'</span><span class="p">,</span> <span class="p">[],</span> <span class="s1">'|'</span><span class="p">)</span>
<span class="c1"># $value = ['b1','b2','b3']</span>
</code></pre></div></div>

<ol>
  <li><strong>$data</strong> The data structure we are working with.</li>
  <li><strong>‘a/b/2’</strong> The path string.</li>
  <li><strong>‘not_found’</strong> The default value. It will be returned if nothing is found.
(optional, defaults to <em>undef</em>)</li>
  <li><strong>’/’</strong> The path separator character.
(optional, defaults to <em>’/’</em>)</li>
</ol>

<h4 id="type3x"><code class="language-plaintext highlighter-rouge">type3x</code></h4>

<p>Returns a string description of the type when passed a value. Type can be a string, array, hash, float, integer, or boolean. This function will be removed when Puppet 3 support is dropped and the new type system can be used. <em>Type</em>: rvalue.</p>

<h4 id="type_of"><code class="language-plaintext highlighter-rouge">type_of</code></h4>

<p>Returns the literal type when passed a value. Requires the new parser. Useful for comparison of types with <code class="language-plaintext highlighter-rouge">&lt;=</code> such as in <code class="language-plaintext highlighter-rouge">if type_of($some_value) &lt;= Array[String] { ... }</code> (which is equivalent to <code class="language-plaintext highlighter-rouge">if $some_value =~ Array[String] { ... }</code>) <em>Type</em>: rvalue.</p>

<h4 id="union"><code class="language-plaintext highlighter-rouge">union</code></h4>

<p>Returns a union of two or more arrays, without duplicates. For example, <code class="language-plaintext highlighter-rouge">union(["a","b","c"],["b","c","d"])</code> returns [“a”,”b”,”c”,”d”]. <em>Type</em>: rvalue.</p>

<h4 id="unique"><code class="language-plaintext highlighter-rouge">unique</code></h4>

<p>Removes duplicates from strings and arrays. For example, <code class="language-plaintext highlighter-rouge">unique("aabbcc")</code> returns ‘abc’, and <code class="language-plaintext highlighter-rouge">unique(["a","a","b","b","c","c"])</code> returns [“a”,”b”,”c”]. <em>Type</em>: rvalue.</p>

<h4 id="unix2dos"><code class="language-plaintext highlighter-rouge">unix2dos</code></h4>

<p>Returns the DOS version of the given string. Very useful when using a File resource with a cross-platform template. <em>Type</em>: rvalue.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>file{$config_file:
  ensure  =&gt; file,
  content =&gt; unix2dos(template('my_module/settings.conf.erb')),
}
</code></pre></div></div>

<p>See also <a href="#dos2unix">dos2unix</a>.</p>

<h4 id="upcase"><code class="language-plaintext highlighter-rouge">upcase</code></h4>

<p>Converts an object, array or hash of objects that respond to upcase to uppercase. For example, <code class="language-plaintext highlighter-rouge">upcase('abcd')</code> returns ‘ABCD’. <em>Type</em>: rvalue.</p>

<h4 id="uriescape"><code class="language-plaintext highlighter-rouge">uriescape</code></h4>

<p>URLEncodes a string or array of strings. Requires either a single string or an array as an input. <em>Type</em>: rvalue.</p>

<h4 id="validate_absolute_path"><code class="language-plaintext highlighter-rouge">validate_absolute_path</code></h4>

<p>Validates that a given string represents an absolute path in the filesystem. Works for Windows and Unix style paths.</p>

<p>The following values pass:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$my_path = 'C:/Program Files (x86)/Puppet Labs/Puppet'
validate_absolute_path($my_path)
$my_path2 = '/var/lib/puppet'
validate_absolute_path($my_path2)
$my_path3 = ['C:/Program Files (x86)/Puppet Labs/Puppet','C:/Program Files/Puppet Labs/Puppet']
validate_absolute_path($my_path3)
$my_path4 = ['/var/lib/puppet','/usr/share/puppet']
validate_absolute_path($my_path4)
</code></pre></div></div>

<p>The following values fail, causing compilation to abort:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>validate_absolute_path(true)
validate_absolute_path('../var/lib/puppet')
validate_absolute_path('var/lib/puppet')
validate_absolute_path([ 'var/lib/puppet', '/var/foo' ])
validate_absolute_path([ '/var/lib/puppet', 'var/foo' ])
$undefined = undef
validate_absolute_path($undefined)
</code></pre></div></div>

<p><em>Type</em>: statement.</p>

<h4 id="validate_array"><code class="language-plaintext highlighter-rouge">validate_array</code></h4>

<p>Validates that all passed values are array data structures. Aborts catalog compilation if any value fails this check.</p>

<p>The following values pass:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$my_array = [ 'one', 'two' ]
validate_array($my_array)
</code></pre></div></div>

<p>The following values fail, causing compilation to abort:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>validate_array(true)
validate_array('some_string')
$undefined = undef
validate_array($undefined)
</code></pre></div></div>

<p><em>Type</em>: statement.</p>

<h4 id="validate_augeas"><code class="language-plaintext highlighter-rouge">validate_augeas</code></h4>

<p>Performs validation of a string using an Augeas lens. The first argument of this function should be the string to test, and the second argument should be the name of the Augeas lens to use. If Augeas fails to parse the string with the lens, the compilation aborts with a parse error.</p>

<p>A third optional argument lists paths which should <strong>not</strong> be found in the file. The <code class="language-plaintext highlighter-rouge">$file</code> variable points to the location of the temporary file being tested in the Augeas tree.</p>

<p>For example, to make sure your $passwdcontent never contains user <code class="language-plaintext highlighter-rouge">foo</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>validate_augeas($passwdcontent, 'Passwd.lns', ['$file/foo'])
</code></pre></div></div>

<p>To ensure that no users use the ‘/bin/barsh’ shell:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>validate_augeas($passwdcontent, 'Passwd.lns', ['$file/*[shell="/bin/barsh"]']
</code></pre></div></div>

<p>You can pass a fourth argument as the error message raised and shown to the user:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>validate_augeas($sudoerscontent, 'Sudoers.lns', [], 'Failed to validate sudoers content with Augeas')
</code></pre></div></div>

<p><em>Type</em>: statement.</p>

<h4 id="validate_bool"><code class="language-plaintext highlighter-rouge">validate_bool</code></h4>

<p>Validates that all passed values are either true or false. Aborts catalog compilation if any value fails this check.</p>

<p>The following values will pass:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$iamtrue = true
validate_bool(true)
validate_bool(true, true, false, $iamtrue)
</code></pre></div></div>

<p>The following values will fail, causing compilation to abort:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$some_array = [ true ]
validate_bool("false")
validate_bool("true")
validate_bool($some_array)
</code></pre></div></div>

<p><em>Type</em>: statement.</p>

<h4 id="validate_cmd"><code class="language-plaintext highlighter-rouge">validate_cmd</code></h4>

<p>Performs validation of a string with an external command. The first argument of this function should be a string to test, and the second argument should be a path to a test command taking a % as a placeholder for the file path (will default to the end of the command if no % placeholder given). If the command is launched against a tempfile containing the passed string, or returns a non-null value, compilation will abort with a parse error.</p>

<p>If a third argument is specified, this will be the error message raised and seen by the user.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Defaults to end of path
validate_cmd($sudoerscontent, '/usr/sbin/visudo -c -f', 'Visudo failed to validate sudoers content')
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># % as file location
validate_cmd($haproxycontent, '/usr/sbin/haproxy -f % -c', 'Haproxy failed to validate config content')
</code></pre></div></div>

<p><em>Type</em>: statement.</p>

<h4 id="validate_hash"><code class="language-plaintext highlighter-rouge">validate_hash</code></h4>

<p>Validates that all passed values are hash data structures. Aborts catalog compilation if any value fails this check.</p>

<p>The following values will pass:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $my_hash = { 'one' =&gt; 'two' }
  validate_hash($my_hash)
</code></pre></div></div>

<p>The following values will fail, causing compilation to abort:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_hash(true)
  validate_hash('some_string')
  $undefined = undef
  validate_hash($undefined)
</code></pre></div></div>

<p><em>Type</em>: statement.</p>

<h4 id="validate_integer"><code class="language-plaintext highlighter-rouge">validate_integer</code></h4>

<p>Validates that the first argument is an integer (or an array of integers). Aborts catalog compilation if any of the checks fail.</p>

<p>The second argument is optional and passes a maximum. (All elements of) the first argument has to be less or equal to this max.</p>

<p>The third argument is optional and passes a minimum. (All elements of) the first argument has to be greater or equal to this min.
  If, and only if, a minimum is given, the second argument may be an empty string or undef, which will be handled to just check
  if (all elements of) the first argument are greater or equal to the given minimum.</p>

<p>It will fail if the first argument is not an integer or array of integers, and if arg 2 and arg 3 are not convertable to an integer.</p>

<p>The following values will pass:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_integer(1)
  validate_integer(1, 2)
  validate_integer(1, 1)
  validate_integer(1, 2, 0)
  validate_integer(2, 2, 2)
  validate_integer(2, '', 0)
  validate_integer(2, undef, 0)
  $foo = undef
  validate_integer(2, $foo, 0)
  validate_integer([1,2,3,4,5], 6)
  validate_integer([1,2,3,4,5], 6, 0)
</code></pre></div></div>

<ul>
  <li>Plus all of the above, but any combination of values passed as strings (‘1’ or “1”).</li>
  <li>Plus all of the above, but with (correct) combinations of negative integer values.</li>
</ul>

<p>The following values will fail, causing compilation to abort:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_integer(true)
  validate_integer(false)
  validate_integer(7.0)
  validate_integer({ 1 =&gt; 2 })
  $foo = undef
  validate_integer($foo)
  validate_integer($foobaridontexist)

  validate_integer(1, 0)
  validate_integer(1, true)
  validate_integer(1, '')
  validate_integer(1, undef)
  validate_integer(1, , 0)
  validate_integer(1, 2, 3)
  validate_integer(1, 3, 2)
  validate_integer(1, 3, true)
</code></pre></div></div>

<ul>
  <li>Plus all of the above, but any combination of values passed as strings (‘false’ or “false”).</li>
  <li>Plus all of the above, but with incorrect combinations of negative integer values.</li>
  <li>Plus all of the above, but with non-integer items in arrays or maximum / minimum argument.</li>
</ul>

<p><em>Type</em>: statement.</p>

<h4 id="validate_ip_address"><code class="language-plaintext highlighter-rouge">validate_ip_address</code></h4>

<p>Validates that the argument is an IP address, regardless of it is an IPv4 or an IPv6
address. It also validates IP address with netmask. The argument must be given as a string.</p>

<p>The following values will pass:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_ip_address('0.0.0.0')
  validate_ip_address('8.8.8.8')
  validate_ip_address('127.0.0.1')
  validate_ip_address('194.232.104.150')
  validate_ip_address('3ffe:0505:0002::')
  validate_ip_address('::1/64')
  validate_ip_address('fe80::a00:27ff:fe94:44d6/64')
  validate_ip_address('8.8.8.8/32')
</code></pre></div></div>

<p>The following values will fail, causing compilation to abort:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_ip_address(1)
  validate_ip_address(true)
  validate_ip_address(0.0.0.256)
  validate_ip_address('::1', {})
  validate_ip_address('0.0.0.0.0')
  validate_ip_address('3.3.3')
  validate_ip_address('23.43.9.22/64')
  validate_ip_address('260.2.32.43')
</code></pre></div></div>

<h4 id="validate_numeric"><code class="language-plaintext highlighter-rouge">validate_numeric</code></h4>

<p>Validates that the first argument is a numeric value (or an array of numeric values). Aborts catalog compilation if any of the checks fail.</p>

<p>The second argument is optional and passes a maximum. (All elements of) the first argument has to be less or equal to this max.</p>

<p>The third argument is optional and passes a minimum. (All elements of) the first argument has to be greater or equal to this min.
  If, and only if, a minimum is given, the second argument may be an empty string or undef, which will be handled to just check
  if (all elements of) the first argument are greater or equal to the given minimum.</p>

<p>It will fail if the first argument is not a numeric (Integer or Float) or array of numerics, and if arg 2 and arg 3 are not convertable to a numeric.</p>

<p>For passing and failing usage, see <code class="language-plaintext highlighter-rouge">validate_integer()</code>. It is all the same for validate_numeric, yet now floating point values are allowed, too.</p>

<p><em>Type</em>: statement.</p>

<h4 id="validate_re"><code class="language-plaintext highlighter-rouge">validate_re</code></h4>

<p>Performs simple validation of a string against one or more regular expressions. The first argument of this function should be the string to
test, and the second argument should be a stringified regular expression (without the // delimiters) or an array of regular expressions. If none of the regular expressions match the string passed in, compilation aborts with a parse error.</p>

<p>You can pass a third argument as the error message raised and shown to the user.</p>

<p>The following strings validate against the regular expressions:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_re('one', '^one$')
  validate_re('one', [ '^one', '^two' ])
</code></pre></div></div>

<p>The following string fails to validate, causing compilation to abort:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_re('one', [ '^two', '^three' ])
</code></pre></div></div>

<p>To set the error message:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_re($::puppetversion, '^2.7', 'The $puppetversion fact value does not match 2.7')
</code></pre></div></div>

<p>Note: Compilation terminates if the first argument is not a string. Always use quotes to force stringification:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_re("${::operatingsystemmajrelease}", '^[57]$')
</code></pre></div></div>

<p><em>Type</em>: statement.</p>

<h4 id="validate_slength"><code class="language-plaintext highlighter-rouge">validate_slength</code></h4>

<p>Validates that the first argument is a string (or an array of strings), and is less than or equal to the length of the second argument. It fails if the first argument is not a string or array of strings, or if the second argument is not convertable to a number.  Optionally, a minimum string length can be given as the third argument.</p>

<p>The following values pass:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_slength("discombobulate",17)
  validate_slength(["discombobulate","moo"],17)
  validate_slength(["discombobulate","moo"],17,3)
</code></pre></div></div>

<p>The following values fail:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_slength("discombobulate",1)
  validate_slength(["discombobulate","thermometer"],5)
  validate_slength(["discombobulate","moo"],17,10)
</code></pre></div></div>

<p><em>Type</em>: statement.</p>

<h4 id="validate_string"><code class="language-plaintext highlighter-rouge">validate_string</code></h4>

<p>Validates that all passed values are string data structures. Aborts catalog compilation if any value fails this check.</p>

<p>The following values pass:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  $my_string = "one two"
  validate_string($my_string, 'three')
</code></pre></div></div>

<p>The following values fail, causing compilation to abort:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_string(true)
  validate_string([ 'some', 'array' ])
</code></pre></div></div>

<p><em>Note:</em> validate_string(undef) will not fail in this version of the functions API (incl. current and future parser).</p>

<p>Instead, use:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  if $var == undef {
    fail('...')
  }
</code></pre></div></div>

<p><em>Type</em>: statement.</p>

<h4 id="validate_x509_rsa_key_pair"><code class="language-plaintext highlighter-rouge">validate_x509_rsa_key_pair</code></h4>

<p>Validates a PEM-formatted X.509 certificate and private key using OpenSSL.
Verifies that the certficate’s signature was created from the supplied key.</p>

<p>Fails catalog compilation if any value fails this check.</p>

<p>Takes two arguments, the first argument must be a X.509 certificate and the
second must be an RSA private key:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  validate_x509_rsa_key_pair($cert, $key)
</code></pre></div></div>

<p><em>Type</em>: statement.</p>

<h4 id="values"><code class="language-plaintext highlighter-rouge">values</code></h4>

<p>Returns the values of a given hash. For example, given <code class="language-plaintext highlighter-rouge">$hash = {'a'=1, 'b'=2, 'c'=3} values($hash)</code> returns [1,2,3].</p>

<p><em>Type</em>: rvalue.</p>

<h4 id="values_at"><code class="language-plaintext highlighter-rouge">values_at</code></h4>

<p>Finds values inside an array based on location. The first argument is the array you want to analyze, and the second argument can be a combination of:</p>

<ul>
  <li>A single numeric index</li>
  <li>A range in the form of ‘start-stop’ (eg. 4-9)</li>
  <li>An array combining the above</li>
</ul>

<p>For example, <code class="language-plaintext highlighter-rouge">values_at(['a','b','c'], 2)</code> returns [‘c’]; <code class="language-plaintext highlighter-rouge">values_at(['a','b','c'], ["0-1"])</code> returns [‘a’,’b’]; and <code class="language-plaintext highlighter-rouge">values_at(['a','b','c','d','e'], [0, "2-3"])</code> returns [‘a’,’c’,’d’].</p>

<p><em>Type</em>: rvalue.</p>

<h4 id="zip"><code class="language-plaintext highlighter-rouge">zip</code></h4>

<p>Takes one element from first array given and merges corresponding elements from second array given. This generates a sequence of n-element arrays, where <em>n</em> is one more than the count of arguments. For example, <code class="language-plaintext highlighter-rouge">zip(['1','2','3'],['4','5','6'])</code> results in [“1”, “4”], [“2”, “5”], [“3”, “6”]. <em>Type</em>: rvalue.</p>

<h2 id="limitations">Limitations</h2>

<p>As of Puppet Enterprise 3.7, the stdlib module is no longer included in PE. PE users should install the most recent release of stdlib for compatibility with Puppet modules.</p>

<p>###Version Compatibility</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Versions</th>
      <th style="text-align: center">Puppet 2.6</th>
      <th style="text-align: center">Puppet 2.7</th>
      <th style="text-align: center">Puppet 3.x</th>
      <th style="text-align: center">Puppet 4.x</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><strong>stdlib 2.x</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center">no</td>
      <td style="text-align: center">no</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>stdlib 3.x</strong></td>
      <td style="text-align: center">no</td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center">no</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>stdlib 4.x</strong></td>
      <td style="text-align: center">no</td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center">no</td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>stdlib 4.6+</strong></td>
      <td style="text-align: center">no</td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
    </tr>
    <tr>
      <td style="text-align: left"><strong>stdlib 5.x</strong></td>
      <td style="text-align: center">no</td>
      <td style="text-align: center">no</td>
      <td style="text-align: center"><strong>yes</strong></td>
      <td style="text-align: center"><strong>yes</strong></td>
    </tr>
  </tbody>
</table>

<p><strong>stdlib 5.x</strong>: When released, stdlib 5.x will drop support for Puppet 2.7.x. Please see <a href="https://github.com/puppetlabs/puppetlabs-stdlib/pull/176#issuecomment-30251414">this discussion</a>.</p>

<h2 id="development">Development</h2>

<p>Puppet Labs modules on the Puppet Forge are open projects, and community contributions are essential for keeping them great. We can’t access the huge number of platforms and myriad hardware, software, and deployment configurations that Puppet is intended to serve. We want to keep it as easy as possible to contribute changes so that our modules work in your environment. There are a few guidelines that we need contributors to follow so that we can have a chance of keeping on top of things. For more information, see our <a href="https://docs.puppetlabs.com/forge/contributing.html">module contribution guide</a>.</p>

<p>To report or research a bug with any part of this module, please go to
<a href="http://tickets.puppetlabs.com/browse/PUP">http://tickets.puppetlabs.com/browse/PUP</a>.</p>

<h2 id="contributors">Contributors</h2>

<p>The list of contributors can be found at: <a href="https://github.com/puppetlabs/puppetlabs-stdlib/graphs/contributors">https://github.com/puppetlabs/puppetlabs-stdlib/graphs/contributors</a>.</p>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/RussianPenguin/russianpenguin.github.io">russianpenguin.github.io</a> is maintained by <a href="https://github.com/RussianPenguin">RussianPenguin</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(69889387, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/69889387" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  </body>
</html>
