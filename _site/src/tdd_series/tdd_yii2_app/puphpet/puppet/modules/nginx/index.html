<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="yandex-verification" content="551ffc5ae1433df6" />
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>NGINX Module | Чтобы не забыть</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="NGINX Module" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<meta property="og:description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<link rel="canonical" href="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/nginx/" />
<meta property="og:url" content="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/nginx/" />
<meta property="og:site_name" content="Чтобы не забыть" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="NGINX Module" />
<script type="application/ld+json">
{"headline":"NGINX Module","description":"Записная книжка рассеянного [в пространстве и времени] программиста","@type":"WebPage","url":"http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/nginx/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=eacdde9998fcd3dd17b1956e7070eca69fdaf217">
  </head>
  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name">NGINX Module</h1>
      <h2 class="project-tagline">Записная книжка рассеянного [в пространстве и времени] программиста</h2>
      
        <a href="https://github.com/RussianPenguin/russianpenguin.github.io" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="nginx-module">NGINX Module</h1>

<p><a href="https://travis-ci.org/jfryman/puppet-nginx"><img src="https://travis-ci.org/jfryman/puppet-nginx.png" alt="Build Status" /></a></p>

<p>James Fryman <a href="mailto:james@frymanet.com">james@frymanet.com</a></p>

<p>This module manages NGINX configuration.</p>

<h2 id="quick-start">Quick Start</h2>

<h3 id="requirements">Requirements</h3>

<ul>
  <li>Puppet-2.7.0 or later</li>
  <li>Ruby-1.9.3 or later (Support for Ruby-1.8.7 is not guaranteed. YMMV).</li>
</ul>

<h3 id="install-and-bootstrap-an-nginx-instance">Install and bootstrap an NGINX instance</h3>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'nginx'</span><span class="p">:</span> <span class="p">}</span>
</code></pre></div></div>

<h3 id="setup-a-new-virtual-host">Setup a new virtual host</h3>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nginx::resource::vhost</span> <span class="p">{</span> <span class="s1">'www.puppetlabs.com'</span><span class="p">:</span>
  <span class="py">www_root</span> <span class="p">=&gt;</span> <span class="s1">'/var/www/www.puppetlabs.com'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="add-a-proxy-server">Add a Proxy Server</h3>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nginx::resource::upstream</span> <span class="p">{</span> <span class="s1">'puppet_rack_app'</span><span class="p">:</span>
  <span class="py">members</span> <span class="p">=&gt;</span> <span class="p">[</span>
    <span class="s1">'localhost:3000'</span><span class="p">,</span>
    <span class="s1">'localhost:3001'</span><span class="p">,</span>
    <span class="s1">'localhost:3002'</span><span class="p">,</span>
  <span class="p">],</span>
<span class="p">}</span>

<span class="n">nginx::resource::vhost</span> <span class="p">{</span> <span class="s1">'rack.puppetlabs.com'</span><span class="p">:</span>
  <span class="py">proxy</span> <span class="p">=&gt;</span> <span class="s1">'http://puppet_rack_app'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="add-a-smtp-proxy">Add a smtp proxy</h3>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'nginx'</span><span class="p">:</span>
  <span class="py">mail</span> <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">nginx::resource::mailhost</span> <span class="p">{</span> <span class="s1">'domain1.example'</span><span class="p">:</span>
  <span class="py">auth_http</span>   <span class="p">=&gt;</span> <span class="s1">'server2.example/cgi-bin/auth'</span><span class="p">,</span>
  <span class="py">protocol</span>    <span class="p">=&gt;</span> <span class="s1">'smtp'</span><span class="p">,</span>
  <span class="py">listen_port</span> <span class="p">=&gt;</span> <span class="m">587</span><span class="p">,</span>
  <span class="py">ssl_port</span>    <span class="p">=&gt;</span> <span class="m">465</span><span class="p">,</span>
  <span class="py">starttls</span>    <span class="p">=&gt;</span> <span class="s1">'only'</span><span class="p">,</span>
  <span class="py">xclient</span>     <span class="p">=&gt;</span> <span class="s1">'off'</span><span class="p">,</span>
  <span class="py">ssl</span>         <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="py">ssl_cert</span>    <span class="p">=&gt;</span> <span class="s1">'/tmp/server.crt'</span><span class="p">,</span>
  <span class="py">ssl_key</span>     <span class="p">=&gt;</span> <span class="s1">'/tmp/server.pem'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="ssl-configuration">SSL configuration</h2>

<p>By default, creating a vhost resource will only create a HTTP vhost. To also create a HTTPS (SSL-enabled) vhost, set <code class="language-plaintext highlighter-rouge">ssl =&gt; true</code> on the vhost. You will have a HTTP server listening on <code class="language-plaintext highlighter-rouge">listen_port</code> (port <code class="language-plaintext highlighter-rouge">80</code> by default) and a HTTPS server listening on <code class="language-plaintext highlighter-rouge">ssl_port</code> (port <code class="language-plaintext highlighter-rouge">443</code> by default). Both vhosts will have the same <code class="language-plaintext highlighter-rouge">server_name</code> and a similar configuration.</p>

<p>To create only a HTTPS vhost, set <code class="language-plaintext highlighter-rouge">ssl =&gt; true</code> and also set <code class="language-plaintext highlighter-rouge">listen_port</code> to the same value as <code class="language-plaintext highlighter-rouge">ssl_port</code>. Setting these to the same value disables the HTTP vhost. The resulting vhost will be listening on <code class="language-plaintext highlighter-rouge">ssl_port</code>.</p>

<h3 id="locations">Locations</h3>

<p>Locations require specific settings depending on whether they should be included in the HTTP, HTTPS or both vhosts.</p>

<h4 id="http-only-vhost-default">HTTP only vhost (default)</h4>
<p>If you only have a HTTP vhost (i.e. <code class="language-plaintext highlighter-rouge">ssl =&gt; false</code> on the vhost) make sure you don’t set <code class="language-plaintext highlighter-rouge">ssl =&gt; true</code> on any location you associate with the vhost.</p>

<h4 id="http-and-https-vhost">HTTP and HTTPS vhost</h4>
<p>If you set <code class="language-plaintext highlighter-rouge">ssl =&gt; true</code> and also set <code class="language-plaintext highlighter-rouge">listen_port</code> and <code class="language-plaintext highlighter-rouge">ssl_port</code> to different values on the vhost you will need to be specific with the location settings since you will have a HTTP vhost listening on <code class="language-plaintext highlighter-rouge">listen_port</code> and a HTTPS vhost listening on <code class="language-plaintext highlighter-rouge">ssl_port</code>:</p>

<ul>
  <li>To add a location to only the HTTP server, set <code class="language-plaintext highlighter-rouge">ssl =&gt; false</code> on the location (this is the default).</li>
  <li>To add a location to both the HTTP and HTTPS server, set <code class="language-plaintext highlighter-rouge">ssl =&gt; true</code> on the location, and ensure <code class="language-plaintext highlighter-rouge">ssl_only =&gt; false</code> (which is the default value for <code class="language-plaintext highlighter-rouge">ssl_only</code>).</li>
  <li>To add a location only to the HTTPS server, set both <code class="language-plaintext highlighter-rouge">ssl =&gt; true</code> and <code class="language-plaintext highlighter-rouge">ssl_only =&gt; true</code> on the location.</li>
</ul>

<h4 id="https-only-vhost">HTTPS only vhost</h4>
<p>If you have set <code class="language-plaintext highlighter-rouge">ssl =&gt; true</code> and also set <code class="language-plaintext highlighter-rouge">listen_port</code> and <code class="language-plaintext highlighter-rouge">ssl_port</code> to the same value on the vhost, you will have a single HTTPS vhost listening on <code class="language-plaintext highlighter-rouge">ssl_port</code>. To add a location to this vhost set <code class="language-plaintext highlighter-rouge">ssl =&gt; true</code> and <code class="language-plaintext highlighter-rouge">ssl_only =&gt; true</code> on the location.</p>

<h2 id="hiera-support">Hiera Support</h2>

<p>Defining nginx resources in Hiera.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">nginx::nginx_upstreams:</span>
  <span class="s">'puppet_rack_app'</span><span class="pi">:</span>
    <span class="na">ensure</span><span class="pi">:</span> <span class="s">present</span>
    <span class="na">members</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">localhost:3000</span>
      <span class="pi">-</span> <span class="s">localhost:3001</span>
      <span class="pi">-</span> <span class="s">localhost:3002</span>
<span class="s">nginx::nginx_vhosts:</span>
  <span class="s">'www.puppetlabs.com'</span><span class="pi">:</span>
    <span class="na">www_root</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/var/www/www.puppetlabs.com'</span>
<span class="err">  </span><span class="s1">'</span><span class="s">rack.puppetlabs.com'</span><span class="pi">:</span>
    <span class="na">proxy</span><span class="pi">:</span> <span class="s1">'</span><span class="s">http://puppet_rack_app'</span>
<span class="s">nginx::nginx_locations:</span>
  <span class="s">'static'</span><span class="pi">:</span>
    <span class="na">location</span><span class="pi">:</span> <span class="s1">'</span><span class="s">~</span><span class="nv"> </span><span class="s">"^/static/[0-9a-fA-F]{8}\/(.*)$"'</span>
    <span class="na">vhost</span><span class="pi">:</span> <span class="s">www.puppetlabs.com</span>
  <span class="s1">'</span><span class="s">userContent'</span><span class="pi">:</span>
    <span class="na">location</span><span class="pi">:</span> <span class="s">/userContent</span>
    <span class="na">vhost</span><span class="pi">:</span> <span class="s">www.puppetlabs.com</span>
    <span class="na">www_root</span><span class="pi">:</span> <span class="s">/var/www/html</span>
<span class="s">nginx::nginx_mailhosts:</span>
  <span class="s">'smtp'</span><span class="pi">:</span>
    <span class="na">auth_http</span><span class="pi">:</span> <span class="s">server2.example/cgi-bin/auth</span>
    <span class="na">protocol</span><span class="pi">:</span> <span class="s">smtp</span>
    <span class="na">listen_port</span><span class="pi">:</span> <span class="m">587</span>
    <span class="na">ssl_port</span><span class="pi">:</span> <span class="m">465</span>
    <span class="na">starttls</span><span class="pi">:</span> <span class="s">only</span>
</code></pre></div></div>

<h2 id="nginx-with-precompiled-passenger">Nginx with precompiled Passenger</h2>

<p>Currently this works only for Debian family.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="p">{</span> <span class="s1">'nginx'</span><span class="p">:</span>
  <span class="py">package_source</span>  <span class="p">=&gt;</span> <span class="s1">'passenger'</span><span class="p">,</span>
  <span class="py">http_cfg_append</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="s1">'passenger_root'</span> <span class="p">=&gt;</span> <span class="s1">'/usr/lib/ruby/vendor_ruby/phusion_passenger/locations.ini'</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Package source <code class="language-plaintext highlighter-rouge">passenger</code> will add <a href="https://oss-binaries.phusionpassenger.com/apt/passenger">Phusion Passenger repository</a> to APT sources.
For each virtual host you should specify which ruby should be used.</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nginx::resource::vhost</span> <span class="p">{</span> <span class="s1">'www.puppetlabs.com'</span><span class="p">:</span>
  <span class="py">www_root</span>         <span class="p">=&gt;</span> <span class="s1">'/var/www/www.puppetlabs.com'</span><span class="p">,</span>
  <span class="py">vhost_cfg_append</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="s1">'passenger_enabled'</span> <span class="p">=&gt;</span> <span class="s1">'on'</span><span class="p">,</span>
    <span class="s1">'passenger_ruby'</span>    <span class="p">=&gt;</span> <span class="s1">'/usr/bin/ruby'</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="puppet-master-served-by-nginx-and-passenger">Puppet master served by Nginx and Passenger</h3>

<p>Virtual host config for serving puppet master:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nginx::resource::vhost</span> <span class="p">{</span> <span class="s1">'puppet'</span><span class="p">:</span>
  <span class="py">ensure</span>               <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
  <span class="py">server_name</span>          <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'puppet'</span><span class="p">],</span>
  <span class="py">listen_port</span>          <span class="p">=&gt;</span> <span class="m">8140</span><span class="p">,</span>
  <span class="py">ssl</span>                  <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
  <span class="py">ssl_cert</span>             <span class="p">=&gt;</span> <span class="s1">'/var/lib/puppet/ssl/certs/example.com.pem'</span><span class="p">,</span>
  <span class="py">ssl_key</span>              <span class="p">=&gt;</span> <span class="s1">'/var/lib/puppet/ssl/private_keys/example.com.pem'</span><span class="p">,</span>
  <span class="py">ssl_port</span>             <span class="p">=&gt;</span> <span class="m">8140</span><span class="p">,</span>
  <span class="py">vhost_cfg_append</span>     <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="s1">'passenger_enabled'</span>      <span class="p">=&gt;</span> <span class="s1">'on'</span><span class="p">,</span>
    <span class="s1">'passenger_ruby'</span>         <span class="p">=&gt;</span> <span class="s1">'/usr/bin/ruby'</span><span class="p">,</span>
    <span class="s1">'ssl_crl'</span>                <span class="p">=&gt;</span> <span class="s1">'/var/lib/puppet/ssl/ca/ca_crl.pem'</span><span class="p">,</span>
    <span class="s1">'ssl_client_certificate'</span> <span class="p">=&gt;</span> <span class="s1">'/var/lib/puppet/ssl/certs/ca.pem'</span><span class="p">,</span>
    <span class="s1">'ssl_verify_client'</span>      <span class="p">=&gt;</span> <span class="s1">'optional'</span><span class="p">,</span>
    <span class="s1">'ssl_verify_depth'</span>       <span class="p">=&gt;</span> <span class="m">1</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="py">www_root</span>             <span class="p">=&gt;</span> <span class="s1">'/etc/puppet/rack/public'</span><span class="p">,</span>
  <span class="py">use_default_location</span> <span class="p">=&gt;</span> <span class="kc">false</span><span class="p">,</span>
  <span class="py">access_log</span>           <span class="p">=&gt;</span> <span class="s1">'/var/log/nginx/puppet_access.log'</span><span class="p">,</span>
  <span class="py">error_log</span>            <span class="p">=&gt;</span> <span class="s1">'/var/log/nginx/puppet_error.log'</span><span class="p">,</span>
  <span class="py">passenger_cgi_param</span>  <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="s1">'HTTP_X_CLIENT_DN'</span>     <span class="p">=&gt;</span> <span class="s1">'$ssl_client_s_dn'</span><span class="p">,</span>
    <span class="s1">'HTTP_X_CLIENT_VERIFY'</span> <span class="p">=&gt;</span> <span class="s1">'$ssl_client_verify'</span><span class="p">,</span>
  <span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="example-puppet-class-calling-nginxvhost-with-https-fastcgi-and-redirection-of-http">Example puppet class calling nginx::vhost with HTTPS FastCGI and redirection of HTTP</h3>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="nv">$full_web_path</span> <span class="o">=</span> <span class="s1">'/var/www'</span>

<span class="k">define</span> <span class="nf">web::nginx_ssl_with_redirect</span> <span class="p">(</span>
  <span class="nv">$backend_port</span>         <span class="o">=</span> <span class="m">9000</span><span class="p">,</span>
  <span class="nv">$php</span>                  <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nv">$proxy</span>                <span class="o">=</span> <span class="kc">undef</span><span class="p">,</span>
  <span class="nv">$www_root</span>             <span class="o">=</span> <span class="s2">"</span><span class="nv">${full_web_path}</span><span class="s2">/</span><span class="nv">${name}</span><span class="s2">/"</span><span class="p">,</span>
  <span class="nv">$location_cfg_append</span>  <span class="o">=</span> <span class="kc">undef</span><span class="p">,</span>
<span class="p">)</span> <span class="p">{</span>
  <span class="n">nginx::resource::vhost</span> <span class="p">{</span> <span class="s2">"</span><span class="nv">${name}</span><span class="s2">.</span><span class="nv">${::domain}</span><span class="s2">"</span><span class="p">:</span>
    <span class="py">ensure</span>              <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
    <span class="py">www_root</span>            <span class="p">=&gt;</span> <span class="s2">"</span><span class="nv">${full_web_path}</span><span class="s2">/</span><span class="nv">${name}</span><span class="s2">/"</span><span class="p">,</span>
    <span class="py">location_cfg_append</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="s1">'rewrite'</span> <span class="p">=&gt;</span> <span class="s1">'^ https://$server_name$request_uri? permanent'</span> <span class="p">},</span>
  <span class="p">}</span>

  <span class="k">if</span> <span class="o">!</span><span class="nv">$www_root</span> <span class="p">{</span>
    <span class="nv">$tmp_www_root</span> <span class="o">=</span> <span class="kc">undef</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nv">$tmp_www_root</span> <span class="o">=</span> <span class="nv">$www_root</span>
  <span class="p">}</span>

  <span class="n">nginx::resource::vhost</span> <span class="p">{</span> <span class="s2">"</span><span class="nv">${name}</span><span class="s2">.</span><span class="nv">${::domain}</span><span class="s2"> </span><span class="nv">${name}</span><span class="s2">"</span><span class="p">:</span>
    <span class="py">ensure</span>                <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
    <span class="py">listen_port</span>           <span class="p">=&gt;</span> <span class="m">443</span><span class="p">,</span>
    <span class="py">www_root</span>              <span class="p">=&gt;</span> <span class="nv">$tmp_www_root</span><span class="p">,</span>
    <span class="py">proxy</span>                 <span class="p">=&gt;</span> <span class="nv">$proxy</span><span class="p">,</span>
    <span class="py">location_cfg_append</span>   <span class="p">=&gt;</span> <span class="nv">$location_cfg_append</span><span class="p">,</span>
    <span class="py">index_files</span>           <span class="p">=&gt;</span> <span class="p">[</span> <span class="s1">'index.php'</span> <span class="p">],</span>
    <span class="py">ssl</span>                   <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
    <span class="py">ssl_cert</span>              <span class="p">=&gt;</span> <span class="s1">'puppet:///modules/sslkey/wildcard_mydomain.crt'</span><span class="p">,</span>
    <span class="py">ssl_key</span>               <span class="p">=&gt;</span> <span class="s1">'puppet:///modules/sslkey/wildcard_mydomain.key'</span><span class="p">,</span>
  <span class="p">}</span>


  <span class="k">if</span> <span class="nv">$php</span> <span class="p">{</span>
    <span class="n">nginx::resource::location</span> <span class="p">{</span> <span class="s2">"</span><span class="nv">${name}</span><span class="s2">_root"</span><span class="p">:</span>
      <span class="py">ensure</span>          <span class="p">=&gt;</span> <span class="n">present</span><span class="p">,</span>
      <span class="py">ssl</span>             <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
      <span class="py">ssl_only</span>        <span class="p">=&gt;</span> <span class="kc">true</span><span class="p">,</span>
      <span class="py">vhost</span>           <span class="p">=&gt;</span> <span class="s2">"</span><span class="nv">${name}</span><span class="s2">.</span><span class="nv">${::domain}</span><span class="s2"> </span><span class="nv">${name}</span><span class="s2">"</span><span class="p">,</span>
      <span class="py">www_root</span>        <span class="p">=&gt;</span> <span class="s2">"</span><span class="nv">${full_web_path}</span><span class="s2">/</span><span class="nv">${name}</span><span class="s2">/"</span><span class="p">,</span>
      <span class="py">location</span>        <span class="p">=&gt;</span> <span class="s1">'~ \.php$'</span><span class="p">,</span>
      <span class="py">index_files</span>     <span class="p">=&gt;</span> <span class="p">[</span><span class="s1">'index.php'</span><span class="p">,</span> <span class="s1">'index.html'</span><span class="p">,</span> <span class="s1">'index.htm'</span><span class="p">],</span>
      <span class="py">proxy</span>           <span class="p">=&gt;</span> <span class="kc">undef</span><span class="p">,</span>
      <span class="py">fastcgi</span>         <span class="p">=&gt;</span> <span class="s2">"127.0.0.1:</span><span class="nv">${backend_port}</span><span class="s2">"</span><span class="p">,</span>
      <span class="py">fastcgi_script</span>  <span class="p">=&gt;</span> <span class="kc">undef</span><span class="p">,</span>
      <span class="py">location_cfg_append</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="py">fastcgi_connect_timeout</span> <span class="p">=&gt;</span> <span class="s1">'3m'</span><span class="p">,</span>
        <span class="py">fastcgi_read_timeout</span>    <span class="p">=&gt;</span> <span class="s1">'3m'</span><span class="p">,</span>
        <span class="py">fastcgi_send_timeout</span>    <span class="p">=&gt;</span> <span class="s1">'3m'</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="call-class-webnginx_ssl_with_redirect">Call class web::nginx_ssl_with_redirect</h1>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">web::nginx_ssl_with_redirect</span> <span class="p">{</span> <span class="s1">'sub-domain-name'</span><span class="p">:</span>
    <span class="py">backend_port</span> <span class="p">=&gt;</span> <span class="m">9001</span><span class="p">,</span>
  <span class="p">}</span>
</code></pre></div></div>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/RussianPenguin/russianpenguin.github.io">russianpenguin.github.io</a> is maintained by <a href="https://github.com/RussianPenguin">RussianPenguin</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(69889387, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/69889387" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  </body>
</html>
