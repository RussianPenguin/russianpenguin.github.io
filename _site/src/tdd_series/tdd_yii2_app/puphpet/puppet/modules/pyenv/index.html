<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="yandex-verification" content="551ffc5ae1433df6" />
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>pyenv | Чтобы не забыть</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="pyenv" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<meta property="og:description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<link rel="canonical" href="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/pyenv/" />
<meta property="og:url" content="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/pyenv/" />
<meta property="og:site_name" content="Чтобы не забыть" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="pyenv" />
<script type="application/ld+json">
{"headline":"pyenv","description":"Записная книжка рассеянного [в пространстве и времени] программиста","@type":"WebPage","url":"http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/pyenv/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=eacdde9998fcd3dd17b1956e7070eca69fdaf217">
  </head>
  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name">pyenv</h1>
      <h2 class="project-tagline">Записная книжка рассеянного [в пространстве и времени] программиста</h2>
      
        <a href="https://github.com/RussianPenguin/russianpenguin.github.io" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="pyenv">pyenv</h1>

<p><a href="https://github.com/yyuu/pyenv">Pyenv</a> provides a way to build and use
Pythons outside of your platforms package manager’s purview.</p>

<h4 id="table-of-contents">Table of contents</h4>

<ol>
  <li><a href="#overview">Overview - What is the pyenv module?</a></li>
  <li><a href="#module-description">Module description - What is the purpose of this mdoule?</a></li>
  <li><a href="#setup">Setup - The basics of getting started with pyenv</a>
    <ul>
      <li><a href="#beginning-with-pyenv">Beginning with pyenv - Installation</a></li>
      <li><a href="#installing-a-python">Installing a Python - Basic options for getting started</a></li>
      <li><a href="#relocating-the-pyenv-installation">Relocating pyenv</a></li>
    </ul>
  </li>
  <li><a href="#usage">Usage - The classes and types available for configuration</a>
    <ul>
      <li><a href="#classes">Classes</a>
        <ul>
          <li><a href="#class-pyenv">Class: pyenv</a></li>
        </ul>
      </li>
      <li><a href="#types">Types</a>
        <ul>
          <li><a href="#type-pyenv_python">Type: pyenv_python</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ol>

<h2 id="overview">Overview</h2>
<p>The pyenv module allows you to install pyenv on a target system. The module
also provides a Puppet type called <code class="language-plaintext highlighter-rouge">pyenv_python</code> which will instruct pyenv
to build a Python for you.</p>

<p>This module only supports global installations of pyenv, meaning it will not
install into a user’s home directory. Though it can be made to do so the types
that come with it do not support this work flow.</p>

<h2 id="module-description">Module description</h2>
<p>Python is a often-used programming language ranging from simple scripts to
automate a repetitive task to powering large (web) applications. The problem we
often encounter is that a distribution only ships with one (outdated) Python
version. Pyenv remedies this situation by allow you to build your own Pythons
and use those instead.</p>

<h2 id="setup">Setup</h2>
<p>This modules will:</p>

<ul>
  <li>Install pyenv for you. It will do so by checking out the latest tag at the
time this module was written;</li>
  <li>Symlink pyenv so that it will be found when looking through <code class="language-plaintext highlighter-rouge">$PATH</code>;</li>
  <li>Install the necessary packages to ensure you can build Python;</li>
  <li>A type and provider to make Puppet build Pythons through pyenv.</li>
</ul>

<p>This module requires:</p>

<ul>
  <li><a href="https://forge.puppetlabs.com/puppetlabs/stdlib">puppetlabs/stdlib</a></li>
  <li><a href="https://forge.puppetlabs.com/puppetlabs/vcsrepo">puppetlabs/vcsrepo</a></li>
</ul>

<h3 id="beginning-with-pyenv">Beginning with pyenv</h3>
<p>In order to install pyenv with the defaults:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">include</span> <span class="nc">::pyenv</span>
</code></pre></div></div>

<p>This will install pyenv for you in <code class="language-plaintext highlighter-rouge">/usr/local/pyenv</code> and symlink
<code class="language-plaintext highlighter-rouge">/usr/local/bin/pyenv</code> to <code class="language-plaintext highlighter-rouge">/usr/local/pyenv/bin/pyenv</code>.</p>

<h3 id="installing-a-python">Installing a Python</h3>
<p>Use the <code class="language-plaintext highlighter-rouge">pyenv_python</code> type to instruct Puppet to build a Python:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pyenv_python</span> <span class="p">{</span> <span class="s1">'3.4.0'</span><span class="p">:</span> <span class="p">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">pyenv_python</code> defaults to <code class="language-plaintext highlighter-rouge">ensure =&gt; present,</code>, therefor you do not need to
specify it yourself.</p>

<p>If you want to build a debug version of a Python add <em>-debug</em> to the name of
the Python:</p>

<div class="language-puppet highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pyenv_python</span> <span class="p">{</span> <span class="s1">'3.4.0-debug'</span><span class="p">:</span> <span class="p">}</span>
</code></pre></div></div>

<h3 id="relocation-the-pyenv-installation">Relocation the pyenv installation</h3>
<p>The module installs pyenv to <code class="language-plaintext highlighter-rouge">/usr/local/pyenv</code> by default and symlinks the
<code class="language-plaintext highlighter-rouge">pyenv</code> binary onto your path. This is needed so that the provider can find
<code class="language-plaintext highlighter-rouge">pyenv</code> and set up the <code class="language-plaintext highlighter-rouge">PYENV_ROOT</code> environment variable accordingly.</p>

<p>If you change the location of the pyenv checkout you must either:</p>

<ul>
  <li>Make sure the symlink is changed too. This is done automatically if you
 set <code class="language-plaintext highlighter-rouge">symlink_pyenv</code> to true;</li>
  <li>Create a custom Fact called <code class="language-plaintext highlighter-rouge">pyenv_binary</code> with the location of
 <code class="language-plaintext highlighter-rouge">/path/to/checkout/bin/pyenv</code>.</li>
</ul>

<p>The former of the two methods is preferred if at all possible.</p>

<p>If Puppet’s <code class="language-plaintext highlighter-rouge">$PATH</code> does not by default include <code class="language-plaintext highlighter-rouge">/usr/local/bin</code> either add
that to it or change the <code class="language-plaintext highlighter-rouge">symlink_path</code> to a different location that is part of
Puppet’s <code class="language-plaintext highlighter-rouge">$PATH</code>.</p>

<h2 id="usage">Usage</h2>

<h3 id="classes-and-defined-types">Classes and defined types</h3>

<h4 id="class-pyenv">Class: <code class="language-plaintext highlighter-rouge">pyenv</code></h4>
<p>The pyenv module’s primary and only class, <code class="language-plaintext highlighter-rouge">pyenv</code> sets up your system with pyenv
and the necessary packages to compile.</p>

<p>It takes the following parameters:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ensure_repo</code>: Whether to add or remove the repository
    <ul>
      <li>default: <code class="language-plaintext highlighter-rouge">present</code></li>
      <li>options: <code class="language-plaintext highlighter-rouge">present</code>, <code class="language-plaintext highlighter-rouge">absent</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">repo_location</code>: Where to checkout the repository on the filesystem
    <ul>
      <li>default: <code class="language-plaintext highlighter-rouge">/usr/local/pyenv</code></li>
      <li>options: any absolute path</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">repo_revision</code>: The revision to checkout
    <ul>
      <li>default: <code class="language-plaintext highlighter-rouge">v0.4.0-20140404</code></li>
      <li>options: tag, commit SHA, branch</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">symlink_pyenv</code>: Create a symlink to the pyenv binary
    <ul>
      <li>default: <code class="language-plaintext highlighter-rouge">true</code></li>
      <li>options: <code class="language-plaintext highlighter-rouge">true</code>, <code class="language-plaintext highlighter-rouge">false</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">symlink_path</code>: Where to symlink pyenv to
    <ul>
      <li>default: <code class="language-plaintext highlighter-rouge">/usr/local/bin</code></li>
      <li>options: any absolute path known to <code class="language-plaintext highlighter-rouge">$PATH</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">manage_packages</code>: Install packages needed to compile Python
    <ul>
      <li>default: <code class="language-plaintext highlighter-rouge">true</code></li>
      <li>options: <code class="language-plaintext highlighter-rouge">true</code>, <code class="language-plaintext highlighter-rouge">false</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">ensure_packages</code>: State of the packages to ensure
    <ul>
      <li>default: <code class="language-plaintext highlighter-rouge">latest</code></li>
      <li>options: any valid value for the ensure attribute of the package type</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">python_build_packages</code>: Array/list of packages to install
    <ul>
      <li>default: depends on what Facter returns for <code class="language-plaintext highlighter-rouge">osfamily</code>, see
(params.pp)[params.pp]</li>
      <li>options: an array of strings representing package names</li>
    </ul>
  </li>
</ul>

<h3 id="types">Types</h3>

<h4 id="type-pyenv_python">Type: <code class="language-plaintext highlighter-rouge">pyenv_python</code></h4>

<p><code class="language-plaintext highlighter-rouge">pyenv_python</code> allows you to build a Python which in turn will make it
available to someone wishing to use it.</p>

<p>It takes the following options:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">name</code> (namevar): name of the Python to be installed, see <code class="language-plaintext highlighter-rouge">pyenv install -l</code>.
If omitted the title of the resource will be used.</li>
  <li><code class="language-plaintext highlighter-rouge">ensure</code>: state the Python should be in
    <ul>
      <li>default: <code class="language-plaintext highlighter-rouge">present</code></li>
      <li>options: valid values for ensure</li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">keep</code>: keep the sources after compiling
    <ul>
      <li>default: <code class="language-plaintext highlighter-rouge">false</code></li>
      <li>options: <code class="language-plaintext highlighter-rouge">true</code>, <code class="language-plaintext highlighter-rouge">false</code></li>
    </ul>
  </li>
  <li><code class="language-plaintext highlighter-rouge">virtualenv</code>: Install virtualenv in the new Python
    <ul>
      <li>default: <code class="language-plaintext highlighter-rouge">false</code></li>
      <li>options: <code class="language-plaintext highlighter-rouge">true</code>, <code class="language-plaintext highlighter-rouge">false</code></li>
    </ul>
  </li>
</ul>

<p>Keep one thing in mind: if a Python was installed <strong>without</strong> setting <code class="language-plaintext highlighter-rouge">keep</code> to
<code class="language-plaintext highlighter-rouge">true</code> you cannot add it later, the provider will call the <code class="language-plaintext highlighter-rouge">fail()</code> method in
such cases.</p>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/RussianPenguin/russianpenguin.github.io">russianpenguin.github.io</a> is maintained by <a href="https://github.com/RussianPenguin">RussianPenguin</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(69889387, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/69889387" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  </body>
</html>
