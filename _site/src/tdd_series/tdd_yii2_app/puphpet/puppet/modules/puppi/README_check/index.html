<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="yandex-verification" content="551ffc5ae1433df6" />
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>PUPPI CHECK INSTRUCTIONS | Чтобы не забыть</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="PUPPI CHECK INSTRUCTIONS" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<meta property="og:description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<link rel="canonical" href="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/puppi/README_check/" />
<meta property="og:url" content="http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/puppi/README_check/" />
<meta property="og:site_name" content="Чтобы не забыть" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="PUPPI CHECK INSTRUCTIONS" />
<script type="application/ld+json">
{"url":"http://localhost:4000/src/tdd_series/tdd_yii2_app/puphpet/puppet/modules/puppi/README_check/","description":"Записная книжка рассеянного [в пространстве и времени] программиста","headline":"PUPPI CHECK INSTRUCTIONS","@type":"WebPage","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=d85e6f1917405784d52928d499ab3e51b4bffcc9">
  </head>
  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name">PUPPI CHECK INSTRUCTIONS</h1>
      <h2 class="project-tagline">Записная книжка рассеянного [в пространстве и времени] программиста</h2>
      
        <a href="https://github.com/RussianPenguin/russianpenguin.github.io" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <h1 id="puppi-check-instructions">PUPPI CHECK INSTRUCTIONS</h1>
<p>Documentation and examples related to the puppi action check</p>

<h2 id="synopsis-cli">SYNOPSIS (cli)</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    puppi check [project_name] [-r yes|no|fail]
</code></pre></div></div>

<h2 id="examples-cli">EXAMPLES (cli)</h2>
<p>Run host-wide checks.
        puppi check
Run project “myapp” specific tests AND host-wide checks
        puppi check myapp</p>

<p>Run checks and send reports only if some of them fail
        puppi check -r fail</p>

<p>Run checks and send reports
        puppi check -r yes</p>

<p>Run checks and show only failed ones
        puppi check -s fail</p>

<h2 id="examples-puppet">EXAMPLES (puppet)</h2>
<p>The basic define related to a check is:
        puppi::check   - Creates a single command to be placed in the check sequence.</p>

<p>A simple example might be:
        puppi::check { ‘Port_Apache’:
          command  =&gt; “check_tcp -H ${fqdn} -p 80” ,
        }</p>

<p>but also something that uses variables Puppet already knows
        puppi::check { ‘apache_process’:
          command  =&gt; “check_procs  -c 1: -C ${apache::params::processname}” ,
        }</p>

<p>To avoid repetitions you can include the relevant checks in defines you already have
to manage, for example, virtualhosts, and use the data you already provide to configure
their local puppi checks. 
        puppi::check { “Url_$name”:
          enable   =&gt; $enable,
          command  =&gt; “check_http -I ‘${target}’ -p ‘${port}’ -u ‘${url}’ -s ‘${pattern}’” ,
        }</p>

<p>You can also use custom scripts for your checks. They should behave similarly to Nagios plugins inn their exit codes: 0 for SUCCESS, 1 for WARNINGS, 2 for CRITICAL. In this case you’ve to specify the directory there the scripts stays:
        puppi::check { ‘my_stack’:
          command  =&gt; ‘stack_check.sh’,
          bade_dir =&gt; ‘/usr/bin’,
        }</p>

<h2 id="examples-with-example42-puppet-modules">EXAMPLES (with example42 puppet modules)</h2>
<p>If you use the whole Example42 modules set you get automatically many service related checks out of the box.
Just set (via an ENC, facts or manifests) these puppet variables:
        $monitor=”yes” # To enable automagic monitoring
        $monitor_tool = “puppi”  # As monitoring tool define at least puppi. If you like Nagios, you may use:
        $monitor_tool = [“nagios”,”puppi”] # This enables the below checks both for Puppi and Nagios
        $puppi=yes # To enable puppi extensions autoloading</p>

<p>To the port and service checks automatically added for the included modules, you can add custom url checks 
with something like:
        monitor::url { “URL_Check_Database_Connection”:
          url      =&gt; “http://www.example42.com/check/db”,
          pattern  =&gt; ‘SUCCESS’,
          port     =&gt; ‘80’,
          target   =&gt; “${fqdn}”,
        }</p>



      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/RussianPenguin/russianpenguin.github.io">russianpenguin.github.io</a> is maintained by <a href="https://github.com/RussianPenguin">RussianPenguin</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(69889387, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/69889387" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  </body>
</html>
