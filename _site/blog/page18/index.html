<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta name="yandex-verification" content="551ffc5ae1433df6" />
    
    <meta charset="UTF-8">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Page 18 of 35 for Чтобы не забыть | Записная книжка рассеянного [в пространстве и времени] программиста</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Чтобы не забыть" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<meta property="og:description" content="Записная книжка рассеянного [в пространстве и времени] программиста" />
<link rel="canonical" href="http://localhost:4000/blog/page18/" />
<meta property="og:url" content="http://localhost:4000/blog/page18/" />
<meta property="og:site_name" content="Чтобы не забыть" />
<link rel="prev" href="http://localhost:4000/blog/page17/" />
<link rel="next" href="http://localhost:4000/blog/page19/" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Чтобы не забыть" />
<script type="application/ld+json">
{"headline":"Чтобы не забыть","description":"Записная книжка рассеянного [в пространстве и времени] программиста","@type":"WebPage","url":"http://localhost:4000/blog/page18/","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#157878">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="stylesheet" href="/assets/css/style.css?v=eacdde9998fcd3dd17b1956e7070eca69fdaf217">
  </head>
  <body>
    <header class="page-header" role="banner">
      <h1 class="project-name">Чтобы не забыть</h1>
      <h2 class="project-tagline">Записная книжка рассеянного [в пространстве и времени] программиста</h2>
      
        <a href="https://github.com/RussianPenguin/russianpenguin.github.io" class="btn">View on GitHub</a>
      
      
    </header>

    <main id="content" class="main-content" role="main">
      <!-- This loops through the paginated posts -->

  <h1><a href="/2015/05/10/opensuse-%d0%b8-%d1%88%d1%80%d0%b8%d1%84%d1%82%d1%8b/">OpenSUSE и шрифты</a></h1>
  <p class="author">
    <span class="date">2015-05-10 21:41:59 +0300</span>
  </p>
  <div class="content">
   <p>[caption id=”attachment_535” align=”alignleft” width=”150”]<a href="https://russianpenguin.files.wordpress.com/2015/05/d181d0bdd0b8d0bcd0bed0ba-d18dd0bad180d0b0d0bdd0b0-d0b8d0b7-2015-05-10-211607.png"><img src="/assets/images/2015/05/d181d0bdd0b8d0bcd0bed0ba-d18dd0bad180d0b0d0bdd0b0-d0b8d0b7-2015-05-10-211607.png?w=150" alt="Сравнение шрифтов. Слева шрифт без нормально настроенного рендеринга, а справа - с нормально настроенным." /></a> Сравнение шрифтов. Слева шрифт без нормально настроенного рендеринга, а справа - с нормально настроенным.[/caption]</p>

<p>Поставил и понял, что давно не видел таких ужасных шрифтов. Сразу вспомнилось, что всего лишь несколько лет назад пересобирать freetype с включенным интерпретатором байткода было нормальным делом.</p>

<p>Как раз на картинке видно две ситуации:</p>

<ul>
  <li>слева дефолтный рендеринг шрифтов “искаропки”</li>
  <li>справа - допиленный рендеринг infinality (который всячески нахваливают)</li>
</ul>

<p>Осталось его лишь настроить.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>zypper ar&amp;nbsp<span class="p">;</span>http://download.opensuse.org/repositories/home:/nick31:/INFINALITY-ULTIMATE/openSUSE<span class="se">\_</span>13.2/ subpixel  
zypper mr <span class="nt">-p</span> 98 subpixel  
zypper ref <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>zypper dup  
zypper <span class="k">in </span>libfreetype6 libfreetype6-32bit
</code></pre></div></div>

<p>К слову, репозитарий выше - это единственный рабочий репозитарий с обновляемым (с нормальной скоростью) freetype и другими плюшками.</p>

<p>После этого можно поставить шрифт ubuntu (он даже нормально выглядит) или cantarell.</p>


  </div>

  <h1><a href="/2015/05/09/linux-%d0%b8-%d0%b7%d0%b0%d0%bf%d0%b8%d1%81%d1%8c-%d0%b2%d0%b5%d0%b1%d0%ba%d0%b0%d1%81%d1%82%d0%be%d0%b2/">Linux и запись вебкастов</a></h1>
  <p class="author">
    <span class="date">2015-05-09 22:21:56 +0300</span>
  </p>
  <div class="content">
   <p>Довольно долго искал, чем же можно нормально писать вебинары.</p>

<p>В итоге остановился на <a href="https://github.com/vkohaupt/vokoscreen" title="GitHub - Vokoscreen">vokoscreen</a>.</p>

<p><a href="https://russianpenguin.files.wordpress.com/2015/05/d0b2d18bd0b4d0b5d0bbd0b5d0bdd0b8d0b5_024.png"><img src="/assets/images/2015/05/d0b2d18bd0b4d0b5d0bbd0b5d0bdd0b8d0b5_024.png" alt="Vokoscreen" /></a></p>

<p>Из достоинств:</p>

<ul>
  <li>выбор объект для записи (отдельный монитор, отдельное окно, область экрана);</li>
  <li>выбор источника записи звука;</li>
  <li>настройка формата получаемого видео (все равно видео потребует дальнешего редактирование, но приятно);</li>
  <li>простой и безглючный интерфейс.</li>
</ul>

<p>Да. Можно и из консоли писать, но при записи неудобно задавать набор опций, которые как раз дают возможность выбирать объект для захвата.</p>

<p>Даже если запись изначально прошла удачно, то итоговый файл все равно мало пригоден для аплоада на ютуб или куда-нибдь еще (для разрешения 1920х1080 и 60 минутах записи объем итогового файла перевалит далеко за 2 гига).</p>

<p>Поэтому можно воспользоваться кодемо ffmpeg. Для меня подошли следующие опции.</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ffmpeg <span class="nt">-i</span> input.mkv <span class="nt">-vcodec</span> libx264 <span class="nt">-strict</span> <span class="nt">-2</span> <span class="nt">-crf</span> 20 <span class="nt">-threads</span> 7 <span class="nt">-r</span> 25 output.mp4  

</code></pre></div></div>

<p>Где:</p>

<ul>
  <li>-i input.mkv - исходный файл</li>
  <li>-vcodec libx264 - кодек видео x264</li>
  <li>-strict -2 - этот набор опций включает поддержку эекспериментального энкодера aac</li>
  <li>-crf 20 - опция энкодера, которая задает степень сжатия (в мануале - это квантование). от 0 до 51. 0 - лучшее качество картинки, а 51 - наихудшее.</li>
  <li>-threads 7 - количество потоков (равно количество реально-виртуальных ядер минус один. в таком случае можно за компьютером еще что-то делать)</li>
  <li>-r 25 - кадры в секунду для выходного видео</li>
  <li>output.mp4 - куда пишем</li>
</ul>

<p>Подробный <a href="https://trac.ffmpeg.org/wiki/Encode/H.264" title="FFmpeg and H.264 Encoding Guide">мануал</a> по кодирования x264.</p>


  </div>

  <h1><a href="/2015/04/29/javascript-%d0%b8-%d0%be%d0%b1%d0%bb%d0%b0%d1%81%d1%82%d0%b8-%d0%b2%d0%b8%d0%b4%d0%b8%d0%bc%d0%be%d1%81%d1%82%d0%b8/">JavaScript и области видимости</a></h1>
  <p class="author">
    <span class="date">2015-04-29 21:10:25 +0300</span>
  </p>
  <div class="content">
   <p>Об этой особенности полезно иногда вспоминать.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// глобальная переменная, которую мы попытаемся дальше получить  </span>
<span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>

<span class="c1">// Мозг предполагает, что до объявления bar в теле функциии глобальный bar будет доступен  </span>
<span class="kd">function</span> <span class="nx">simple</span><span class="err">\</span><span class="nx">_define</span><span class="p">()</span> <span class="p">{</span>  
 <span class="nx">alert</span><span class="p">(</span><span class="nx">bar</span><span class="p">);</span>  
 <span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>  
 <span class="nx">alert</span><span class="p">(</span><span class="nx">bar</span><span class="p">);</span>  
<span class="p">}</span>

<span class="c1">// Но это не так. Функция выше на самом деле выглядит вот так  </span>
<span class="kd">function</span> <span class="nx">real</span><span class="err">\</span><span class="nx">_define</span><span class="p">()</span> <span class="p">{</span>  
 <span class="kd">var</span> <span class="nx">bar</span><span class="p">;</span>  
 <span class="nx">alert</span><span class="p">(</span><span class="nx">bar</span><span class="p">);</span>  
 <span class="nx">bar</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>  
 <span class="nx">alert</span><span class="p">(</span><span class="nx">bar</span><span class="p">);</span>  
<span class="p">}</span>

<span class="c1">// А что же с условиями? Разве они не создают локальные области видимости?  </span>
<span class="kd">function</span> <span class="nx">define</span><span class="err">\</span><span class="nx">_inside</span><span class="err">\</span><span class="nx">_if</span><span class="p">()</span> <span class="p">{</span>  
 <span class="k">if</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>  
 <span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span><span class="p">;</span>  
 <span class="p">}</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">bar</span><span class="p">);</span>  
<span class="p">}</span>

<span class="c1">// Ну а циклы?  </span>
<span class="kd">function</span> <span class="nx">define</span><span class="err">\</span><span class="nx">_inside</span><span class="err">\</span><span class="nx">_while</span><span class="p">()</span> <span class="p">{</span>  
 <span class="k">do</span> <span class="p">{</span>  
 <span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>  
 <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="kc">false</span><span class="p">);</span>  
 <span class="nx">alert</span><span class="p">(</span><span class="nx">bar</span><span class="p">);</span>  
<span class="p">}</span>

<span class="c1">// И переменные из for?  </span>
<span class="kd">function</span> <span class="nx">define</span><span class="err">\</span><span class="nx">_inside</span><span class="err">\</span><span class="nx">_for</span><span class="p">()</span> <span class="p">{</span>  
 <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">bar</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">bar</span> <span class="err">\</span><span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="nx">bar</span><span class="o">++</span><span class="p">);</span>  
 <span class="nx">alert</span><span class="p">(</span><span class="nx">bar</span><span class="p">);</span>  
<span class="p">}</span>

<span class="sr">/</span><span class="se">\*</span><span class="sr"> </span><span class="err"> 
</span> <span class="err">\</span><span class="o">*</span> <span class="nx">Да</span><span class="p">.</span> <span class="nx">Это</span> <span class="nx">особенность</span> <span class="nx">js</span> <span class="o">-</span> <span class="nx">компилятор</span> <span class="nx">собирает</span> <span class="nx">все</span> <span class="nx">объявления</span> <span class="nx">переменных</span> <span class="nx">текущей</span> <span class="nx">области</span> <span class="nx">видимости</span>  
 <span class="err">\</span><span class="o">*</span> <span class="nx">и</span> <span class="nx">выделяет</span> <span class="nx">под</span> <span class="nx">них</span> <span class="nx">все</span> <span class="nx">требуемые</span> <span class="nx">ресурсы</span> <span class="nx">сразу</span> <span class="nx">при</span> <span class="nx">входе</span> <span class="nx">в</span> <span class="nx">функцию</span><span class="p">.</span>  
 <span class="err">\</span><span class="o">*</span><span class="sr">/</span><span class="err">
</span></code></pre></div></div>


  </div>

  <h1><a href="/2015/04/22/%d0%bc%d0%bd%d0%be%d0%b3%d0%be%d0%bf%d0%be%d1%82%d0%be%d1%87%d0%bd%d0%b0%d1%8f-%d0%ba%d0%be%d0%bc%d0%bf%d1%80%d0%b5%d1%81%d1%81%d0%b8%d1%8f-%d0%b8-tar/">Многопоточная компрессия и tar</a></h1>
  <p class="author">
    <span class="date">2015-04-22 21:00:57 +0300</span>
  </p>
  <div class="content">
   <p>Сколько можно? :) Ядер все больше и больше, а</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-cjf</span> /mnt/<span class="se">\_</span>backup/<span class="sb">`</span><span class="nb">date</span> <span class="s1">'+%Y-%m-%d_%H-%M-%S'</span><span class="sb">`</span>.tbz2 /home
</code></pre></div></div>

<p>как работал в один поток, так и работает.</p>

<p>Есть два многопоточных решения:</p>

<ul>
  <li>pbzip2 - параллельный bzip</li>
  <li>pigz - параллельный gzip</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-c</span> /home | pbzip2 <span class="nt">-vc</span> <span class="nt">-9</span> <span class="nt">-p7</span> /mnt/<span class="se">\_</span>backup/<span class="sb">`</span><span class="nb">date</span> <span class="s1">'+%Y-%m-%d_%H-%M-%S'</span><span class="sb">`</span>.tbz2
</code></pre></div></div>

<p>Опцией -p# можно управлять количеством ядер, которые будет использовать архиватор. Нормально - это N-1.</p>

<p>Аналогично и для gzip</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-c</span> /home | pigz <span class="nt">-vc</span> <span class="nt">-9</span> <span class="nt">-p7</span> /mnt/<span class="se">\_</span>backup/<span class="sb">`</span><span class="nb">date</span> <span class="s1">'+%Y-%m-%d_%H-%M-%S'</span><span class="sb">`</span>.tbz2
</code></pre></div></div>

<p>С удивлением открыл для себя, что - в bash по дефолту означает stdout. И</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">tar</span> <span class="nt">-cf</span> - file
</code></pre></div></div>

<p>будет использовать в качестве файла stdout. :)</p>


  </div>

  <h1><a href="/2015/04/15/firefox-ns_error_file_corrupted/">Firefox: NS_ERROR_FILE_CORRUPTED</a></h1>
  <p class="author">
    <span class="date">2015-04-15 15:31:58 +0300</span>
  </p>
  <div class="content">
   <p>Столкнулся сегодня с этой ошибкой в консоли фокса.</p>

<p>Причина проста: повреждение хранилища localStorage. Подробнее можно посмотреть официальную <a href="https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Storage#Storage_location_and_clearing_the_data" title="Storage location and clearing the data">документацию</a>.</p>

<p>Решается удалением файла ```
webappsstore.sqlite</p>
<pre><code class="language-.">
В коде же это исключение так же следует обрабатывать корректно (чтобы не пугать пользователя).

```javascript
try {  
 setLocalStorageItem(key, value);  
} catch(e) {  
 if(e.name == "NS\_ERROR\_FILE\_CORRUPTED") {  
 showMessageSomehow("Sorry, it looks like your browser storage has been corrupted. Please clear your storage by going to Tools -\&gt; Clear Recent History -\&gt; Cookies and set time range to 'Everything'. This will remove the corrupted browser storage across all sites.");  
 }  
}
</code></pre>

<p>Странно, но в моем случае чистка всего-всего таки не помогла. Помогло ручное удаление файла.</p>


  </div>


<!-- Pagination links -->
<div class="pagination">
  
    <a href="/blog/page17/" class="previous">Назад</a>
  
  <span class="page_number ">Страница: 18 из 35</span>
  
    <a href="/blog/page19/" class="next">Далее</a>
  
</div>


      <footer class="site-footer">
        
          <span class="site-footer-owner"><a href="https://github.com/RussianPenguin/russianpenguin.github.io">russianpenguin.github.io</a> is maintained by <a href="https://github.com/RussianPenguin">RussianPenguin</a>.</span>
        
        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
      </footer>
    </main>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(69889387, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/69889387" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
  </body>
</html>
