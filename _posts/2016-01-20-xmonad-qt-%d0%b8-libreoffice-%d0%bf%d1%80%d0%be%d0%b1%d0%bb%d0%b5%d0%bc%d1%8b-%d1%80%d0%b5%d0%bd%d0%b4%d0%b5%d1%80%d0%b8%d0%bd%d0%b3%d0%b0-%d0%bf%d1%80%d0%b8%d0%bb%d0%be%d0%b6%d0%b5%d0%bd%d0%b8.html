---
layout: post
title: XMonad, Qt и LibreOffice - проблемы рендеринга приложений
date: 2016-01-20 22:16:44.000000000 +03:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories: []
tags:
- linux
- qt
- xmonad
meta:
  _wpcom_is_markdown: '1'
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _publicize_job_id: '18949403611'
author:
  login: russianpenguin
  email: maksim.v.zubkov@gmail.com
  display_name: russianpenguin
  first_name: Maksim
  last_name: Zubkov
permalink: "/2016/01/20/xmonad-qt-%d0%b8-libreoffice-%d0%bf%d1%80%d0%be%d0%b1%d0%bb%d0%b5%d0%bc%d1%8b-%d1%80%d0%b5%d0%bd%d0%b4%d0%b5%d1%80%d0%b8%d0%bd%d0%b3%d0%b0-%d0%bf%d1%80%d0%b8%d0%bb%d0%be%d0%b6%d0%b5%d0%bd%d0%b8/"
---
<p><img class="alignleft size-medium wp-image-736" src="{{ site.baseurl }}/assets/images/2016/01/xmonad-qt_without_icons_in_console.png?w=300" alt="xmonad-qt_without_icons_in_console" width="300" height="67" /> Многие пользователи сталкиваются с тем, что за пределами kde или гнома у приложений qt пропадают иконки. Но это не единственная проблема.</p>
<p>Вторая проблема - это странное поведение приложений из пакета libreoffice - при каждом щелчке мышью в окне или вводе текста окно полностью перерисовывается. И это заметно даже невооруженным глазом. И очень сильно мешает работать.</p>
<p><img class="aligncenter size-medium wp-image-749" src="{{ site.baseurl }}/assets/images/2016/01/xmonad-qt_without_icons.png?w=300" alt="xmonad-qt_without_icons" width="300" height="264" /></p>
<p>Происходит это из-за того, что эти приложения пытаются брать свои настройки из запущенного DE, но для кедов и гнома все хорошо, а вот для менее популярных окружений все плохо.</p>
<p>Самый простой способ решить проблему - указать, из какого окружения нужно брать настройки - выставить переменную окружения XDG_CURRENT_DESKTOP в значение KDE или GNOME (а может быть XFCE - такое значение тоже возможно). Все зависит от того, каким de должен прикидываться ваш wm :)</p>
<p>Сходу мне не попалась спецификация по этой переменной окружения. Поэтому ссылок не вставляют.</p>
<p>Для своей конфигурации xmonad я прописал в .xinitrc</p>
<p>[code]export XDG_CURRENT_DESKTOP=KDE[/code]</p>
<p>И все нормально работает. В приложениях qt появились значки, а libreoffice пропали лаги отрисовки.</p>
<p><img class="aligncenter size-medium wp-image-766" src="{{ site.baseurl }}/assets/images/2016/01/xmonad-qt_without_icons_with_fix.png?w=300" alt="xmonad-qt_without_icons_with_fix" width="300" height="264" /></p>
<p>&nbsp;</p>
