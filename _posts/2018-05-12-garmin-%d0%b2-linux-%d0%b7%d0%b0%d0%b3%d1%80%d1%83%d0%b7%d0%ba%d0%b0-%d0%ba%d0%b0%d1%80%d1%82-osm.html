---
layout: post
title: 'Garmin в Linux: загрузка карт OSM'
date: 2018-05-12 16:27:03.000000000 +03:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- HowTo
tags:
- навигация
- linux
- wine
meta:
  _wpcom_is_markdown: '1'
  timeline_notification: '1526131626'
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _publicize_job_id: '17770502849'
author:
  login: russianpenguin
  email: maksim.v.zubkov@gmail.com
  display_name: russianpenguin
  first_name: Maksim
  last_name: Zubkov
permalink: "/2018/05/12/garmin-%d0%b2-linux-%d0%b7%d0%b0%d0%b3%d1%80%d1%83%d0%b7%d0%ba%d0%b0-%d0%ba%d0%b0%d1%80%d1%82-osm/"
excerpt: Разбираемся как загружать карты osm в навигаторы garmin в линуксе. Используем
  для этого MapSource под wine.
---
<p><img class="alignleft size-thumbnail wp-image-2428" src="{{ site.baseurl }}/assets/images/2018/05/2018-05-12-152102_1485x851.png?w=150" alt="2018-05-12-15:21:02_1485x851" width="150" height="86" />Долгое время считалось, что загрузка карт в гарминовские навигаторы - это очень сложный процесс (на самом деле так и есть, особенно если вы подготавливаете карты вручную).</p>
<p>Но оказалось, что загружать карты все же возможно и можно делать это достаточно быстро. Нам потребуется wine, mapsource и дампы карты проекта <a href="http://garmin.gis-lab.info/">gis-lab</a>.</p>
<p><!--more--></p>
<h2>Установка wine</h2>
<p>Тут ничего сложного.</p>
<p>[code lang="shell"]$ sudo dnf install wine[/code]</p>
<h2>Установка MapSource</h2>
<p>Тут сложнее - установочный пакет версии 6163 с официального сайта вызывает ошибку о том, что он уже нашел установленный mapsource.</p>
<p><img class=" size-medium wp-image-2429 aligncenter" src="{{ site.baseurl }}/assets/images/2018/05/2018-05-12-133304_661x512.png?w=300" alt="2018-05-12-13:33:04_661x512" width="300" height="232" /></p>
<p>Поэтому требуется найти MapSource_6153.exe на сайте <a href="http://gawisp.com/perry/mapsource/">http://gawisp.com/perry/mapsource/</a> и поставить его. После завершения установки инсталлятор попросит разрешения запустить софтину - не соглашайтесь, так как у вас нет еще установленных карт и запуск будет неудачным.</p>
<p>Кстати, по окончанию процесса можно будет установить обновление прямо из меню (раздел справка-&gt;проверка обновлений). Это будет обновление до последней версии, которое пройдет успешно.</p>
<h2>Установка карт</h2>
<p>Скачиваем интересующие нас регионы со <a href="http://garmin.gis-lab.info/">страницы проекта</a>. После распаковки в какой-либо каталог (например ~/maps) каждого архива запускаем последовательно в распакованных папках</p>
<p>[code lang="shell"]$ wineconsole install.bat[/code]</p>
<h2>Подключение навигатора</h2>
<p>Рассматривать будем только современные навигаторы, которые подключаются как usb-диск. Для старших моделей, которые подключаются по ком-порту можно почитать подробную <a href="https://ubuntuforums.org/showthread.php?t=1483930">инструкцию</a>.</p>
<p>В случае с garmin mass storage нужно сделать так, чтобы подмонтированное устройство распознавалось как флоппи-диск.</p>
<ul>
<li>Подключаем навигатор</li>
<li>Монтируем его и запускаем winecfg</li>
<li>В разделе диски нужно создать новый диск, который будет ссылаться на подмонтированное устройство и в разделе дополнительных опций указать тип диска "флоппидиск".</li>
</ul>
<p><img class=" size-full wp-image-2433 aligncenter" src="{{ site.baseurl }}/assets/images/2018/05/2018-05-12-161052_456x536.png" alt="2018-05-12-16:10:52_456x536" width="456" height="536" /></p>
<p>При этом удалять или изменять то, что система определила автоматически (в моем случае это диск D:) не стоит - настройки не будет сохраняться. Нужно создать точку монтирования вручную.</p>
<h2>Загрузка карт</h2>
<p>Запускаем из меню MapSoutce</p>
<ul>
<li>В списке карт выбираем нужную нам карту</li>
<li>При помощи инструмента карты выбираем нужный регион и убеждаемся, что он попал в список выгружаемых карт (вкладка карты)</li>
<li>Повторяем шаги для оставшихся карт</li>
</ul>
<p><img class=" size-full wp-image-2430 aligncenter" src="{{ site.baseurl }}/assets/images/2018/05/2018-05-12-161710_1480x862.png" alt="2018-05-12-16:17:10_1480x862.png" width="1480" height="862" /></p>
<p><img class=" size-full wp-image-2431 aligncenter" src="{{ site.baseurl }}/assets/images/2018/05/2018-05-12-161839_512x731.png" alt="2018-05-12-16:18:39_512x731" width="512" height="731" /></p>
<p>Как только все карты будут добавлены можно идти в меню передача-&gt;передать на устройство. И выгружать данные.</p>
<p><img class=" size-full wp-image-2432 aligncenter" src="{{ site.baseurl }}/assets/images/2018/05/2018-05-12-161852_293x347.png" alt="2018-05-12-16:18:52_293x347" width="293" height="347" /></p>
<h2>Литература</h2>
<ul>
<li><a href="https://ubuntuforums.org/showthread.php?t=1483930">Running Garmin Mapsource (6137) under Ubuntu with GPS access</a></li>
<li><a href="https://ubuntuforums.org/showthread.php?t=1793977">Connect Garmin GPS to MapSource</a></li>
<li><a href="https://openmtbmap.org/tutorials/send_maps/">Send maps with Basecamp (Mapinstall) or Mapsource</a></li>
</ul>
