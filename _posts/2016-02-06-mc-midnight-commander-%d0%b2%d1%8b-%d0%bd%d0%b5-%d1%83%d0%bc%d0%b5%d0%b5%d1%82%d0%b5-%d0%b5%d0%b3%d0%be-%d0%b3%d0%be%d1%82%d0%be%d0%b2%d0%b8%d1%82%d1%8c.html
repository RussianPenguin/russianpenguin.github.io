---
layout: post
title: 'MC (midnight commander): вы не умеете его готовить.'
date: 2016-02-06 16:01:47.000000000 +03:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories: []
tags:
- linux
- mc
- shell
meta:
  _wpcom_is_markdown: '1'
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _publicize_job_id: '19527470022'
author:
  login: russianpenguin
  email: maksim.v.zubkov@gmail.com
  display_name: russianpenguin
  first_name: Maksim
  last_name: Zubkov
permalink: "/2016/02/06/mc-midnight-commander-%d0%b2%d1%8b-%d0%bd%d0%b5-%d1%83%d0%bc%d0%b5%d0%b5%d1%82%d0%b5-%d0%b5%d0%b3%d0%be-%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%b8%d1%82%d1%8c/"
---
<p><img class=" size-full wp-image-983 alignleft" src="{{ site.baseurl }}/assets/images/2016/02/2016-02-06-143803_337x97.png" alt="2016-02-06-14:38:03_337x97" width="337" height="97" />Да-да. Вы все делаете неверно. MC - хоть и не заменяет консоль, но часто бывает полезен и для некоторых даже незаменим. Пусть он и является лишь оболочкой для ползанья по файловой системе, но очень функциональной оболочкой.<br />
Обычно ведь как: f5 (скопировать), f6 (переместить), f3 (посмотреть), f4 (отредактировать), f8 (удалить), f7 (создать катало) и f10 (выйти).<br />
Это тот набор команд, которым чаще всего пользователь и ограничивается.<br />
Ах да - еще TAB чтобы переключиться из одной панели в другую.</p>
<h2>Остаемся в текущей папке при выходе из mc.</h2>
<p>Вы замечали, что при выходе из mc вы всегда возвращаетесь в ту папку, в которой были до его запуска. Одним это нравится, а другим нет.</p>
<p>В любом случае такое поведение можно поменять. А служит для этого опция -P, которой передается имя файла, в котором сейчас находится mc.</p>
<p>Зная имя файла по завершению процесса можно всегда вернуться в нужный катало. Для этого есть скрипт mc-wrapper.sh. Прописываем у себя в .bashrc.</p>
<p>[code]alias mc='. /usr/libexec/mc/mc-wrapper.sh'[/code]</p>
<p>В вашей системе этот скрипт может лежать по другому адресу. После запуска шелла можно посмотреть на вывод команды alias и удостоверится, что нужный алиас прописан. Таким образом мы будем сохранять каталог после выхода из менеджера.</p>
<h2>Выбор файлов</h2>
<ul>
<li>[insert] (или [ctrl-t]) - выбор текущего файла или снятие выбора с текущего файла (так же позволяет выбирать несколько файлов/папок)</li>
<li>[+] - выбор файлов и папок имена которых попадают под введенный паттерн</li>
<li>[/] - убирает выбор с файлов и папок име</li>
<li>[*] - реверсивное выделение файлов. Инвертирует состояние выбран\не выбран для всех файлов в текущем окне (именно файлов. не папок)</li>
</ul>
<h2>Доступ в шелл</h2>
<ul>
<li>вы можете вводить любую команду - просто начинаете печатать и она появляется внизу в маленьком приглашении ввода вашего шелла. Нажатие на [enter] запустит ее на исполнение.</li>
<li>не пытайтесь нажать [tab] в попытках вызвать автодополнение - вы просто смените текущую панель. Чтобы вызвать автодополнение надо нажать последовательность [esc tab]. Тут все как в обычном шелле - первый раз оно пытается дополнить максимально возможную часть команды, а повторное нажатие последовательности показывает ве возможные варианты (да еще и с выбором как в zsh).<img class=" size-full wp-image-1015 aligncenter" src="{{ site.baseurl }}/assets/images/2016/02/2016-02-06-150022_395x202.png" alt="2016-02-06-15:00:22_395x202" width="395" height="202" /></li>
<li>а если надо показать большой терминал? На надо выходить из mc - нажимаете [ctrl-o] и панели файловый менеджер скрывается оставляя вас наедине с консолью. Чтобы его вернуть заново нажимает [ctrl-o].</li>
<li>[alt-enter] - копирует имя текущего выбранного файла в строку терминала (удобно для передачи имени каким-нибудь командам)</li>
</ul>
<h2>Встроенный просмотрщик [f3] и редактор [f4]</h2>
<ul>
<li>Встроенный вьювер умеет показывать содержимое разных файлов не просто в сыром режиме (когда в pdf будут видны управляющие инструкции, а в гифке - байты), а в виде документа, который адаптирован для отображения в текстовом виде (конечно если у вас есть сопутствующий софт вроде pdf2text).</li>
<li>Чтобы увидеть сырые данные жмем [f8] в самом просмотрщике, либо [shift-f3] при открытии файла (а не [f3]).</li>
<li>Так же mc умеет использовать внешние редакторы и просмотрщики (задаются переменными <strong>PAGER</strong> и <strong>EDITOR</strong> в вашем .bashrc). Чтобы включить использование внешних редакторов выбираем соответствующую опцию в настройках<img class="alignnone size-full wp-image-1030" src="{{ site.baseurl }}/assets/images/2016/02/2016-02-06-151553_664x389.png" alt="2016-02-06-15:15:53_664x389" width="664" height="389" /></li>
</ul>
<h2>Работа с панелями</h2>
<ul>
<li>[alt-,] - переключить режим разбиения с вертикального на горизонтальный</li>
<li>[alt-t] - циклическая смена режима отображения панели</li>
<li>[alt-i] - синхронизирует вторую панель с текущей (полезно если вам надо быстро открыть одну и ту же папку в двух панелях)</li>
<li>[ctrl-u] - поменять панели местами</li>
<li>[alt-o] - если текущий элемент директория, то откроет ее во второй панели и сместит выделение на один элемент вперед. Если же текущий элемент файл - откроет содержимое родительской директории в соседней панели и сместит выделение.</li>
<li>[ctrl-pgup] - перейти к родительской директории (если включена навигация в стиле lynx, то просто стрелка влево)</li>
<li>[alt-shift-h] - показать историю перемещения по папкам</li>
<li>[alt-y] - перейти в предыдущую папку из истории</li>
<li>[alt-u] - перейти в следующую папку из истории</li>
</ul>
<h2>Поиск</h2>
<ul>
<li>[alt-?] - открывает диалог поиска файлов</li>
<li>[alt-s] - быстрый поиск элемента в текущем каталоге по регулярному выражению</li>
<li>[ctrl-s] - бысрый поиск в текущем каталоге по совпадению</li>
</ul>
<h2>Основные сочетания</h2>
<ul>
<li>[ctrl-space] - посчитать объем каталога под выделением</li>
<li>[ctrl-x s] - создать символическую ссылку</li>
<li>[ctrl-x h] - создать жесткую ссылку</li>
<li>[ctrl-x o] - открыть редактор сhown на элемент</li>
<li>[ctrl-x c] - открыть редактор chmod на элемент</li>
<li>[alt-.] - скрыть\отобразить dot-файлы</li>
</ul>
<h2>Виртуальные файловые системы (vfs)</h2>
<p>Эта концепция относительно mc позволяет нам путешествовать по архивам, sftp-серверам, rpm-файлам так, словно мы работаем с локальной файловой системой.</p>
<p>Попробуйте в mc набрать команду</p>
<p>[code]cd ftp://mirror.yandex.ru/[/code]</p>
<p><img class=" size-full wp-image-1066 aligncenter" src="{{ site.baseurl }}/assets/images/2016/02/2016-02-06-154203_506x328.png" alt="2016-02-06-15:42:03_506x328" width="506" height="328" /></p>
<p>Вы не сможете отличить vfs от локальной системы только по скорости работы. Если у вас есть соответствующий доступ, то даже редактировать файлы на vfs возможно.</p>
<p>Таким нехитрым образом можно попадать внутрь любых других источников, который поддерживаются mc.</p>
<p>Введите cd без параметров и вы попадете в домашнюю директорию.</p>
<h2>Полезные команды</h2>
<ul>
<li>[ctrl-x d] - сраврение директорий</li>
<li>[ctrl-\] - переход в директорию быстрого доступа (и управление этим списком)</li>
</ul>
<h2>Полезные настройки</h2>
<p><img class=" size-full wp-image-1099 aligncenter" src="{{ site.baseurl }}/assets/images/2016/02/2016-02-06-155646_435x242.png" alt="2016-02-06-15:56:46_435x242" width="435" height="242" /></p>
<ul>
<li>левая\правая панель - формат списка. позволяет задать пользовательский формат вывода информации (чтобы посмотреть доступные поля нажмите [f1]</li>
</ul>
<p><img class=" size-full wp-image-1079 aligncenter" src="{{ site.baseurl }}/assets/images/2016/02/2016-02-06-154726_301x229.png" alt="2016-02-06-15:47:26_301x229" width="301" height="229" /></p>
<ul>
<li>Конфигурация
<ul>
<li>детали операции/подсчитывать размер - в совокупности эти две опции дадут более информативное окно копирования файлов (а если убрать, то копирование будет работать гораздо быстрее)</li>
<li>Автоматически сохранять настройки - полезно чтобы постоянно не нажимать "сохранить настройки"</li>
</ul>
</li>
<li>Внешний вид
<ul>
<li>строка подсказки - дасть немного больше места на экране если убрать (скроется совет дня)</li>
<li>равный размер панелей - если мы включим разный режим отображения в каждой из панелей (древовидный и подробный), то получим проводник :)</li>
</ul>
</li>
<li>Настройка панелей
<ul>
<li>автосохранение настроек панелей - будут удобно чтобы каждый раз не выбирать режим отображения панели заново</li>
<li>навигация в тиле lynx - быстрая навигация стрелками</li>
</ul>
</li>
</ul>
<p>&nbsp;</p>
<p>&nbsp;</p>
