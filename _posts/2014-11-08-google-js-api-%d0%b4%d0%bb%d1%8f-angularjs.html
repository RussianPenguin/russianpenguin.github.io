---
layout: post
title: Google JS API для AngularJS
date: 2014-11-08 17:00:46.000000000 +03:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Разработка
tags:
- angularjs
- google
- javascript
meta:
  _wpcom_is_markdown: '1'
  sharing_disabled: '1'
  _wpas_skip_facebook: '1'
  _wpas_skip_google_plus: '1'
  _wpas_skip_twitter: '1'
  _wpas_skip_linkedin: '1'
  _wpas_skip_tumblr: '1'
  _wpas_skip_path: '1'
  _publicize_pending: '1'
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
  _edit_last: '13696577'
author:
  login: russianpenguin
  email: maksim.v.zubkov@gmail.com
  display_name: russianpenguin
  first_name: Maksim
  last_name: Zubkov
permalink: "/2014/11/08/google-js-api-%d0%b4%d0%bb%d1%8f-angularjs/"
---
<p>Написал небольшой враппер к гугловому апи для использования совместно с ангуляром. Взять можно на <a title="angularjs-gapi" href="https://github.com/RussianPenguin/angularjs-gapi">гитхабе</a>.</p>
<p>Или в bower</p>
<p>[code lang="shell"] $ bower install angularjs-gapi[/code]</p>
<h3>Поключение</h3>
<p>[code language="javascript"]angular.module('app', ['gapi']).config(['gapiProvider', '$routeProvider', function(gapiProvider, $routeProvider) {<br />
   gapiProvider.apiKey(YOU_API_KEY) // апи-ключ можно создать в консоли разработчика<br />
        .clientId(YOU_APP_CLIENT_ID) // берем в консоли разработчика<br />
        .apiScope(SCOPES_FOR_APP); // скоупы, которые нужны для работы приложения<br />
}])[/code]</p>
<p>Если вам не требуется работать с пользовательскими данными и не требуется разрешение пользователя, то достаточно использования только YOU_API_KEY.</p>
<h3>Авторизация</h3>
<p>[code language="javascript"]angular.module('app').controller('tstController', ['$scope', 'gapi', function($scope, gapi) {<br />
  gapi.login().then(function() {<br />
    $scope.login = 'success';<br />
  }, function() {<br />
    $scope.login = 'fail';<br />
  });<br />
}])[/code]</p>
<h3>Выполнение запросов не требующих авторизации</h3>
<p>[code language="javascript"]angular.module('app').controller('tstController', ['$scope', 'gapi', function($scope, gapi) {<br />
  // we can't make requests while api is not ready<br />
  if (gapi.isApiReady()) {<br />
    gapi.call(&quot;youtube&quot;, &quot;v3&quot;, &quot;search&quot;, &quot;list&quot;, {<br />
      query: &quot;search term&quot;<br />
      part: &quot;snippet&quot;<br />
      type: &quot;video&quot;<br />
    }).then(function(response) {<br />
      // work with response<br />
    })<br />
  }<br />
}]);[/code]</p>
<h3>Выполнение запросов требующих авторизации</h3>
<p>[code language="javascript"]angular.module('app').controller('tstController', ['$scope', 'gapi', function($scope, gapi) {<br />
  // we can't make requests while api is not ready and user is not logged in<br />
  if (gapi.isApiReady() &amp;&amp; gapi.isLoggedIn()) {<br />
      gapi.call(&quot;youtube&quot;, &quot;v3&quot;, &quot;playlists&quot;, &quot;list&quot;, {<br />
      part: &quot;snippet&quot;,<br />
      type: &quot;video&quot;;<br />
    }).then(function(response) {<br />
      // work with response<br />
    })<br />
  }<br />
}]);[/code]</p>
<p>Вроде все.</p>
