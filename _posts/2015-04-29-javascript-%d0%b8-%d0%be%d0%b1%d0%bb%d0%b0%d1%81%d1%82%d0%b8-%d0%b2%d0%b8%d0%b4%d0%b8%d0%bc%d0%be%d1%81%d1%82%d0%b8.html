---
layout: post
title: JavaScript и области видимости
date: 2015-04-29 21:10:25.000000000 +03:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- Разработка
tags:
- javascript
meta:
  _wpcom_is_markdown: '1'
  sharing_disabled: '1'
  _publicize_pending: '1'
  _rest_api_published: '1'
  _rest_api_client_id: "-1"
author:
  login: russianpenguin
  email: maksim.v.zubkov@gmail.com
  display_name: russianpenguin
  first_name: Maksim
  last_name: Zubkov
permalink: "/2015/04/29/javascript-%d0%b8-%d0%be%d0%b1%d0%bb%d0%b0%d1%81%d1%82%d0%b8-%d0%b2%d0%b8%d0%b4%d0%b8%d0%bc%d0%be%d1%81%d1%82%d0%b8/"
---
<p>Об этой особенности полезно иногда вспоминать.</p>
<p>[code lang="javascript"]// глобальная переменная, которую мы попытаемся дальше получить<br />
var bar = 42;</p>
<p>// Мозг предполагает, что до объявления bar в теле функциии глобальный bar будет доступен<br />
function simple_define() {<br />
    alert(bar);<br />
    var bar = 10;<br />
    alert(bar);<br />
}</p>
<p>// Но это не так. Функция выше на самом деле выглядит вот так<br />
function real_define() {<br />
    var bar;<br />
    alert(bar);<br />
    bar = 10;<br />
    alert(bar);<br />
}</p>
<p>// А что же с условиями? Разве они не создают локальные области видимости?<br />
function define_inside_if() {<br />
    if (true) {<br />
        var bar = -10;<br />
    }</p>
<p>    alert(bar);<br />
}</p>
<p>// Ну а циклы?<br />
function define_inside_while() {<br />
    do {<br />
        var bar = 10;<br />
    } while (false);<br />
    alert(bar);<br />
}</p>
<p>// И переменные из for?<br />
function define_inside_for() {<br />
    for (var bar = 0; bar &lt; 10; bar++);<br />
    alert(bar);<br />
}</p>
<p>/*<br />
 * Да. Это особенность js - компилятор собирает все объявления переменных текущей области видимости<br />
 * и выделяет под них все требуемые ресурсы сразу при входе в функцию.<br />
 */[/code]</p>
