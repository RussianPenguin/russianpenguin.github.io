---
layout: post
title: Linux и запись вебкастов
type: post
categories:
- HowTo
tags:
- вебинары
- linux
- x264
permalink: "/2015/05/09/linux-%d0%b8-%d0%b7%d0%b0%d0%bf%d0%b8%d1%81%d1%8c-%d0%b2%d0%b5%d0%b1%d0%ba%d0%b0%d1%81%d1%82%d0%be%d0%b2/"
---
Довольно долго искал, чем же можно нормально писать вебинары.

В итоге остановился на [vokoscreen](https://github.com/vkohaupt/vokoscreen "GitHub - Vokoscreen").

![Vokoscreen]({{ site.baseurl }}/assets/images/2015/05/d0b2d18bd0b4d0b5d0bbd0b5d0bdd0b8d0b5_024.png){:.img-fluid}

Из достоинств:

- выбор объект для записи (отдельный монитор, отдельное окно, область экрана);
- выбор источника записи звука;
- настройка формата получаемого видео (все равно видео потребует дальнешего редактирование, но приятно);
- простой и безглючный интерфейс.

Да. Можно и из консоли писать, но при записи неудобно задавать набор опций, которые как раз дают возможность выбирать объект для захвата.

Даже если запись изначально прошла удачно, то итоговый файл все равно мало пригоден для аплоада на ютуб или куда-нибдь еще (для разрешения 1920х1080 и 60 минутах записи объем итогового файла перевалит далеко за 2 гига).

Поэтому можно воспользоваться кодемо ffmpeg. Для меня подошли следующие опции.

```shell
ffmpeg -i input.mkv -vcodec libx264 -strict -2 -crf 20 -threads 7 -r 25 output.mp4  

```

Где:

- -i input.mkv - исходный файл
- -vcodec libx264 - кодек видео x264
- -strict -2 - этот набор опций включает поддержку эекспериментального энкодера aac
- -crf 20 - опция энкодера, которая задает степень сжатия (в мануале - это квантование). от 0 до 51. 0 - лучшее качество картинки, а 51 - наихудшее.
- -threads 7 - количество потоков (равно количество реально-виртуальных ядер минус один. в таком случае можно за компьютером еще что-то делать)
- -r 25 - кадры в секунду для выходного видео
- output.mp4 - куда пишем

Подробный [мануал](https://trac.ffmpeg.org/wiki/Encode/H.264 "FFmpeg and H.264 Encoding Guide") по кодирования x264.

