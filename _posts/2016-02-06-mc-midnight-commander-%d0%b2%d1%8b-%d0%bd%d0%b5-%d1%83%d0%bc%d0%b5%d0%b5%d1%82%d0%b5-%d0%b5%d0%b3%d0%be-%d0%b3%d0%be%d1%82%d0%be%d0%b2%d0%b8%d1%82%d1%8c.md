---
layout: post
title: 'MC (midnight commander): вы не умеете его готовить.'
date: 2016-02-06 16:01:47.000000000 +03:00
type: post
categories: []
tags:
- linux
- mc
- shell
permalink: "/2016/02/06/mc-midnight-commander-%d0%b2%d1%8b-%d0%bd%d0%b5-%d1%83%d0%bc%d0%b5%d0%b5%d1%82%d0%b5-%d0%b5%d0%b3%d0%be-%d0%b3%d0%be%d1%82%d0%be%d0%b2%d0%b8%d1%82%d1%8c/"
---
![2016-02-06-14:38:03_337x97]({{ site.baseurl }}/assets/images/2016/02/2016-02-06-143803_337x97.png){: .align-left}
Да-да. Вы все делаете неверно. MC - хоть и не заменяет консоль, но часто бывает полезен и для некоторых даже незаменим. Пусть он и является лишь оболочкой для ползанья по файловой системе, но очень функциональной оболочкой.  
Обычно ведь как: f5 (скопировать), f6 (переместить), f3 (посмотреть), f4 (отредактировать), f8 (удалить), f7 (создать катало) и f10 (выйти).  
Это тот набор команд, которым чаще всего пользователь и ограничивается.  
Ах да - еще TAB чтобы переключиться из одной панели в другую.

## Остаемся в текущей папке при выходе из mc.

Вы замечали, что при выходе из mc вы всегда возвращаетесь в ту папку, в которой были до его запуска. Одним это нравится, а другим нет.

В любом случае такое поведение можно поменять. А служит для этого опция -P, которой передается имя файла, в котором сейчас находится mc.

Зная имя файла по завершению процесса можно всегда вернуться в нужный катало. Для этого есть скрипт mc-wrapper.sh. Прописываем у себя в .bashrc.

```
alias mc='. /usr/libexec/mc/mc-wrapper.sh'
```

В вашей системе этот скрипт может лежать по другому адресу. После запуска шелла можно посмотреть на вывод команды alias и удостоверится, что нужный алиас прописан. Таким образом мы будем сохранять каталог после выхода из менеджера.

## Выбор файлов

- [insert] (или [ctrl-t]) - выбор текущего файла или снятие выбора с текущего файла (так же позволяет выбирать несколько файлов/папок)
- [+] - выбор файлов и папок имена которых попадают под введенный паттерн
- [/] - убирает выбор с файлов и папок име
- [*] - реверсивное выделение файлов. Инвертирует состояние выбран\не выбран для всех файлов в текущем окне (именно файлов. не папок)

## Доступ в шелл

- вы можете вводить любую команду - просто начинаете печатать и она появляется внизу в маленьком приглашении ввода вашего шелла. Нажатие на [enter] запустит ее на исполнение.
- не пытайтесь нажать [tab] в попытках вызвать автодополнение - вы просто смените текущую панель. Чтобы вызвать автодополнение надо нажать последовательность [esc tab]. Тут все как в обычном шелле - первый раз оно пытается дополнить максимально возможную часть команды, а повторное нажатие последовательности показывает ве возможные варианты (да еще и с выбором как в zsh). ![2016-02-06-15:00:22_395x202]({{ site.baseurl }}/assets/images/2016/02/2016-02-06-150022_395x202.png)
- а если надо показать большой терминал? На надо выходить из mc - нажимаете [ctrl-o] и панели файловый менеджер скрывается оставляя вас наедине с консолью. Чтобы его вернуть заново нажимает [ctrl-o].
- [alt-enter] - копирует имя текущего выбранного файла в строку терминала (удобно для передачи имени каким-нибудь командам)

## Встроенный просмотрщик [f3] и редактор [f4]

- Встроенный вьювер умеет показывать содержимое разных файлов не просто в сыром режиме (когда в pdf будут видны управляющие инструкции, а в гифке - байты), а в виде документа, который адаптирован для отображения в текстовом виде (конечно если у вас есть сопутствующий софт вроде pdf2text).
- Чтобы увидеть сырые данные жмем [f8] в самом просмотрщике, либо [shift-f3] при открытии файла (а не [f3]).
- Так же mc умеет использовать внешние редакторы и просмотрщики (задаются переменными **PAGER** и **EDITOR** в вашем .bashrc). Чтобы включить использование внешних редакторов выбираем соответствующую опцию в настройках ![2016-02-06-15:15:53_664x389]({{ site.baseurl }}/assets/images/2016/02/2016-02-06-151553_664x389.png)

## Работа с панелями

- [alt-,] - переключить режим разбиения с вертикального на горизонтальный
- [alt-t] - циклическая смена режима отображения панели
- [alt-i] - синхронизирует вторую панель с текущей (полезно если вам надо быстро открыть одну и ту же папку в двух панелях)
- [ctrl-u] - поменять панели местами
- [alt-o] - если текущий элемент директория, то откроет ее во второй панели и сместит выделение на один элемент вперед. Если же текущий элемент файл - откроет содержимое родительской директории в соседней панели и сместит выделение.
- [ctrl-pgup] - перейти к родительской директории (если включена навигация в стиле lynx, то просто стрелка влево)
- [alt-shift-h] - показать историю перемещения по папкам
- [alt-y] - перейти в предыдущую папку из истории
- [alt-u] - перейти в следующую папку из истории

## Поиск

- [alt-?] - открывает диалог поиска файлов
- [alt-s] - быстрый поиск элемента в текущем каталоге по регулярному выражению
- [ctrl-s] - бысрый поиск в текущем каталоге по совпадению

## Основные сочетания

- [ctrl-space] - посчитать объем каталога под выделением
- [ctrl-x s] - создать символическую ссылку
- [ctrl-x h] - создать жесткую ссылку
- [ctrl-x o] - открыть редактор сhown на элемент
- [ctrl-x c] - открыть редактор chmod на элемент
- [alt-.] - скрыть\отобразить dot-файлы

## Виртуальные файловые системы (vfs)

Эта концепция относительно mc позволяет нам путешествовать по архивам, sftp-серверам, rpm-файлам так, словно мы работаем с локальной файловой системой.

Попробуйте в mc набрать команду

```
cd ftp://mirror.yandex.ru/
```

![2016-02-06-15:42:03_506x328]({{ site.baseurl }}/assets/images/2016/02/2016-02-06-154203_506x328.png)

Вы не сможете отличить vfs от локальной системы только по скорости работы. Если у вас есть соответствующий доступ, то даже редактировать файлы на vfs возможно.

Таким нехитрым образом можно попадать внутрь любых других источников, который поддерживаются mc.

Введите cd без параметров и вы попадете в домашнюю директорию.

## Полезные команды

- [ctrl-x d] - сраврение директорий
- [ctrl-\] - переход в директорию быстрого доступа (и управление этим списком)

## Полезные настройки

![2016-02-06-15:56:46_435x242]({{ site.baseurl }}/assets/images/2016/02/2016-02-06-155646_435x242.png)

- левая\правая панель - формат списка. позволяет задать пользовательский формат вывода информации (чтобы посмотреть доступные поля нажмите [f1]

![2016-02-06-15:47:26_301x229]({{ site.baseurl }}/assets/images/2016/02/2016-02-06-154726_301x229.png)

- Конфигурация
  - детали операции/подсчитывать размер - в совокупности эти две опции дадут более информативное окно копирования файлов (а если убрать, то копирование будет работать гораздо быстрее)
  - Автоматически сохранять настройки - полезно чтобы постоянно не нажимать "сохранить настройки"
- Внешний вид
  - строка подсказки - дасть немного больше места на экране если убрать (скроется совет дня)
  - равный размер панелей - если мы включим разный режим отображения в каждой из панелей (древовидный и подробный), то получим проводник :)
- Настройка панелей
  - автосохранение настроек панелей - будут удобно чтобы каждый раз не выбирать режим отображения панели заново
  - навигация в тиле lynx - быстрая навигация стрелками

&nbsp;

&nbsp;

